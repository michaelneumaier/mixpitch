(()=>{var Te=class extends Event{oldState;newState;constructor(i,{oldState:t="",newState:e="",...s}={}){super(i,s),this.oldState=String(t||""),this.newState=String(e||"")}},Ls=new WeakMap;function Rs(i,t,e){Ls.set(i,setTimeout(()=>{Ls.has(i)&&i.dispatchEvent(new Te("toggle",{cancelable:!1,oldState:t,newState:e}))},0))}var bi=globalThis.ShadowRoot||function(){},Zr=globalThis.HTMLDialogElement||function(){},_e=new WeakMap,vt=new WeakMap,Qt=new WeakMap;function ke(i){return Qt.get(i)||"hidden"}var Ee=new WeakMap;function Qr(i){let t=i.popoverTargetElement;if(!(t instanceof HTMLElement))return;let e=ke(t);i.popoverTargetAction==="show"&&e==="showing"||i.popoverTargetAction==="hide"&&e==="hidden"||(e==="showing"?Zt(t,!0,!0):Tt(t,!1)&&(Ee.set(t,i),pi(t)))}function Tt(i,t){return!(i.popover!=="auto"&&i.popover!=="manual"||!i.isConnected||t&&ke(i)!=="showing"||!t&&ke(i)!=="hidden"||i instanceof Zr&&i.hasAttribute("open")||document.fullscreenElement===i)}function Ps(i){return i?Array.from(vt.get(i.ownerDocument)||[]).indexOf(i)+1:0}function ta(i){let t=Us(i),e=ea(i);return Ps(t)>Ps(e)?t:e}function Ce(i){let t=vt.get(i);for(let e of t||[])if(!e.isConnected)t.delete(e);else return e;return null}function Rt(i){return typeof i.getRootNode=="function"?i.getRootNode():i.parentNode?Rt(i.parentNode):i}function Us(i){for(;i;){if(i instanceof HTMLElement&&i.popover==="auto"&&Qt.get(i)==="showing")return i;if(i=i instanceof Element&&i.assignedSlot||i.parentElement||Rt(i),i instanceof bi&&(i=i.host),i instanceof Document)return}}function ea(i){for(;i;){let t=i.popoverTargetElement;if(t instanceof HTMLElement)return t;if(i=i.parentElement||Rt(i),i instanceof bi&&(i=i.host),i instanceof Document)return}}function ia(i){let t=new Map,e=0;for(let a of vt.get(i.ownerDocument)||[])t.set(a,e),e+=1;t.set(i,e),e+=1;let s=null;function r(a){let n=Us(a);if(n===null)return null;let o=t.get(n);(s===null||t.get(s)<o)&&(s=n)}return r(i.parentElement||Rt(i)),s}function sa(i){return i.hidden||i instanceof bi||(i instanceof HTMLButtonElement||i instanceof HTMLInputElement||i instanceof HTMLSelectElement||i instanceof HTMLTextAreaElement||i instanceof HTMLOptGroupElement||i instanceof HTMLOptionElement||i instanceof HTMLFieldSetElement)&&i.disabled||i instanceof HTMLInputElement&&i.type==="hidden"||i instanceof HTMLAnchorElement&&i.href===""?!1:typeof i.tabIndex=="number"&&i.tabIndex!==-1}function ra(i){if(i.shadowRoot&&i.shadowRoot.delegatesFocus!==!0)return null;let t=i;t.shadowRoot&&(t=t.shadowRoot);let e=t.querySelector("[autofocus]");if(e)return e;{let a=t.querySelectorAll("slot");for(let n of a){let o=n.assignedElements({flatten:!0});for(let l of o){if(l.hasAttribute("autofocus"))return l;if(e=l.querySelector("[autofocus]"),e)return e}}}let s=i.ownerDocument.createTreeWalker(t,NodeFilter.SHOW_ELEMENT),r=s.currentNode;for(;r;){if(sa(r))return r;r=s.nextNode()}}function aa(i){ra(i)?.focus()}var De=new WeakMap;function pi(i){if(!Tt(i,!1))return;let t=i.ownerDocument;if(!i.dispatchEvent(new Te("beforetoggle",{cancelable:!0,oldState:"closed",newState:"open"}))||!Tt(i,!1))return;let e=!1;if(i.popover==="auto"){let r=i.getAttribute("popover"),a=ia(i)||t;if(Me(a,!1,!0),r!==i.getAttribute("popover")||!Tt(i,!1))return}Ce(t)||(e=!0),De.delete(i);let s=t.activeElement;i.classList.add(":popover-open"),Qt.set(i,"showing"),_e.has(t)||_e.set(t,new Set),_e.get(t).add(i),aa(i),i.popover==="auto"&&(vt.has(t)||vt.set(t,new Set),vt.get(t).add(i),qs(Ee.get(i),!0)),e&&s&&i.popover==="auto"&&De.set(i,s),Rs(i,"closed","open")}function Zt(i,t=!1,e=!1){if(!Tt(i,!0))return;let s=i.ownerDocument;if(i.popover==="auto"&&(Me(i,t,e),!Tt(i,!0))||(qs(Ee.get(i),!1),Ee.delete(i),e&&(i.dispatchEvent(new Te("beforetoggle",{oldState:"open",newState:"closed"})),!Tt(i,!0))))return;_e.get(s)?.delete(i),vt.get(s)?.delete(i),i.classList.remove(":popover-open"),Qt.set(i,"hidden"),e&&Rs(i,"open","closed");let r=De.get(i);r&&(De.delete(i),t&&r.focus())}function Is(i,t=!1,e=!1){let s=Ce(i);for(;s;)Zt(s,t,e),s=Ce(i)}function Me(i,t,e){let s=i.ownerDocument||i;if(i instanceof Document)return Is(s,t,e);let r=null,a=!1;for(let n of vt.get(s)||[])if(n===i)a=!0;else if(a){r=n;break}if(!a)return Is(s,t,e);for(;r&&ke(r)==="showing"&&vt.get(s)?.size;)Zt(r,t,e)}var hi=new WeakMap;function Ns(i){if(!i.isTrusted)return;let t=i.composedPath()[0];if(!t)return;let e=t.ownerDocument;if(!Ce(e))return;let r=ta(t);if(r&&i.type==="pointerdown")hi.set(e,r);else if(i.type==="pointerup"){let a=hi.get(e)===r;hi.delete(e),a&&Me(r||e,!1,!0)}}var di=new WeakMap;function qs(i,t=!1){if(!i)return;di.has(i)||di.set(i,i.getAttribute("aria-expanded"));let e=i.popoverTargetElement;if(e instanceof HTMLElement&&e.popover==="auto")i.setAttribute("aria-expanded",String(t));else{let s=di.get(i);s?i.setAttribute("aria-expanded",s):i.removeAttribute("aria-expanded")}}var Fs=globalThis.ShadowRoot||function(){};function na(){return typeof HTMLElement<"u"&&typeof HTMLElement.prototype=="object"&&"popover"in HTMLElement.prototype}function Dt(i,t,e){let s=i[t];Object.defineProperty(i,t,{value(r){return s.call(this,e(r))}})}var oa=/(^|[^\\]):popover-open\b/g;function la(){return typeof globalThis.CSSLayerBlockRule=="function"}function ua(){let i=la();return`
${i?"@layer popover-polyfill {":""}
  :where([popover]) {
    position: fixed;
    z-index: 2147483647;
    inset: 0;
    padding: 0.25em;
    width: fit-content;
    height: fit-content;
    border-width: initial;
    border-color: initial;
    border-image: initial;
    border-style: solid;
    background-color: canvas;
    color: canvastext;
    overflow: auto;
    margin: auto;
  }

  :where([popover]:not(.\\:popover-open)) {
    display: none;
  }

  :where(dialog[popover].\\:popover-open) {
    display: block;
  }

  :where(dialog[popover][open]) {
    display: revert;
  }

  :where([anchor].\\:popover-open) {
    inset: auto;
  }

  :where([anchor]:popover-open) {
    inset: auto;
  }

  @supports not (background-color: canvas) {
    :where([popover]) {
      background-color: white;
      color: black;
    }
  }

  @supports (width: -moz-fit-content) {
    :where([popover]) {
      width: -moz-fit-content;
      height: -moz-fit-content;
    }
  }

  @supports not (inset: 0) {
    :where([popover]) {
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
    }
  }
${i?"}":""}
`}var Ft=null;function fi(i){let t=ua();if(Ft===null)try{Ft=new CSSStyleSheet,Ft.replaceSync(t)}catch{Ft=!1}if(Ft===!1){let e=document.createElement("style");e.textContent=t,i instanceof Document?i.head.prepend(e):i.prepend(e)}else i.adoptedStyleSheets=[Ft,...i.adoptedStyleSheets]}function ca(){if(typeof window>"u")return;window.ToggleEvent=window.ToggleEvent||Te;function i(l){return l?.includes(":popover-open")&&(l=l.replace(oa,"$1.\\:popover-open")),l}Dt(Document.prototype,"querySelector",i),Dt(Document.prototype,"querySelectorAll",i),Dt(Element.prototype,"querySelector",i),Dt(Element.prototype,"querySelectorAll",i),Dt(Element.prototype,"matches",i),Dt(Element.prototype,"closest",i),Dt(DocumentFragment.prototype,"querySelectorAll",i),Object.defineProperties(HTMLElement.prototype,{popover:{enumerable:!0,configurable:!0,get(){if(!this.hasAttribute("popover"))return null;let l=(this.getAttribute("popover")||"").toLowerCase();return l===""||l=="auto"?"auto":"manual"},set(l){l===null?this.removeAttribute("popover"):this.setAttribute("popover",l)}},showPopover:{enumerable:!0,configurable:!0,value(){pi(this)}},hidePopover:{enumerable:!0,configurable:!0,value(){Zt(this,!0,!0)}},togglePopover:{enumerable:!0,configurable:!0,value(l){Qt.get(this)==="showing"&&l===void 0||l===!1?Zt(this,!0,!0):(l===void 0||l===!0)&&pi(this)}}});let t=Element.prototype.attachShadow;t&&Object.defineProperties(Element.prototype,{attachShadow:{enumerable:!0,configurable:!0,writable:!0,value(l){let u=t.call(this,l);return fi(u),u}}});let e=HTMLElement.prototype.attachInternals;e&&Object.defineProperties(HTMLElement.prototype,{attachInternals:{enumerable:!0,configurable:!0,writable:!0,value(){let l=e.call(this);return l.shadowRoot&&fi(l.shadowRoot),l}}});let s=new WeakMap;function r(l){Object.defineProperties(l.prototype,{popoverTargetElement:{enumerable:!0,configurable:!0,set(u){if(u===null)this.removeAttribute("popovertarget"),s.delete(this);else if(u instanceof Element)this.setAttribute("popovertarget",""),s.set(this,u);else throw new TypeError("popoverTargetElement must be an element or null")},get(){if(this.localName!=="button"&&this.localName!=="input"||this.localName==="input"&&this.type!=="reset"&&this.type!=="image"&&this.type!=="button"||this.disabled||this.form&&this.type==="submit")return null;let u=s.get(this);if(u&&u.isConnected)return u;if(u&&!u.isConnected)return s.delete(this),null;let d=Rt(this),b=this.getAttribute("popovertarget");return(d instanceof Document||d instanceof Fs)&&b&&d.getElementById(b)||null}},popoverTargetAction:{enumerable:!0,configurable:!0,get(){let u=(this.getAttribute("popovertargetaction")||"").toLowerCase();return u==="show"||u==="hide"?u:"toggle"},set(u){this.setAttribute("popovertargetaction",u)}}})}r(HTMLButtonElement),r(HTMLInputElement);let a=l=>{let u=l.composedPath(),d=u[0];if(!(d instanceof Element)||d?.shadowRoot)return;let b=Rt(d);if(!(b instanceof Fs||b instanceof Document))return;let g=u.find(v=>v.matches?.("[popovertargetaction],[popovertarget]"));if(g){Qr(g),l.preventDefault();return}},n=l=>{let u=l.key,d=l.target;!l.defaultPrevented&&d&&(u==="Escape"||u==="Esc")&&Me(d.ownerDocument,!0,!0)};(l=>{l.addEventListener("click",a),l.addEventListener("keydown",n),l.addEventListener("pointerdown",Ns),l.addEventListener("pointerup",Ns)})(document),fi(document)}na()||ca();var Fe=class extends Event{oldState;newState;constructor(i,{oldState:t="",newState:e="",...s}={}){super(i,s),this.oldState=String(t||""),this.newState=String(e||"")}},Ws=new WeakMap;function $s(i,t,e){Ws.set(i,setTimeout(()=>{Ws.has(i)&&i.dispatchEvent(new Fe("toggle",{cancelable:!1,oldState:t,newState:e}))},0))}var wi=globalThis.ShadowRoot||function(){},ha=globalThis.HTMLDialogElement||function(){},Oe=new WeakMap,yt=new WeakMap,ee=new WeakMap;function Le(i){return ee.get(i)||"hidden"}var Pe=new WeakMap;function da(i){let t=i.popoverTargetElement;if(!(t instanceof HTMLElement))return;let e=Le(t);i.popoverTargetAction==="show"&&e==="showing"||i.popoverTargetAction==="hide"&&e==="hidden"||(e==="showing"?te(t,!0,!0):Ot(t,!1)&&(Pe.set(t,i),yi(t)))}function Ot(i,t){return!(i.popover!=="auto"&&i.popover!=="manual"||!i.isConnected||t&&Le(i)!=="showing"||!t&&Le(i)!=="hidden"||i instanceof ha&&i.hasAttribute("open")||document.fullscreenElement===i)}function Vs(i){return i?Array.from(yt.get(i.ownerDocument)||[]).indexOf(i)+1:0}function fa(i){let t=zs(i),e=pa(i);return Vs(t)>Vs(e)?t:e}function Ie(i){let t=yt.get(i);for(let e of t||[])if(!e.isConnected)t.delete(e);else return e;return null}function qt(i){return typeof i.getRootNode=="function"?i.getRootNode():i.parentNode?qt(i.parentNode):i}function zs(i){for(;i;){if(i instanceof HTMLElement&&i.popover==="auto"&&ee.get(i)==="showing")return i;if(i=i instanceof Element&&i.assignedSlot||i.parentElement||qt(i),i instanceof wi&&(i=i.host),i instanceof Document)return}}function pa(i){for(;i;){let t=i.popoverTargetElement;if(t instanceof HTMLElement)return t;if(i=i.parentElement||qt(i),i instanceof wi&&(i=i.host),i instanceof Document)return}}function ba(i){let t=new Map,e=0;for(let a of yt.get(i.ownerDocument)||[])t.set(a,e),e+=1;t.set(i,e),e+=1;let s=null;function r(a){let n=zs(a);if(n===null)return null;let o=t.get(n);(s===null||t.get(s)<o)&&(s=n)}return r(i.parentElement||qt(i)),s}function ma(i){return i.hidden||i instanceof wi||(i instanceof HTMLButtonElement||i instanceof HTMLInputElement||i instanceof HTMLSelectElement||i instanceof HTMLTextAreaElement||i instanceof HTMLOptGroupElement||i instanceof HTMLOptionElement||i instanceof HTMLFieldSetElement)&&i.disabled||i instanceof HTMLInputElement&&i.type==="hidden"||i instanceof HTMLAnchorElement&&i.href===""?!1:typeof i.tabIndex=="number"&&i.tabIndex!==-1}function ga(i){if(i.shadowRoot&&i.shadowRoot.delegatesFocus!==!0)return null;let t=i;t.shadowRoot&&(t=t.shadowRoot);let e=t.querySelector("[autofocus]");if(e)return e;{let a=t.querySelectorAll("slot");for(let n of a){let o=n.assignedElements({flatten:!0});for(let l of o){if(l.hasAttribute("autofocus"))return l;if(e=l.querySelector("[autofocus]"),e)return e}}}let s=i.ownerDocument.createTreeWalker(t,NodeFilter.SHOW_ELEMENT),r=s.currentNode;for(;r;){if(ma(r))return r;r=s.nextNode()}}function va(i){ga(i)?.focus()}var Ne=new WeakMap;function yi(i){if(!Ot(i,!1))return;let t=i.ownerDocument;if(!i.dispatchEvent(new Fe("beforetoggle",{cancelable:!0,oldState:"closed",newState:"open"}))||!Ot(i,!1))return;let e=!1;if(i.popover==="auto"){let r=i.getAttribute("popover"),a=ba(i)||t;if(Re(a,!1,!0),r!==i.getAttribute("popover")||!Ot(i,!1))return}Ie(t)||(e=!0),Ne.delete(i);let s=t.activeElement;i.classList.add(":popover-open"),ee.set(i,"showing"),Oe.has(t)||Oe.set(t,new Set),Oe.get(t).add(i),va(i),i.popover==="auto"&&(yt.has(t)||yt.set(t,new Set),yt.get(t).add(i),Gs(Pe.get(i),!0)),e&&s&&i.popover==="auto"&&Ne.set(i,s),$s(i,"closed","open")}function te(i,t=!1,e=!1){if(!Ot(i,!0))return;let s=i.ownerDocument;if(i.popover==="auto"&&(Re(i,t,e),!Ot(i,!0))||(Gs(Pe.get(i),!1),Pe.delete(i),e&&(i.dispatchEvent(new Fe("beforetoggle",{oldState:"open",newState:"closed"})),!Ot(i,!0))))return;Oe.get(s)?.delete(i),yt.get(s)?.delete(i),i.classList.remove(":popover-open"),ee.set(i,"hidden"),e&&$s(i,"open","closed");let r=Ne.get(i);r&&(Ne.delete(i),t&&r.focus())}function Bs(i,t=!1,e=!1){let s=Ie(i);for(;s;)te(s,t,e),s=Ie(i)}function Re(i,t,e){let s=i.ownerDocument||i;if(i instanceof Document)return Bs(s,t,e);let r=null,a=!1;for(let n of yt.get(s)||[])if(n===i)a=!0;else if(a){r=n;break}if(!a)return Bs(s,t,e);for(;r&&Le(r)==="showing"&&yt.get(s)?.size;)te(r,t,e)}var mi=new WeakMap;function Hs(i){if(!i.isTrusted)return;let t=i.composedPath()[0];if(!t)return;let e=t.ownerDocument;if(!Ie(e))return;let r=fa(t);if(r&&i.type==="pointerdown")mi.set(e,r);else if(i.type==="pointerup"){let a=mi.get(e)===r;mi.delete(e),a&&Re(r||e,!1,!0)}}var gi=new WeakMap;function Gs(i,t=!1){if(!i)return;gi.has(i)||gi.set(i,i.getAttribute("aria-expanded"));let e=i.popoverTargetElement;if(e instanceof HTMLElement&&e.popover==="auto")i.setAttribute("aria-expanded",String(t));else{let s=gi.get(i);s?i.setAttribute("aria-expanded",s):i.removeAttribute("aria-expanded")}}var Ys=globalThis.ShadowRoot||function(){};function js(){return typeof HTMLElement<"u"&&typeof HTMLElement.prototype=="object"&&"popover"in HTMLElement.prototype}function Xs(){return!!(document.body?.showPopover&&!/native code/i.test(document.body.showPopover.toString()))}function Mt(i,t,e){let s=i[t];Object.defineProperty(i,t,{value(r){return s.call(this,e(r))}})}var ya=/(^|[^\\]):popover-open\b/g;function wa(){return typeof globalThis.CSSLayerBlockRule=="function"}function xa(){let i=wa();return`
${i?"@layer popover-polyfill {":""}
  :where([popover]) {
    position: fixed;
    z-index: 2147483647;
    inset: 0;
    padding: 0.25em;
    width: fit-content;
    height: fit-content;
    border-width: initial;
    border-color: initial;
    border-image: initial;
    border-style: solid;
    background-color: canvas;
    color: canvastext;
    overflow: auto;
    margin: auto;
  }

  :where([popover]:not(.\\:popover-open)) {
    display: none;
  }

  :where(dialog[popover].\\:popover-open) {
    display: block;
  }

  :where(dialog[popover][open]) {
    display: revert;
  }

  :where([anchor].\\:popover-open) {
    inset: auto;
  }

  :where([anchor]:popover-open) {
    inset: auto;
  }

  @supports not (background-color: canvas) {
    :where([popover]) {
      background-color: white;
      color: black;
    }
  }

  @supports (width: -moz-fit-content) {
    :where([popover]) {
      width: -moz-fit-content;
      height: -moz-fit-content;
    }
  }

  @supports not (inset: 0) {
    :where([popover]) {
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
    }
  }
${i?"}":""}
`}var Ut=null;function vi(i){let t=xa();if(Ut===null)try{Ut=new CSSStyleSheet,Ut.replaceSync(t)}catch{Ut=!1}if(Ut===!1){let e=document.createElement("style");e.textContent=t,i instanceof Document?i.head.prepend(e):i.prepend(e)}else i.adoptedStyleSheets=[Ut,...i.adoptedStyleSheets]}function Ks(){if(typeof window>"u")return;window.ToggleEvent=window.ToggleEvent||Fe;function i(l){return l?.includes(":popover-open")&&(l=l.replace(ya,"$1.\\:popover-open")),l}Mt(Document.prototype,"querySelector",i),Mt(Document.prototype,"querySelectorAll",i),Mt(Element.prototype,"querySelector",i),Mt(Element.prototype,"querySelectorAll",i),Mt(Element.prototype,"matches",i),Mt(Element.prototype,"closest",i),Mt(DocumentFragment.prototype,"querySelectorAll",i),Object.defineProperties(HTMLElement.prototype,{popover:{enumerable:!0,configurable:!0,get(){if(!this.hasAttribute("popover"))return null;let l=(this.getAttribute("popover")||"").toLowerCase();return l===""||l=="auto"?"auto":"manual"},set(l){l===null?this.removeAttribute("popover"):this.setAttribute("popover",l)}},showPopover:{enumerable:!0,configurable:!0,value(){yi(this)}},hidePopover:{enumerable:!0,configurable:!0,value(){te(this,!0,!0)}},togglePopover:{enumerable:!0,configurable:!0,value(l){ee.get(this)==="showing"&&l===void 0||l===!1?te(this,!0,!0):(l===void 0||l===!0)&&yi(this)}}});let t=Element.prototype.attachShadow;t&&Object.defineProperties(Element.prototype,{attachShadow:{enumerable:!0,configurable:!0,writable:!0,value(l){let u=t.call(this,l);return vi(u),u}}});let e=HTMLElement.prototype.attachInternals;e&&Object.defineProperties(HTMLElement.prototype,{attachInternals:{enumerable:!0,configurable:!0,writable:!0,value(){let l=e.call(this);return l.shadowRoot&&vi(l.shadowRoot),l}}});let s=new WeakMap;function r(l){Object.defineProperties(l.prototype,{popoverTargetElement:{enumerable:!0,configurable:!0,set(u){if(u===null)this.removeAttribute("popovertarget"),s.delete(this);else if(u instanceof Element)this.setAttribute("popovertarget",""),s.set(this,u);else throw new TypeError("popoverTargetElement must be an element or null")},get(){if(this.localName!=="button"&&this.localName!=="input"||this.localName==="input"&&this.type!=="reset"&&this.type!=="image"&&this.type!=="button"||this.disabled||this.form&&this.type==="submit")return null;let u=s.get(this);if(u&&u.isConnected)return u;if(u&&!u.isConnected)return s.delete(this),null;let d=qt(this),b=this.getAttribute("popovertarget");return(d instanceof Document||d instanceof Ys)&&b&&d.getElementById(b)||null}},popoverTargetAction:{enumerable:!0,configurable:!0,get(){let u=(this.getAttribute("popovertargetaction")||"").toLowerCase();return u==="show"||u==="hide"?u:"toggle"},set(u){this.setAttribute("popovertargetaction",u)}}})}r(HTMLButtonElement),r(HTMLInputElement);let a=l=>{let u=l.composedPath(),d=u[0];if(!(d instanceof Element)||d?.shadowRoot)return;let b=qt(d);if(!(b instanceof Ys||b instanceof Document))return;let g=u.find(v=>v.matches?.("[popovertargetaction],[popovertarget]"));if(g){da(g),l.preventDefault();return}},n=l=>{let u=l.key,d=l.target;!l.defaultPrevented&&d&&(u==="Escape"||u==="Esc")&&Re(d.ownerDocument,!0,!0)};(l=>{l.addEventListener("click",a),l.addEventListener("keydown",n),l.addEventListener("pointerdown",Hs),l.addEventListener("pointerup",Hs)})(document),vi(document)}function O(i){let t=i({css:(s,...r)=>`@layer base { ${s.raw[0]+r.join("")} }`});if(document.adoptedStyleSheets===void 0){let s=document.createElement("style");s.textContent=t,document.head.appendChild(s);return}let e=new CSSStyleSheet;e.replaceSync(t),document.adoptedStyleSheets=[...document.adoptedStyleSheets,e]}function Ue(i,t){let e=i;for(;e;){if(t(e))return e;e=e.parentElement}}function W(i,t){let e=document.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,t?{acceptNode:s=>{let r,a;return t(s,{skip:()=>r=!0,reject:()=>a=!0}),r?NodeFilter.FILTER_SKIP:a?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT}}:{});return new xi(e)}var xi=class{constructor(t){this.walker=t}from(t){return this.walker.currentNode=t,this}first(){return this.walker.firstChild()}last(){return this.walker.lastChild()}next(t){return this.walker.currentNode=t,this.walker.nextSibling()}nextOrFirst(t){let e=this.next(t);return e||(this.walker.currentNode=this.walker.root,this.first())}prev(t){return this.walker.currentNode=t,this.walker.previousSibling()}prevOrLast(t){let e=this.prev(t);return e||(this.walker.currentNode=this.walker.root,this.last())}closest(t,e){let s=this.from(t).walker;for(;s.currentNode;){if(e(s.currentNode))return s.currentNode;s.parentNode()}}contains(t){return this.find(e=>e===t)}find(t){return this.walk((e,s)=>{t(e)&&s(e)})}findOrFirst(t){return this.find(t)||(this.walker.currentNode=this.walker.root),this.first()}each(t){this.walk(e=>t(e))}some(t){return!!this.find(t)}every(t){let e=!0;return this.walk(s=>{t(s)||(e=!1)}),e}map(t){let e=[];return this.walk(s=>e.push(t(s))),e}filter(t){let e=[];return this.walk(s=>t(s)&&e.push(s)),e}walk(t){let e,s=this.walker,r;for(;s.nextNode()&&(e=s.currentNode,t(e,a=>r=a),r===void 0););return r}};function C(i,t){customElements.define(`ui-${i}`,t)}function x(i,t,e,s={}){return i.addEventListener(t,e,s),{off:()=>i.removeEventListener(t,e),pause:r=>{i.removeEventListener(t,e),r(),i.addEventListener(t,e)}}}function Zs(i){return["a[href]","area[href]","input:not([disabled])","select:not([disabled])","textarea:not([disabled])","button:not([disabled])","iframe","object","embed","[tabindex]","[contenteditable]"].some(e=>i.matches(e))&&i.tabIndex>=0}function Ai(i,t){let e;return function(){let s=this,r=arguments;e||(i.apply(s,r),e=!0,setTimeout(()=>e=!1,t))}}var qe="pointer";document.addEventListener("keydown",()=>qe="keyboard",{capture:!0});document.addEventListener("pointerdown",i=>{qe=i.pointerType==="mouse"?"mouse":"touch"},{capture:!0});function ie(){return qe==="keyboard"}function Aa(){return qe==="touch"}function We(i,t){let e="",s=Ma(()=>{e=""},300);i.addEventListener("keydown",r=>{r.key.length===1&&/[a-zA-Z]/.test(r.key)&&(e+=r.key,t(e),r.stopPropagation()),s()})}function Sa(i,t){return"lofi-"+(t?t+"-":"")+Math.random().toString(16).slice(2)}function U(i,t){let e=i.hasAttribute("id")?i.getAttribute("id"):Sa(i,t);return h(i,"id",e),i._x_bindings||(i._x_bindings={}),i._x_bindings.id||(i._x_bindings.id=e),e}function N(){let i=!1;return t=>(...e)=>{i||(i=!0,t(...e),i=!1)}}function Bt(i,t,{gain:e,lose:s,focusable:r,useSafeArea:a}){let n=!1,o=_=>{ie()&&(i.contains(_.target)||t.contains(_.target)?(n=!0,e()):(n=!1,s()))};r&&document.addEventListener("focusin",o);let l=()=>{document.removeEventListener("focusin",o)},u=()=>{},d=()=>{},b=()=>{n=!1,s(),u(),d()},g=()=>{n=!1,u(),d()},v=_=>{Aa()||n||(n=!0,e(),setTimeout(()=>{let{safeArea:y,redraw:f,remove:w}=a?_a(i,t,_.clientX,_.clientY):Ta();u=w;let A,k=Ai(E=>{let T=t.getBoundingClientRect(),I=i.getBoundingClientRect(),H;switch(y.contains(E.target)&&ka(I,T,E.clientX,E.clientY)?H="safeArea":t.contains(E.target)?H="panel":i.contains(E.target)?H="trigger":H="outside",A&&clearTimeout(A),H){case"outside":b();break;case"trigger":f(E.clientX,E.clientY);break;case"panel":u();break;case"safeArea":f(E.clientX,E.clientY),A=setTimeout(()=>{b()},300);break;default:break}},100);document.addEventListener("pointermove",k),d=()=>document.removeEventListener("pointermove",k)}))};i.addEventListener("pointerenter",v);let p=()=>{i.removeEventListener("pointerenter",v)};return{clear:g,remove:()=>{g(),p(),l()}}}function _a(i,t,e,s){let r=document.createElement("div"),a=t.getBoundingClientRect(),n=i.getBoundingClientRect();r.style.position="fixed",h(r,"data-safe-area","");let o=(l,u)=>{if(a.top===0&&a.bottom===0)return;let d;a.left<n.left&&(d="left"),a.right>n.right&&(d="right"),a.top<n.top&&a.bottom<u&&(d="up"),a.bottom>n.bottom&&a.top>u&&(d="down"),d===void 0&&(d="right");let b,g,v,p,c,_,y,f,w=10;switch(d){case"left":b=a.right,g=Math.max(a.right,l)+5,v=g-b,p=Math.min(n.top,a.top)-w,c=Math.max(n.bottom,a.bottom)+w,_=c-p,y=u-p,f=`polygon(0% 0%, 100% ${y}px, 0% 100%)`;break;case"right":b=Math.min(a.left,l)-5,g=a.left,v=g-b,p=Math.min(n.top,a.top)-w,c=Math.max(n.bottom,a.bottom)+w,_=c-p,y=u-p,f=`polygon(0% ${y}px, 100% 0%, 100% 100%)`;break;case"up":b=Math.min(l,a.left)-w,g=Math.max(l,a.right)+w,v=g-b,p=a.bottom,c=Math.max(a.bottom,u)+5,_=c-p,y=l-b,f=`polygon(0% 0%, 100% 0%, ${y}px 100%)`;break;case"down":b=Math.min(l,a.left)-w,g=Math.max(l,a.right)+w,v=g-b,p=Math.min(a.top,u)-5,c=a.top,_=c-p,y=l-b,f=`polygon(${y}px 0%, 100% 100%, 0% 100%)`;break}r.style.left=`${b}px`,r.style.top=`${p}px`,r.style.width=`${v}px`,r.style.height=`${_}px`,r.style.clipPath=f};return{safeArea:r,redraw:(l,u)=>{r.isConnected||i.appendChild(r),o(l,u)},remove:()=>{r.remove()}}}function ka(i,t,e,s){return!Ea(i,e,s)&&!Ca(t,e,s)}function Ea(i,t,e){return i.left<=t&&t<=i.right&&i.top<=e&&e<=i.bottom}function Ca(i,t,e){return i.left<=t&&t<=i.right&&i.top<=e&&e<=i.bottom}function h(i,t,e){i._durableAttributeObserver===void 0&&(i._durableAttributeObserver=Qs(i,[t])),i._durableAttributeObserver.hasAttribute(t)||i._durableAttributeObserver.addAttribute(t),i._durableAttributeObserver.pause(()=>{i.setAttribute(t,e)})}function se(i,t){S(i,t),Da(i,t)}function S(i,t){i._durableAttributeObserver===void 0&&(i._durableAttributeObserver=Qs(i,[t])),i._durableAttributeObserver.hasAttribute(t)||i._durableAttributeObserver.addAttribute(t),i._durableAttributeObserver.pause(()=>{i.removeAttribute(t)})}function Da(i,t){i?._durableAttributeObserver?.hasAttribute(t)&&i._durableAttributeObserver.releaseAttribute(t)}function Qs(i,t){let e=r=>{r.forEach(a=>{a.oldValue===null?i._durableAttributeObserver.pause(()=>S(i,a.attributeName)):i._durableAttributeObserver.pause(()=>h(i,a.attributeName,a.oldValue))})},s=new MutationObserver(r=>e(r));return s.observe(i,{attributeFilter:t,attributeOldValue:!0}),{attributes:t,hasAttribute(r){return this.attributes.includes(r)},addAttribute(r){this.attributes.includes(r)||this.attributes.push(r),s.observe(i,{attributeFilter:this.attributes,attributeOldValue:!0})},releaseAttribute(r){this.hasAttribute(r)&&s.observe(i,{attributeFilter:this.attributes,attributeOldValue:!0})},pause(r){e(s.takeRecords()),s.disconnect(),r(),s.observe(i,{attributeFilter:this.attributes,attributeOldValue:!0})}}}function Ta(){return{safeArea:{contains:()=>!1},redraw:()=>{},remove:()=>{}}}function Ma(i,t){let e;return(...s)=>{clearTimeout(e),e=setTimeout(()=>{i(...s)},t)}}var Wt=0,Vt=!1;O(({css:i})=>i`[data-flux-allow-scroll] { pointer-events: auto; }`);function ct(i=null,t=!1,e=[]){if(t)return{lock:()=>{},unlock:()=>{}};let s=(a=!1)=>{Js(document.documentElement),Oa(document.documentElement,{paddingRight:`calc(${window.innerWidth-document.documentElement.clientWidth}px + ${window.getComputedStyle(document.documentElement).paddingRight})`,overflow:"hidden",...a?{pointerEvents:"none"}:{}}),a&&(h(i,"data-flux-allow-scroll",""),e.forEach(n=>{h(n,"data-flux-allow-scroll","")}),Vt=!0)},r=(a=!1)=>{Js(document.documentElement),a&&(se(i,"data-flux-allow-scroll"),e.forEach(n=>{S(n,"data-flux-allow-scroll")}),Vt=!1)};return{lock(){Wt++,!(Wt>1&&i!==null&&Vt)&&s(i!==null&&!Vt)},unlock(){Wt=Math.max(0,Wt-1),!(Wt>0&&i!==null&&!Vt)&&(r(i!==null&&Vt),Wt>0&&s(!1))}}}function Oa(i,t){let e=JSON.parse(i.getAttribute("data-flux-scroll-unlock")||"{}");Object.entries(t).forEach(([s,r])=>{e[s]===void 0&&(e[s]=i.style[s],i.style[s]=r)}),i.setAttribute("data-flux-scroll-unlock",JSON.stringify(e))}function Js(i){let t=JSON.parse(i.getAttribute("data-flux-scroll-unlock")||"{}");Object.entries(t).forEach(([e,s])=>{i.style[e]=s}),i.removeAttribute("data-flux-scroll-unlock")}function Ht(i,t,e){let s=(n,o)=>l=>{l.key===n&&!t()&&(o(),l.preventDefault(),l.stopPropagation())};h(i,"role","button");let r=()=>{i.hasAttribute("disabled")?(h(i,"aria-disabled","true"),h(i,"tabindex","-1")):(S(i,"aria-disabled"),h(i,"tabindex","0"))};new MutationObserver(()=>r()).observe(i,{attributes:!0,attributeFilter:["disabled"]}),r(),x(i,"click",()=>e()),x(i,"keydown",s("Enter",()=>e())),x(i,"keydown",s(" ",()=>{})),x(i,"keyup",s(" ",()=>e()))}function tr(i,t,e=null){let s=()=>{let n=i.getAttribute(t),o={sm:640,md:768,lg:1024,xl:1280,"2xl":1536};for(let[l,u]of Object.entries(o).reverse()){let d=i.getAttribute(`${l}:${t}`);if(d&&window.innerWidth>=u)return d}return n||e},r=s(),a=[];return new ResizeObserver(()=>{let n=s(),o=JSON.stringify(r);JSON.stringify(n)!==o&&(r=n,a.forEach(l=>l(n)))}).observe(window.document.documentElement),[r,n=>a.push(n)]}function ht(){return navigator?.language||document.documentElement.lang||"en-US"}function Ve(i,t={slots:{},attrs:{}}){let{slots:e={},attrs:s={}}=t,r=i.content.cloneNode(!0).firstElementChild;return Object.entries(e).forEach(([a,n])=>{(a==="default"?r.querySelectorAll("slot:not([name])"):r.querySelectorAll(`slot[name="${a}"]`)).forEach(l=>l.replaceWith(typeof n=="string"?document.createTextNode(n):n))}),r.querySelectorAll("slot").forEach(a=>a.remove()),Object.entries(s).forEach(([a,n])=>{r.setAttribute(a,n)}),r.setAttribute("data-appended",""),r}function re(){return document.documentElement.dir==="rtl"}function er(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)&&!navigator.userAgent.includes("CriOS")&&!navigator.userAgent.includes("FxiOS")}function ir(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream}var D=class extends HTMLElement{wasDisconnected=!1;constructor(){super(),this.boot?.()}connectedCallback(){if(this.wasDisconnected){this.wasDisconnected=!1;return}queueMicrotask(()=>{this.mount?.()})}disconnectedCallback(){this.wasDisconnected=!0,queueMicrotask(()=>{this.wasDisconnected&&this.unmount?.(),this.wasDisconnected=!1})}mixin(t,e={}){return new t(this,e)}appendMixin(t,e={}){return new t(this,e)}use(t){let e;return this.mixins.forEach(s=>{s instanceof t&&(e=s)}),e}uses(t){let e;return this.mixins.forEach(s=>{s instanceof t&&(e=!0)}),!!e}on(t,e){return x(this,t,e)}root(t,e={}){if(t===void 0)return this.__root;let s=document.createElement(t);for(let a in e)setAttribute(s,a,e[a]);let r=this.attachShadow({mode:"open"});return s.appendChild(document.createElement("slot")),r.appendChild(s),this.__root=s,this.__root}},V=class extends D{};var R=class{constructor(t,e={}){this.el=t,this.grouped=e.grouped===void 0,this.el.mixins=this.el.mixins?this.el.mixins:new Map,this.el.mixins.set(this.constructor.name,this),this.el[this.constructor.name]=!0,this.el.use||(this.el.use=D.prototype.use.bind(this.el)),this.opts=e,this.boot?.({options:s=>{let r=s;Object.entries(this.opts).forEach(([a,n])=>{n!==void 0&&(r[a]=n)}),this.opts=r}}),queueMicrotask(()=>{this.mount?.()})}options(){return this.opts}hasGroup(){return!!this.group()}group(){if(this.grouped!==!1)return Ue(this.el,t=>t[this.groupedByType.name])?.use(this.groupedByType)}on(t,e){return x(this.el,t,e)}},mt=class extends R{constructor(t,e={}){super(t,e)}walker(){return W(this.el,(t,{skip:e,reject:s})=>{if(t[this.constructor.name]&&t!==this.el)return s();if(!t[this.groupOfType.name]||!t.mixins.get(this.groupOfType.name).grouped)return e()})}};var F=class extends R{boot({options:t}){t({bubbles:!1}),this.initialState=this.el.value,this.getterFunc=()=>{},this.setterFunc=e=>this.initialState=e,Object.defineProperty(this.el,"value",{get:()=>this.getterFunc(),set:e=>{this.setterFunc(e)}})}initial(t){t(this.initialState)}getter(t){this.getterFunc=t}setter(t){this.setterFunc=t}dispatch(){this.el.dispatchEvent(new Event("input",{bubbles:this.options().bubbles,cancelable:!0})),this.el.dispatchEvent(new Event("change",{bubbles:this.options().bubbles,cancelable:!0}))}};var ae=null;document.addEventListener("mousedown",i=>ae=i);var Yt=class extends R{boot({options:t}){t({clickOutside:!0,triggers:[]}),this.onChanges=[],this.state=!1,this.stopDialogFromFocusingTheFirstElement();let e=this.options().triggers;new MutationObserver(r=>{r.forEach(a=>{a.attributeName==="open"&&(this.el.hasAttribute("open")?this.state=!0:this.state=!1)}),this.onChanges.forEach(a=>a())}).observe(this.el,{attributeFilter:["open"]}),this.options().clickOutside&&this.el.addEventListener("click",r=>{if(r.target!==this.el){ae=null;return}ae&&sr(this.el,ae)&&sr(this.el,r)&&(this.cancel(),r.preventDefault(),r.stopPropagation()),ae=null}),this.el.hasAttribute("open")&&(this.state=!0,this.hide(),this.show())}onChange(t){this.onChanges.push(t)}show(){this.el.isConnected&&this.el.showModal()}hide(){this.el.close()}toggle(){this.state?this.hide():this.show()}cancel(){let t=new Event("cancel",{bubbles:!1,cancelable:!0});this.el.dispatchEvent(t),t.defaultPrevented||this.hide()}getState(){return this.state}setState(t){t?this.show():this.hide()}stopDialogFromFocusingTheFirstElement(){let t=document.createElement("div");t.setAttribute("data-flux-focus-placeholder",""),t.setAttribute("data-appended",""),t.setAttribute("tabindex","0"),this.el.prepend(t),this.onChange(()=>{h(t,"style",this.state?"display: none":"display: block"),this.state&&er()&&!this.el.hasAttribute("autofocus")&&this.el.querySelectorAll("[autofocus]").length===0&&setTimeout(()=>{this.el.setAttribute("tabindex","-1"),this.el.focus(),this.el.blur()})})}};function sr(i,t){let e=i.getBoundingClientRect(),s=t.clientX,r=t.clientY;return!(s>=e.left&&s<=e.right&&r>=e.top&&r<=e.bottom)}var Si=class extends D{boot(){this.querySelectorAll("[data-appended]").forEach(o=>o.remove()),this._controllable=new F(this,{disabled:this.hasAttribute("disabled")});let t=this.button(),e=this.dialog();if(!e)return;e._dialogable=new Yt(e,{clickOutside:!this.hasAttribute("disable-click-outside")}),this._controllable.initial(o=>o&&e._dialogable.show()),this._controllable.getter(()=>e._dialogable.getState());let s=N();this._controllable.setter(s(o=>{e._dialogable.setState(o)})),e._dialogable.onChange(s(()=>{this._controllable.dispatch()}));let r=()=>{e._dialogable.getState()?(h(this,"data-open",""),t?.setAttribute("data-open",""),h(e,"data-open","")):(S(this,"data-open"),t?.removeAttribute("data-open"),S(e,"data-open"))};e._dialogable.onChange(()=>r()),r();let{lock:a,unlock:n}=ct();e._dialogable.onChange(()=>{e._dialogable.getState()?a():n()}),t&&x(t,"click",o=>{e._dialogable.show()})}unmount(){let{unlock:t}=ct();this.dialog()._dialogable.getState()&&t()}button(){let t=this.querySelector("button");if(!this.dialog()?.contains(t))return t}dialog(){return this.querySelector("dialog")}showModal(){let t=this.dialog();t&&t.showModal()}},_i=class extends D{mount(){let t=this.querySelector("button");x(t,"click",()=>{Ue(this,s=>!!s._dialogable)?._dialogable?.hide()})}};O(({css:i})=>i`dialog, ::backdrop { margin: auto; }`);C("modal",Si);C("close",_i);var Be=class extends R{boot({options:t}){this.onChanges=[],this.state=!1}onChange(t){this.onChanges.push(t)}getState(){return this.state}setState(t){let e=this.state;this.state=!!t,this.state!==e&&this.onChanges.forEach(s=>s())}};var ki=class extends D{boot(){let t=this.button(),e=this.details();if(t){if(!e)return console.warn("ui-disclosure: no panel element found",this)}else return console.warn("ui-disclosure: no trigger element found",this);this._disabled=this.hasAttribute("disabled"),this._controllable=new F(this,{disabled:this._disabled}),e._disclosable=new Be(e),this._controllable.initial(a=>a&&e._disclosable.setState(!0)),this._controllable.getter(()=>e._disclosable.getState()),this._controllable.setter(a=>e._disclosable.setState(a)),e._disclosable.onChange(()=>{this.dispatchEvent(new CustomEvent("lofi-disclosable-change",{bubbles:!0})),this._controllable.dispatch()});let s=()=>{e._disclosable.getState()?(h(this,"data-open",""),h(t,"data-open",""),h(e,"data-open","")):(S(this,"data-open"),S(t,"data-open"),S(e,"data-open"))};e._disclosable.onChange(()=>s()),s(),this._disabled||x(t,"click",a=>{e._disclosable.setState(!e._disclosable.getState())});let r=U(e,"disclosure");h(t,"aria-controls",r),h(t,"aria-expanded","false"),e._disclosable.onChange(()=>{e._disclosable.getState()?h(t,"aria-expanded","true"):h(t,"aria-expanded","false")}),this.hasAttribute("open")&&e._disclosable.setState(!0)}button(){return this.querySelector("button")}details(){return this.lastElementChild}},Ei=class i extends D{boot(){this.exclusive=this.hasAttribute("exclusive"),this.exclusive&&x(this,"lofi-disclosable-change",t=>{t.stopPropagation(),t.target.localName==="ui-disclosure"&&t.target.value&&this.disclosureWalker().each(e=>{e!==t.target&&(e.value=!1)})})}disclosureWalker(){return W(this,(t,{skip:e,reject:s})=>{if(t instanceof i&&t!==this||t.localName!=="ui-disclosure")return s()})}};O(({css:i})=>i`ui-disclosure { display: block; }`);C("disclosure",ki);C("disclosure-group",Ei);var Ci=class extends D{boot(){}},Di=class extends D{boot(){let t=this.hasAttribute("resize")?this.getAttribute("resize"):"both",e=this.hasAttribute("shrink"),s=this.closest("ui-resizable"),r,a,n=!1;if(!s)throw"Resizable container not found";this.addEventListener("pointerdown",o=>{n||(r=s.offsetWidth,a=s.offsetHeight,n=!0);let l=o.clientX,u=o.clientY,d=parseInt(getComputedStyle(s).width,10),b=parseInt(getComputedStyle(s).height,10),g=v=>{let p=d+(v.clientX-l),c=b+(v.clientY-u);(t==="width"||t==="both")&&(e?s.style.width=`${Math.min(p,r)}px`:s.style.width=`${p}px`),(t==="height"||t==="both")&&(e?s.style.height=`${Math.min(c,a)}px`:s.style.height=`${c}px`)};document.addEventListener("pointermove",g),document.addEventListener("pointerup",()=>{this.releasePointerCapture(o.pointerId),document.removeEventListener("pointermove",g)},{once:!0}),this.setPointerCapture(o.pointerId)})}};O(({css:i})=>i`ui-resizable { display: block; }`);C("resizable",Ci);C("grip",Di);var z=class extends mt{groupOfType=L;boot({options:t}){t({multiple:!1}),this.state=this.options().multiple?new Set:null,this.onChanges=[]}onInitAndChange(t){t(),this.onChanges.push(t)}onChange(t){this.onChanges.push(t)}changed(t,e=!1){if(t.ungrouped)return;let s=t.value,r=t.isSelected(),a=this.options().multiple;r?a?this.state.add(s):this.state=s:a?this.state.delete(s):this.state=null,e||this.onChanges.forEach(n=>n())}getState(){return this.options().multiple?Array.from(this.state):this.state}hasValue(t){return this.options().multiple?this.state.has(t):this.state===t}setState(t){(t===null||t==="")&&(t=this.options().multiple?[]:""),this.options().multiple?(Array.isArray(t)||(t=[t]),t=t.map(s=>s+"")):t=t+"",this.state=this.options().multiple?new Set(t):t;let e=this.options().multiple?t:[t];this.walker().each(s=>{let r=s.use(L);if(r.ungrouped)return;let a=e.includes(r.value);a&&!r.isSelected()?r.surgicallySelect():!a&&r.isSelected()&&r.surgicallyDeselect()}),this.onChanges.forEach(s=>s())}selected(){return this.walker().find(t=>t.use(L).isSelected()).use(L)}selecteds(){return this.walker().filter(t=>t.use(L).isSelected()).map(t=>t.use(L))}selectFirst(){this.walker().first()?.use(L).select()}selectAll(){this.walker().filter(t=>!t.use(L).isSelected()).map(t=>t.use(L).select())}deselectAll(){this.walker().filter(t=>t.use(L).isSelected()).map(t=>t.use(L).deselect())}allAreSelected(){let t=this.walker().filter(e=>!0);return t.length>0&&this.walker().filter(e=>e.use(L).isSelected()).length===t.length}noneAreSelected(){return this.state===null||this.state?.size===0}selectableByValue(t){return this.walker().find(e=>e.use(L).value===t)?.use(L)}deselectOthers(t){this.walker().each(e=>{e!==t&&e.use(L).surgicallyDeselect()})}selectedTextValue(){return this.options().multiple?Array.from(this.state).map(t=>this.convertValueStringToElementText(t)).join(", "):this.convertValueStringToElementText(this.state)}convertValueStringToElementText(t){let e=this.findByValue(t);return e?e.label||e.value:t}findByValue(t){return this.selecteds().find(e=>e.value===t)}walker(){return W(this.el,(t,{skip:e,reject:s})=>{if(t[this.constructor.name]&&t!==this.el)return s();if(!t[this.groupOfType.name]||t.mixins.get(this.groupOfType.name).ungrouped)return e()})}},L=class extends R{boot({options:t}){this.groupedByType=z,t({ungrouped:!1,togglable:!1,value:void 0,label:void 0,selectedInitially:!1,dataAttr:"data-selected",ariaAttr:"aria-selected"}),this.ungrouped=this.options().ungrouped,this.value=this.options().value===void 0?this.el.value:this.options().value,this.value=this.value+"",this.label=this.options().label;let e=this.options().selectedInitially;this.onSelects=[],this.onUnselects=[],this.onChanges=[];let s=()=>{this.group()&&this.group().hasValue(this.value)&&(e=!0),this.multiple=this.hasGroup()?this.group().options().multiple:!1,this.toggleable=this.options().toggleable||this.multiple,e?this.select(!0):(this.state=e,this.surgicallyDeselect(!0))};s(),!this.hasGroup()&&!this.el.isConnected&&queueMicrotask(()=>{this.hasGroup()&&s()})}mount(){this.el.hasAttribute(this.options().ariaAttr)||h(this.el,this.options().ariaAttr,"false")}onInitAndChange(t){t(),this.onChanges.push(t)}onChange(t){this.onChanges.push(t)}onSelect(t){this.onSelects.push(t)}onUnselect(t){this.onUnselects.push(t)}setState(t){t?this.select():this.deselect()}getState(){return this.state}press(){this.toggleable?this.toggle():this.select()}trigger(){this.toggleable?this.toggle():this.select()}toggle(){this.isSelected()?this.deselect():this.select()}isSelected(){return this.state}select(t=!1){let e=!this.isSelected();this.toggleable||this.group()?.deselectOthers(this.el),this.state=!0,h(this.el,this.options().ariaAttr,"true"),h(this.el,this.options().dataAttr,""),e&&(t||(this.onSelects.forEach(s=>s()),this.onChanges.forEach(s=>s())),this.group()?.changed(this,t))}surgicallySelect(){let t=!this.isSelected();this.state=!0,h(this.el,this.options().ariaAttr,"true"),h(this.el,this.options().dataAttr,""),t&&(this.onSelects.forEach(e=>e()),this.onChanges.forEach(e=>e()))}deselect(t=!0){let e=this.isSelected();this.state=!1,h(this.el,this.options().ariaAttr,"false"),S(this.el,this.options().dataAttr),e&&(this.onUnselects.forEach(s=>s()),this.onChanges.forEach(s=>s()),t&&this.group()?.changed(this))}surgicallyDeselect(t=!1){let e=this.isSelected();this.state=!1,h(this.el,this.options().ariaAttr,"false"),S(this.el,this.options().dataAttr),e&&!t&&(this.onUnselects.forEach(s=>s()),this.onChanges.forEach(s=>s()))}getValue(){return this.value}getLabel(){return this.label}};var P=class extends R{boot({options:t}){t({disableWithParent:!0}),this.onChanges=[],Object.defineProperty(this.el,"disabled",{get:()=>this.el.hasAttribute("disabled"),set:s=>{s?this.el.setAttribute("disabled",""):this.el.removeAttribute("disabled")}}),this.el.hasAttribute("disabled")?this.el.disabled=!0:this.options().disableWithParent&&this.el.closest("[disabled]")&&(this.el.disabled=!0),new MutationObserver(s=>{this.onChanges.forEach(r=>r(this.el.disabled))}).observe(this.el,{attributeFilter:["disabled"]})}onChange(t){this.onChanges.push(t)}onInitAndChange(t){t(this.el.disabled),this.onChanges.push(t)}enabled(t){return(...e)=>{if(!this.el.disabled)return t(...e)}}disabled(t){return(...e)=>{if(this.el.disabled)return t(...e)}}isDisabled(){return this.el.disabled}};var Q=class extends R{boot({options:t}){t({name:void 0,value:void 0,includeWhenEmpty:!0,shouldUpdateValue:!0}),this.name=this.options().name,this.value=this.options().value===void 0?this.el.value:this.options().value,this.state=!1,this.observer=new MutationObserver(()=>{this.renderHiddenInputs()}),this.observer.observe(this.el,{childList:!0})}mount(){this.renderHiddenInputs()}update(t){this.options().shouldUpdateValue?this.value=t:this.state=!!t,this.renderHiddenInputs()}valueIsEmpty(){return this.value===void 0||this.value===null||this.value===""}renderHiddenInputs(){if(this.observer.disconnect(),!this.name)return;let t=this.el.children,e=[];for(let r=0;r<t.length;r++){let a=t[r];a.hasAttribute("data-flux-hidden")&&e.push(a)}e.forEach(r=>r.remove());let s;this.options().shouldUpdateValue?s=!this.valueIsEmpty()||this.options().includeWhenEmpty?this.generateInputs(this.name,this.value):[]:s=this.state||this.options().includeWhenEmpty?this.generateInputs(this.name,this.value):[],s.forEach(r=>{this.el.append(r)}),this.observer.observe(this.el,{childList:!0})}generateInputs(t,e,s=[]){if(this.isObjectOrArray(e))for(let r in e)s=s.concat(this.generateInputs(`${t}[${r}]`,e[r]));else{let r=document.createElement("input");return r.setAttribute("type","hidden"),r.setAttribute("name",t),r.setAttribute("value",e===null?"":""+e),r.setAttribute("data-flux-hidden",""),r.setAttribute("data-appended",""),[r]}return s}isObjectOrArray(t){return typeof t=="object"&&t!==null}};var Ti=class i extends V{boot(){this._disableable=new P(this);let t=[];this._disableable.onInitAndChange(e=>{e?this.walker().each(s=>{s.hasAttribute("disabled")||(s.setAttribute("disabled",""),t.push(()=>s.removeAttribute("disabled")))}):(t.forEach(s=>s()),t=[])}),this._selectable=new z(this,{multiple:!0}),this._controllable=new F(this,{disabled:this._disabled,bubbles:!0}),this.walker().each(e=>{e.addEventListener("input",s=>s.stopPropagation()),e.addEventListener("change",s=>s.stopPropagation())}),this._submittable=new Q(this,{name:this.getAttribute("name"),value:this.getAttribute("value"),includeWhenEmpty:!1}),this._controllable.initial(e=>e&&this._selectable.setState(e)),this._controllable.getter(()=>this._selectable.getState()),this._detangled=N(),this._controllable.setter(this._detangled(e=>{this._selectable.setState(e)})),this._selectable.onChange(this._detangled(()=>{this._controllable.dispatch()})),this._selectable.onInitAndChange(()=>{this._submittable.update(this._selectable.getState())}),h(this,"role","group"),queueMicrotask(()=>{this._submittable.update(this._selectable.getState())})}initCheckAll(t){let e=N();t._selectable.onChange(e(()=>{t.indeterminate?(this._selectable.selectAll(),t.checked=!0,t.indeterminate=!1):t.checked?(this._selectable.selectAll(),t.checked=!0,t.indeterminate=!1):(this._selectable.deselectAll(),t.checked=!1,t.indeterminate=!1)}));let s=()=>{this._selectable.allAreSelected()?(t.indeterminate=!1,t._selectable.select()):this._selectable.noneAreSelected()?(t.indeterminate=!1,t._selectable.deselect()):t.indeterminate=!0};this._selectable.onChange(e(()=>{s()})),s()}walker(){return W(this,(t,{skip:e,reject:s})=>{if(t instanceof i)return s();if(t.localName!=="ui-checkbox")return e()})}},Mi=class extends V{boot(){let t=this;this.isIndeterminate=!1,this._disableable=new P(this),this.hasAttribute("all")?(this._selectable=new L(t,{ungrouped:!0,toggleable:!0,value:this.hasAttribute("value")?this.getAttribute("value"):Math.random().toString(36).substring(2,10),label:this.hasAttribute("label")?this.getAttribute("label"):null,selectedInitially:this.hasAttribute("checked"),dataAttr:"data-checked",ariaAttr:"aria-checked"}),queueMicrotask(()=>{this.closest("ui-checkbox-group")?.initCheckAll(this)})):(this._selectable=new L(t,{toggleable:!0,dataAttr:"data-checked",ariaAttr:"aria-checked",value:this.hasAttribute("value")?this.getAttribute("value"):Math.random().toString(36).substring(2,10),label:this.hasAttribute("label")?this.getAttribute("label"):null,selectedInitially:this.hasAttribute("checked")}),this._submittable=new Q(this,{name:this.getAttribute("name"),value:this.getAttribute("value")??"on",includeWhenEmpty:!1,shouldUpdateValue:!1}),this._selectable.onChange(()=>{this.indeterminate&&(this.indeterminate=!1)}),this._selectable.onInitAndChange(()=>{this._submittable.update(this._selectable.isSelected())}),this.value=this._selectable.getValue(),queueMicrotask(()=>{this._submittable.update(this._selectable.isSelected())})),this._detangled=N(),this._selectable.onChange(this._detangled(()=>{this.dispatchEvent(new Event("input",{bubbles:!0,cancelable:!0})),this.dispatchEvent(new Event("change",{bubbles:!0,cancelable:!0}))})),h(t,"role","checkbox"),this._disableable.onInitAndChange(e=>{e?S(t,"tabindex","0"):h(t,"tabindex","0")}),x(t,"click",this._disableable.disabled(e=>{e.preventDefault(),e.stopPropagation()}),{capture:!0}),x(t,"click",this._disableable.enabled(e=>{this._selectable.press()})),x(t,"keydown",this._disableable.enabled(e=>{e.key==="Enter"&&(this._selectable.press(),e.preventDefault(),e.stopPropagation())})),x(t,"keydown",this._disableable.enabled(e=>{e.key===" "&&(e.preventDefault(),e.stopPropagation())})),x(t,"keyup",this._disableable.enabled(e=>{e.key===" "&&(this._selectable.press(),e.preventDefault(),e.stopPropagation())})),La(t)}get checked(){return this._selectable.isSelected()}set checked(t){let e=this.closest("ui-checkbox-group")?._detangled||(s=>s);this._detangled(e(()=>{t?this._selectable.select():this._selectable.deselect()}))()}get indeterminate(){return this.isIndeterminate}set indeterminate(t){this.isIndeterminate=!!t,this.isIndeterminate?h(this,"data-indeterminate",""):S(this,"data-indeterminate")}};C("checkbox-group",Ti);C("checkbox",Mi);O(({css:i})=>i`ui-checkbox-group { display: block; }`);O(({css:i})=>i`ui-checkbox { display: inline-block; user-select: none; }`);function La(i){i.closest("label")?.addEventListener("click",t=>{i.contains(t.target)||i._selectable.press()})}var wt=new Map,st=class extends R{boot({options:t}){t({triggers:[],scope:null});let e=this.options().scope||"global";h(this.el,"popover","manual"),this.triggers=this.options().triggers,this.onChanges=[],this.state=!1,x(this.el,"beforetoggle",s=>{let r=this.state;if(this.state=s.newState==="open",this.state){Pa(this.el,e);let a=new AbortController,n=document.activeElement,o=[...this.triggers,n];setTimeout(()=>{Ia(this.el,o,a),Na(this.el,o,a),Fa(this.el,o,a)}),this.el.addEventListener("beforetoggle",l=>{l.newState==="closed"&&(a.abort(),n?.focus())},{signal:a.signal})}r!==this.state&&this.onChanges.forEach(a=>a(this.state,r))}),x(this.el,"toggle",s=>{if(s.newState==="open")wt.has(e)||wt.set(e,new Set),wt.get(e).add(this.el);else if(s.newState==="closed"){if(!wt.has(e))return;wt.get(e).delete(this.el),wt.get(e).size===0&&wt.delete(e)}})}onChange(t){this.onChanges.push(t)}setState(t){t?this.show():this.hide()}getState(){return this.state}toggle(){this.el.togglePopover()}show(){this.el.showPopover()}hide(){this.el.hidePopover()}};function Pa(i,t){wt.has(t)&&wt.get(t).forEach(e=>{i.contains(e)||e.contains(i)||e.hidePopover()})}function Ia(i,t,e){document.addEventListener("click",s=>{i.contains(s.target)||t.includes(s.target)||i.hidePopover()},{signal:e.signal})}function Na(i,t,e){document.addEventListener("focusin",s=>{i.contains(s.target)||t.includes(s.target)||(e.abort(),i.hidePopover())},{capture:!0,signal:e.signal})}function Fa(i,t,e){document.addEventListener("keydown",s=>{s.key==="Escape"&&i.hidePopover()},{signal:e.signal})}var kt=Math.min,tt=Math.max,oe=Math.round,le=Math.floor,dt=i=>({x:i,y:i}),Ra={left:"right",right:"left",bottom:"top",top:"bottom"},Ua={start:"end",end:"start"};function Oi(i,t,e){return tt(i,kt(t,e))}function $t(i,t){return typeof i=="function"?i(t):i}function xt(i){return i.split("-")[0]}function zt(i){return i.split("-")[1]}function Li(i){return i==="x"?"y":"x"}function Pi(i){return i==="y"?"height":"width"}function Et(i){return["top","bottom"].includes(xt(i))?"y":"x"}function Ii(i){return Li(Et(i))}function rr(i,t,e){e===void 0&&(e=!1);let s=zt(i),r=Ii(i),a=Pi(r),n=r==="x"?s===(e?"end":"start")?"right":"left":s==="start"?"bottom":"top";return t.reference[a]>t.floating[a]&&(n=ne(n)),[n,ne(n)]}function ar(i){let t=ne(i);return[He(i),t,He(t)]}function He(i){return i.replace(/start|end/g,t=>Ua[t])}function qa(i,t,e){let s=["left","right"],r=["right","left"],a=["top","bottom"],n=["bottom","top"];switch(i){case"top":case"bottom":return e?t?r:s:t?s:r;case"left":case"right":return t?a:n;default:return[]}}function nr(i,t,e,s){let r=zt(i),a=qa(xt(i),e==="start",s);return r&&(a=a.map(n=>n+"-"+r),t&&(a=a.concat(a.map(He)))),a}function ne(i){return i.replace(/left|right|bottom|top/g,t=>Ra[t])}function Wa(i){return{top:0,right:0,bottom:0,left:0,...i}}function or(i){return typeof i!="number"?Wa(i):{top:i,right:i,bottom:i,left:i}}function Lt(i){let{x:t,y:e,width:s,height:r}=i;return{width:s,height:r,top:e,left:t,right:t+s,bottom:e+r,x:t,y:e}}function lr(i,t,e){let{reference:s,floating:r}=i,a=Et(t),n=Ii(t),o=Pi(n),l=xt(t),u=a==="y",d=s.x+s.width/2-r.width/2,b=s.y+s.height/2-r.height/2,g=s[o]/2-r[o]/2,v;switch(l){case"top":v={x:d,y:s.y-r.height};break;case"bottom":v={x:d,y:s.y+s.height};break;case"right":v={x:s.x+s.width,y:b};break;case"left":v={x:s.x-r.width,y:b};break;default:v={x:s.x,y:s.y}}switch(zt(t)){case"start":v[n]-=g*(e&&u?-1:1);break;case"end":v[n]+=g*(e&&u?-1:1);break}return v}var ur=async(i,t,e)=>{let{placement:s="bottom",strategy:r="absolute",middleware:a=[],platform:n}=e,o=a.filter(Boolean),l=await(n.isRTL==null?void 0:n.isRTL(t)),u=await n.getElementRects({reference:i,floating:t,strategy:r}),{x:d,y:b}=lr(u,s,l),g=s,v={},p=0;for(let c=0;c<o.length;c++){let{name:_,fn:y}=o[c],{x:f,y:w,data:A,reset:k}=await y({x:d,y:b,initialPlacement:s,placement:g,strategy:r,middlewareData:v,rects:u,platform:n,elements:{reference:i,floating:t}});d=f??d,b=w??b,v={...v,[_]:{...v[_],...A}},k&&p<=50&&(p++,typeof k=="object"&&(k.placement&&(g=k.placement),k.rects&&(u=k.rects===!0?await n.getElementRects({reference:i,floating:t,strategy:r}):k.rects),{x:d,y:b}=lr(u,g,l)),c=-1)}return{x:d,y:b,placement:g,strategy:r,middlewareData:v}};async function Ye(i,t){var e;t===void 0&&(t={});let{x:s,y:r,platform:a,rects:n,elements:o,strategy:l}=i,{boundary:u="clippingAncestors",rootBoundary:d="viewport",elementContext:b="floating",altBoundary:g=!1,padding:v=0}=$t(t,i),p=or(v),_=o[g?b==="floating"?"reference":"floating":b],y=Lt(await a.getClippingRect({element:(e=await(a.isElement==null?void 0:a.isElement(_)))==null||e?_:_.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(o.floating)),boundary:u,rootBoundary:d,strategy:l})),f=b==="floating"?{x:s,y:r,width:n.floating.width,height:n.floating.height}:n.reference,w=await(a.getOffsetParent==null?void 0:a.getOffsetParent(o.floating)),A=await(a.isElement==null?void 0:a.isElement(w))?await(a.getScale==null?void 0:a.getScale(w))||{x:1,y:1}:{x:1,y:1},k=Lt(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:f,offsetParent:w,strategy:l}):f);return{top:(y.top-k.top+p.top)/A.y,bottom:(k.bottom-y.bottom+p.bottom)/A.y,left:(y.left-k.left+p.left)/A.x,right:(k.right-y.right+p.right)/A.x}}var cr=function(i){return i===void 0&&(i={}),{name:"flip",options:i,async fn(t){var e,s;let{placement:r,middlewareData:a,rects:n,initialPlacement:o,platform:l,elements:u}=t,{mainAxis:d=!0,crossAxis:b=!0,fallbackPlacements:g,fallbackStrategy:v="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:c=!0,..._}=$t(i,t);if((e=a.arrow)!=null&&e.alignmentOffset)return{};let y=xt(r),f=Et(o),w=xt(o)===o,A=await(l.isRTL==null?void 0:l.isRTL(u.floating)),k=g||(w||!c?[ne(o)]:ar(o)),E=p!=="none";!g&&E&&k.push(...nr(o,c,p,A));let T=[o,...k],I=await Ye(t,_),H=[],j=((s=a.flip)==null?void 0:s.overflows)||[];if(d&&H.push(I[y]),b){let J=rr(r,n,A);H.push(I[J[0]],I[J[1]])}if(j=[...j,{placement:r,overflows:H}],!H.every(J=>J<=0)){var nt,X;let J=(((nt=a.flip)==null?void 0:nt.index)||0)+1,ut=T[J];if(ut)return{data:{index:J,overflows:j},reset:{placement:ut}};let Y=(X=j.filter(gt=>gt.overflows[0]<=0).sort((gt,Z)=>gt.overflows[1]-Z.overflows[1])[0])==null?void 0:X.placement;if(!Y)switch(v){case"bestFit":{var K;let gt=(K=j.filter(Z=>{if(E){let it=Et(Z.placement);return it===f||it==="y"}return!0}).map(Z=>[Z.placement,Z.overflows.filter(it=>it>0).reduce((it,Jr)=>it+Jr,0)]).sort((Z,it)=>Z[1]-it[1])[0])==null?void 0:K[0];gt&&(Y=gt);break}case"initialPlacement":Y=o;break}if(r!==Y)return{reset:{placement:Y}}}return{}}}};async function Va(i,t){let{placement:e,platform:s,elements:r}=i,a=await(s.isRTL==null?void 0:s.isRTL(r.floating)),n=xt(e),o=zt(e),l=Et(e)==="y",u=["left","top"].includes(n)?-1:1,d=a&&l?-1:1,b=$t(t,i),{mainAxis:g,crossAxis:v,alignmentAxis:p}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:b.mainAxis||0,crossAxis:b.crossAxis||0,alignmentAxis:b.alignmentAxis};return o&&typeof p=="number"&&(v=o==="end"?p*-1:p),l?{x:v*d,y:g*u}:{x:g*u,y:v*d}}var hr=function(i){return i===void 0&&(i=0),{name:"offset",options:i,async fn(t){var e,s;let{x:r,y:a,placement:n,middlewareData:o}=t,l=await Va(t,i);return n===((e=o.offset)==null?void 0:e.placement)&&(s=o.arrow)!=null&&s.alignmentOffset?{}:{x:r+l.x,y:a+l.y,data:{...l,placement:n}}}}},dr=function(i){return i===void 0&&(i={}),{name:"shift",options:i,async fn(t){let{x:e,y:s,placement:r}=t,{mainAxis:a=!0,crossAxis:n=!1,limiter:o={fn:_=>{let{x:y,y:f}=_;return{x:y,y:f}}},...l}=$t(i,t),u={x:e,y:s},d=await Ye(t,l),b=Et(xt(r)),g=Li(b),v=u[g],p=u[b];if(a){let _=g==="y"?"top":"left",y=g==="y"?"bottom":"right",f=v+d[_],w=v-d[y];v=Oi(f,v,w)}if(n){let _=b==="y"?"top":"left",y=b==="y"?"bottom":"right",f=p+d[_],w=p-d[y];p=Oi(f,p,w)}let c=o.fn({...t,[g]:v,[b]:p});return{...c,data:{x:c.x-e,y:c.y-s,enabled:{[g]:a,[b]:n}}}}}};var fr=function(i){return i===void 0&&(i={}),{name:"size",options:i,async fn(t){var e,s;let{placement:r,rects:a,platform:n,elements:o}=t,{apply:l=()=>{},...u}=$t(i,t),d=await Ye(t,u),b=xt(r),g=zt(r),v=Et(r)==="y",{width:p,height:c}=a.floating,_,y;b==="top"||b==="bottom"?(_=b,y=g===(await(n.isRTL==null?void 0:n.isRTL(o.floating))?"start":"end")?"left":"right"):(y=b,_=g==="end"?"top":"bottom");let f=c-d.top-d.bottom,w=p-d.left-d.right,A=kt(c-d[_],f),k=kt(p-d[y],w),E=!t.middlewareData.shift,T=A,I=k;if((e=t.middlewareData.shift)!=null&&e.enabled.x&&(I=w),(s=t.middlewareData.shift)!=null&&s.enabled.y&&(T=f),E&&!g){let j=tt(d.left,0),nt=tt(d.right,0),X=tt(d.top,0),K=tt(d.bottom,0);v?I=p-2*(j!==0||nt!==0?j+nt:tt(d.left,d.right)):T=c-2*(X!==0||K!==0?X+K:tt(d.top,d.bottom))}await l({...t,availableWidth:I,availableHeight:T});let H=await n.getDimensions(o.floating);return p!==H.width||c!==H.height?{reset:{rects:!0}}:{}}}};function $e(){return typeof window<"u"}function Pt(i){return br(i)?(i.nodeName||"").toLowerCase():"#document"}function rt(i){var t;return(i==null||(t=i.ownerDocument)==null?void 0:t.defaultView)||window}function ft(i){var t;return(t=(br(i)?i.ownerDocument:i.document)||window.document)==null?void 0:t.documentElement}function br(i){return $e()?i instanceof Node||i instanceof rt(i).Node:!1}function ot(i){return $e()?i instanceof Element||i instanceof rt(i).Element:!1}function pt(i){return $e()?i instanceof HTMLElement||i instanceof rt(i).HTMLElement:!1}function pr(i){return!$e()||typeof ShadowRoot>"u"?!1:i instanceof ShadowRoot||i instanceof rt(i).ShadowRoot}function jt(i){let{overflow:t,overflowX:e,overflowY:s,display:r}=lt(i);return/auto|scroll|overlay|hidden|clip/.test(t+s+e)&&!["inline","contents"].includes(r)}function mr(i){return["table","td","th"].includes(Pt(i))}function ue(i){return[":popover-open",":modal"].some(t=>{try{return i.matches(t)}catch{return!1}})}function ze(i){let t=Ge(),e=ot(i)?lt(i):i;return["transform","translate","scale","rotate","perspective"].some(s=>e[s]?e[s]!=="none":!1)||(e.containerType?e.containerType!=="normal":!1)||!t&&(e.backdropFilter?e.backdropFilter!=="none":!1)||!t&&(e.filter?e.filter!=="none":!1)||["transform","translate","scale","rotate","perspective","filter"].some(s=>(e.willChange||"").includes(s))||["paint","layout","strict","content"].some(s=>(e.contain||"").includes(s))}function gr(i){let t=At(i);for(;pt(t)&&!It(t);){if(ze(t))return t;if(ue(t))return null;t=At(t)}return null}function Ge(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function It(i){return["html","body","#document"].includes(Pt(i))}function lt(i){return rt(i).getComputedStyle(i)}function ce(i){return ot(i)?{scrollLeft:i.scrollLeft,scrollTop:i.scrollTop}:{scrollLeft:i.scrollX,scrollTop:i.scrollY}}function At(i){if(Pt(i)==="html")return i;let t=i.assignedSlot||i.parentNode||pr(i)&&i.host||ft(i);return pr(t)?t.host:t}function vr(i){let t=At(i);return It(t)?i.ownerDocument?i.ownerDocument.body:i.body:pt(t)&&jt(t)?t:vr(t)}function Gt(i,t,e){var s;t===void 0&&(t=[]),e===void 0&&(e=!0);let r=vr(i),a=r===((s=i.ownerDocument)==null?void 0:s.body),n=rt(r);if(a){let o=je(n);return t.concat(n,n.visualViewport||[],jt(r)?r:[],o&&e?Gt(o):[])}return t.concat(r,Gt(r,[],e))}function je(i){return i.parent&&Object.getPrototypeOf(i.parent)?i.frameElement:null}function xr(i){let t=lt(i),e=parseFloat(t.width)||0,s=parseFloat(t.height)||0,r=pt(i),a=r?i.offsetWidth:e,n=r?i.offsetHeight:s,o=oe(e)!==a||oe(s)!==n;return o&&(e=a,s=n),{width:e,height:s,$:o}}function Fi(i){return ot(i)?i:i.contextElement}function Xt(i){let t=Fi(i);if(!pt(t))return dt(1);let e=t.getBoundingClientRect(),{width:s,height:r,$:a}=xr(t),n=(a?oe(e.width):e.width)/s,o=(a?oe(e.height):e.height)/r;return(!n||!Number.isFinite(n))&&(n=1),(!o||!Number.isFinite(o))&&(o=1),{x:n,y:o}}var Ba=dt(0);function Ar(i){let t=rt(i);return!Ge()||!t.visualViewport?Ba:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Ha(i,t,e){return t===void 0&&(t=!1),!e||t&&e!==rt(i)?!1:t}function Nt(i,t,e,s){t===void 0&&(t=!1),e===void 0&&(e=!1);let r=i.getBoundingClientRect(),a=Fi(i),n=dt(1);t&&(s?ot(s)&&(n=Xt(s)):n=Xt(i));let o=Ha(a,e,s)?Ar(a):dt(0),l=(r.left+o.x)/n.x,u=(r.top+o.y)/n.y,d=r.width/n.x,b=r.height/n.y;if(a){let g=rt(a),v=s&&ot(s)?rt(s):s,p=g,c=je(p);for(;c&&s&&v!==p;){let _=Xt(c),y=c.getBoundingClientRect(),f=lt(c),w=y.left+(c.clientLeft+parseFloat(f.paddingLeft))*_.x,A=y.top+(c.clientTop+parseFloat(f.paddingTop))*_.y;l*=_.x,u*=_.y,d*=_.x,b*=_.y,l+=w,u+=A,p=rt(c),c=je(p)}}return Lt({width:d,height:b,x:l,y:u})}function Ri(i,t){let e=ce(i).scrollLeft;return t?t.left+e:Nt(ft(i)).left+e}function Sr(i,t,e){e===void 0&&(e=!1);let s=i.getBoundingClientRect(),r=s.left+t.scrollLeft-(e?0:Ri(i,s)),a=s.top+t.scrollTop;return{x:r,y:a}}function Ya(i){let{elements:t,rect:e,offsetParent:s,strategy:r}=i,a=r==="fixed",n=ft(s),o=t?ue(t.floating):!1;if(s===n||o&&a)return e;let l={scrollLeft:0,scrollTop:0},u=dt(1),d=dt(0),b=pt(s);if((b||!b&&!a)&&((Pt(s)!=="body"||jt(n))&&(l=ce(s)),pt(s))){let v=Nt(s);u=Xt(s),d.x=v.x+s.clientLeft,d.y=v.y+s.clientTop}let g=n&&!b&&!a?Sr(n,l,!0):dt(0);return{width:e.width*u.x,height:e.height*u.y,x:e.x*u.x-l.scrollLeft*u.x+d.x+g.x,y:e.y*u.y-l.scrollTop*u.y+d.y+g.y}}function $a(i){return Array.from(i.getClientRects())}function za(i){let t=ft(i),e=ce(i),s=i.ownerDocument.body,r=tt(t.scrollWidth,t.clientWidth,s.scrollWidth,s.clientWidth),a=tt(t.scrollHeight,t.clientHeight,s.scrollHeight,s.clientHeight),n=-e.scrollLeft+Ri(i),o=-e.scrollTop;return lt(s).direction==="rtl"&&(n+=tt(t.clientWidth,s.clientWidth)-r),{width:r,height:a,x:n,y:o}}function Ga(i,t){let e=rt(i),s=ft(i),r=e.visualViewport,a=s.clientWidth,n=s.clientHeight,o=0,l=0;if(r){a=r.width,n=r.height;let u=Ge();(!u||u&&t==="fixed")&&(o=r.offsetLeft,l=r.offsetTop)}return{width:a,height:n,x:o,y:l}}function ja(i,t){let e=Nt(i,!0,t==="fixed"),s=e.top+i.clientTop,r=e.left+i.clientLeft,a=pt(i)?Xt(i):dt(1),n=i.clientWidth*a.x,o=i.clientHeight*a.y,l=r*a.x,u=s*a.y;return{width:n,height:o,x:l,y:u}}function yr(i,t,e){let s;if(t==="viewport")s=Ga(i,e);else if(t==="document")s=za(ft(i));else if(ot(t))s=ja(t,e);else{let r=Ar(i);s={x:t.x-r.x,y:t.y-r.y,width:t.width,height:t.height}}return Lt(s)}function _r(i,t){let e=At(i);return e===t||!ot(e)||It(e)?!1:lt(e).position==="fixed"||_r(e,t)}function Xa(i,t){let e=t.get(i);if(e)return e;let s=Gt(i,[],!1).filter(o=>ot(o)&&Pt(o)!=="body"),r=null,a=lt(i).position==="fixed",n=a?At(i):i;for(;ot(n)&&!It(n);){let o=lt(n),l=ze(n);!l&&o.position==="fixed"&&(r=null),(a?!l&&!r:!l&&o.position==="static"&&!!r&&["absolute","fixed"].includes(r.position)||jt(n)&&!l&&_r(i,n))?s=s.filter(d=>d!==n):r=o,n=At(n)}return t.set(i,s),s}function Ka(i){let{element:t,boundary:e,rootBoundary:s,strategy:r}=i,n=[...e==="clippingAncestors"?ue(t)?[]:Xa(t,this._c):[].concat(e),s],o=n[0],l=n.reduce((u,d)=>{let b=yr(t,d,r);return u.top=tt(b.top,u.top),u.right=kt(b.right,u.right),u.bottom=kt(b.bottom,u.bottom),u.left=tt(b.left,u.left),u},yr(t,o,r));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}function Ja(i){let{width:t,height:e}=xr(i);return{width:t,height:e}}function Za(i,t,e){let s=pt(t),r=ft(t),a=e==="fixed",n=Nt(i,!0,a,t),o={scrollLeft:0,scrollTop:0},l=dt(0);if(s||!s&&!a)if((Pt(t)!=="body"||jt(r))&&(o=ce(t)),s){let g=Nt(t,!0,a,t);l.x=g.x+t.clientLeft,l.y=g.y+t.clientTop}else r&&(l.x=Ri(r));let u=r&&!s&&!a?Sr(r,o):dt(0),d=n.left+o.scrollLeft-l.x-u.x,b=n.top+o.scrollTop-l.y-u.y;return{x:d,y:b,width:n.width,height:n.height}}function Ni(i){return lt(i).position==="static"}function wr(i,t){if(!pt(i)||lt(i).position==="fixed")return null;if(t)return t(i);let e=i.offsetParent;return ft(i)===e&&(e=e.ownerDocument.body),e}function kr(i,t){let e=rt(i);if(ue(i))return e;if(!pt(i)){let r=At(i);for(;r&&!It(r);){if(ot(r)&&!Ni(r))return r;r=At(r)}return e}let s=wr(i,t);for(;s&&mr(s)&&Ni(s);)s=wr(s,t);return s&&It(s)&&Ni(s)&&!ze(s)?e:s||gr(i)||e}var Qa=async function(i){let t=this.getOffsetParent||kr,e=this.getDimensions,s=await e(i.floating);return{reference:Za(i.reference,await t(i.floating),i.strategy),floating:{x:0,y:0,width:s.width,height:s.height}}};function tn(i){return lt(i).direction==="rtl"}var en={convertOffsetParentRelativeRectToViewportRelativeRect:Ya,getDocumentElement:ft,getClippingRect:Ka,getOffsetParent:kr,getElementRects:Qa,getClientRects:$a,getDimensions:Ja,getScale:Xt,isElement:ot,isRTL:tn};function Er(i,t){return i.x===t.x&&i.y===t.y&&i.width===t.width&&i.height===t.height}function sn(i,t){let e=null,s,r=ft(i);function a(){var o;clearTimeout(s),(o=e)==null||o.disconnect(),e=null}function n(o,l){o===void 0&&(o=!1),l===void 0&&(l=1),a();let u=i.getBoundingClientRect(),{left:d,top:b,width:g,height:v}=u;if(o||t(),!g||!v)return;let p=le(b),c=le(r.clientWidth-(d+g)),_=le(r.clientHeight-(b+v)),y=le(d),w={rootMargin:-p+"px "+-c+"px "+-_+"px "+-y+"px",threshold:tt(0,kt(1,l))||1},A=!0;function k(E){let T=E[0].intersectionRatio;if(T!==l){if(!A)return n();T?n(!1,T):s=setTimeout(()=>{n(!1,1e-7)},1e3)}T===1&&!Er(u,i.getBoundingClientRect())&&n(),A=!1}try{e=new IntersectionObserver(k,{...w,root:r.ownerDocument})}catch{e=new IntersectionObserver(k,w)}e.observe(i)}return n(!0),a}function Cr(i,t,e,s){s===void 0&&(s={});let{ancestorScroll:r=!0,ancestorResize:a=!0,elementResize:n=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:l=!1}=s,u=Fi(i),d=r||a?[...u?Gt(u):[],...Gt(t)]:[];d.forEach(y=>{r&&y.addEventListener("scroll",e,{passive:!0}),a&&y.addEventListener("resize",e)});let b=u&&o?sn(u,e):null,g=-1,v=null;n&&(v=new ResizeObserver(y=>{let[f]=y;f&&f.target===u&&v&&(v.unobserve(t),cancelAnimationFrame(g),g=requestAnimationFrame(()=>{var w;(w=v)==null||w.observe(t)})),e()}),u&&!l&&v.observe(u),v.observe(t));let p,c=l?Nt(i):null;l&&_();function _(){let y=Nt(i);c&&!Er(c,y)&&e(),c=y,p=requestAnimationFrame(_)}return e(),()=>{var y;d.forEach(f=>{r&&f.removeEventListener("scroll",e),a&&f.removeEventListener("resize",e)}),b?.(),(y=v)==null||y.disconnect(),v=null,l&&cancelAnimationFrame(p)}}var Dr=hr;var Tr=dr,Mr=cr,Or=fr;var Lr=(i,t,e)=>{let s=new Map,r={platform:en,...e},a={...r.platform,_c:s};return ur(i,t,{...r,platform:a})};var G=class extends R{boot({options:t}){if(t({reference:null,auto:!0,position:"bottom start",gap:"5",offset:"0",matchWidth:!1,crossAxis:!1,scrollY:!0}),this.options().reference===null||this.options().position===null)return;let[e,s]=nn(this.el,{scrollY:this.options().scrollY}),r=rn(this.el,this.options().reference,e,{position:this.options().position,gap:this.options().gap,offset:this.options().offset,matchWidth:this.options().matchWidth,crossAxis:this.options().crossAxis,scrollY:this.options().scrollY}),a=()=>{};this.reposition=(...n)=>{this.options().auto?a=Cr(this.options().reference,this.el,r):r(null,...n)},this.cleanup=()=>{a(),s()}}};function rn(i,t,e,{position:s,offset:r,gap:a,matchWidth:n,crossAxis:o,scrollY:l}){let u=window.getComputedStyle(i).maxHeight;return u=u==="none"?null:parseFloat(u),(d,b,g)=>{Lr(t,i,{placement:an(s),middleware:[Dr({mainAxis:Number(a),alignmentAxis:Number(r)}),Mr(),Tr({padding:5,crossAxis:o}),Or({padding:5,apply({rects:v,elements:p,availableHeight:c}){n&&Object.assign(p.floating.style,{width:`${v.reference.width}px`});let _=u;_===null&&(_=l?p.floating.scrollHeight:p.floating.offsetHeight),p.floating.style.maxHeight=c>_?"":`${c}px`}})]}).then(({x:v,y:p})=>{e(b||v,g||p)})}}function an(i){let t=i.split(" ");switch(t[0]){case"start":t[0]=re()?"right":"left";break;case"end":t[0]=re()?"left":"right";break}return t.join("-")}function nn(i,{scrollY:t=!0}){let e=(n,o)=>{Object.assign(i.style,{position:"absolute",overflowY:t?"auto":"hidden",left:`${n}px`,top:`${o}px`,right:"auto",bottom:"auto"})},s,r,a=new MutationObserver(()=>e(s,r));return[(n,o)=>{s=n,r=o,a.disconnect(),e(s,r),a.observe(i,{attributeFilter:["style"]})},()=>{a.disconnect()}]}var Ui=class extends D{boot(){let t=this.trigger(),e=this.overlay();if(t){if(!e)return console.warn("ui-dropdown: no [popover] overlay found",this)}else return console.warn("ui-dropdown: no trigger element found",this);this._disabled=this.hasAttribute("disabled"),this._controllable=new F(this),e._popoverable=new st(e),e._anchorable=new G(e,{reference:t,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),e._popoverable.onChange(()=>{e._popoverable.getState()?e._anchorable.reposition():e._anchorable.cleanup()});let{lock:s,unlock:r}=ct(e._popoverable.el);e._popoverable.onChange(()=>{e._popoverable.getState()?s():r()}),this._controllable.initial(o=>e._popoverable.setState(o)),this._controllable.getter(()=>e._popoverable.getState());let a=N();this._controllable.setter(o=>e._popoverable.setState(o)),e._popoverable.onChange(a(()=>this._controllable.dispatch())),this.hasAttribute("hover")&&Bt(t,e,{gain(){e._popoverable.setState(!0)},lose(){e._popoverable.setState(!1)},focusable:!1}),x(t,"click",()=>e._popoverable.toggle()),e._popoverable.getState()?(h(this,"data-open",""),h(t,"data-open",""),h(e,"data-open","")):(S(this,"data-open"),S(t,"data-open"),S(e,"data-open")),e._popoverable.onChange(()=>{e._popoverable.getState()?(h(this,"data-open",""),h(t,"data-open",""),h(e,"data-open","")):(S(this,"data-open"),S(t,"data-open"),S(e,"data-open"))});let n=U(e,"dropdown");h(t,"aria-haspopup","true"),h(t,"aria-controls",n),h(t,"aria-expanded",e._popoverable.getState()?"true":"false"),e._popoverable.onChange(()=>{h(t,"aria-expanded",e._popoverable.getState()?"true":"false")}),e._popoverable.onChange(()=>{setTimeout(()=>e._popoverable.getState()?e.onPopoverShow?.():e.onPopoverHide?.())})}trigger(){return this.querySelector("button")}overlay(){return this.lastElementChild?.matches("[popover]")&&this.lastElementChild}};C("dropdown",Ui);var m=class i{constructor(t,e,s=1){this._date=new Date(Date.UTC(t,e-1,s))}isBetween(t,e){return!t&&!e?!0:t?e?this._date>=t._date&&this._date<=e._date:this._date>=t._date:this._date<=e._date}isSameDay(t){return t?this._date.getUTCDate()===t._date.getUTCDate()&&this._date.getUTCMonth()===t._date.getUTCMonth()&&this._date.getUTCFullYear()===t._date.getUTCFullYear():!1}isBefore(t){return t?this._date<t._date:!1}isAfter(t){return t?this._date>t._date:!1}incrementDays(t){let e=this.getCopy();return e._date.setUTCDate(e._date.getUTCDate()+t),e}addMonths(t){let e=this.getCopy();return e._date.setUTCMonth(e._date.getUTCMonth()+t),e}addDays(t){let e=this.getCopy();return e._date.setUTCDate(e._date.getUTCDate()+t),e}getYear(){return this._date.getUTCFullYear()}getMonth(){return this._date.getUTCMonth()+1}getPaddedMonth(){return String(this.getMonth()).padStart(2,"0")}getDay(){return this._date.getUTCDate()}getPaddedDay(){return String(this.getDay()).padStart(2,"0")}getDate(){return this._date}getCopy(){return new i(this.getYear(),this.getMonth(),this.getDay())}getDayOfWeek(){return this._date.getUTCDay()}getDaysInMonth(){return new i(this.getYear(),this.getMonth()+1,0).getDay()}getFirstDayOfMonth(){return new i(this.getYear(),this.getMonth(),1).getDayOfWeek()}getWeekNumber(){let t=new Date(Date.UTC(this._date.getUTCFullYear(),0,1)),e=new Date(t);e.setUTCDate(1+(11-t.getUTCDay())%7);let s=new Date(this._date);return s.setUTCDate(this._date.getUTCDate()+(11-this._date.getUTCDay())%7),Math.floor((s.getTime()-e.getTime())/(7*24*60*60*1e3))+1}setDay(t){this._date.setUTCDate(t)}setMonth(t){this._date.setUTCMonth(t-1)}setYear(t){this._date.setUTCFullYear(t)}static fromIsoDateString(t){if(!t)return null;let[e,s,r]=t.split("T")[0]?.split("-")?.map(Number);return new i(e,s,r)}static fromLocalDate(t){return t?new i(t.getUTCFullYear(),t.getUTCMonth()+1,t.getUTCDate()):null}static fromDate(t){return t?new i(t.getFullYear(),t.getMonth()+1,t.getDate()):null}static fromParts(t,e,s){return new i(t,e,s)}static today(){return i.fromDate(new Date)}static firstDayOfMonth(t){return new i(t.getYear(),t.getMonth(),1)}toIsoDateString(){return[this.getYear(),this.getPaddedMonth(),this.getPaddedDay()].join("-")}toParts(){return[this.getYear(),this.getMonth(),this.getDay()]}toDate(){return new Date(this.getYear(),this.getMonth()-1,this.getDay())}toFormattedString(t,e){return this.toDate().toLocaleDateString(t,e)}};function Pr(i,t,e,s){let r=i.querySelector('template[name="heading"]'),a=i.querySelector('template[name="weekday"]'),n=i.querySelector('template[name="week"]');r&&on(r,t,e),a&&ln(a,t),n&&un(n,t,e,s)}function on(i,t,e){et(i,s=>s({slots:{default:new Intl.DateTimeFormat(t.locale,{month:i.hasAttribute("display")?i.getAttribute("display"):"long",year:"numeric",timeZone:"UTC"}).format(new m(e.year,e.month).getDate())}}))}function ln(i,t){let e=r=>i.hasAttribute("display")?new Intl.DateTimeFormat(t.locale,{weekday:i.getAttribute("display")}).format(r):["en","es","de","fr","it","pt"].includes(t.locale.split("-")[0])?new Intl.DateTimeFormat(t.locale,{weekday:"short"}).format(r).slice(0,2):new Intl.DateTimeFormat(t.locale,{weekday:"narrow"}).format(r),s=Array.from({length:7},(r,a)=>{let n=(a+t.startDay)%7,o=new Date(2024,0,n+7);return e(o)});et(i,r=>s.map(a=>r({slots:{default:a}})))}function un(i,t,e,s){let r=e.month,a=e.year,n=(new m(a,r).getFirstDayOfMonth()-t.startDay+7)%7,o=new m(a,r).getDaysInMonth(),[l,u]=new m(a,r).addMonths(-1).toParts(),d=new m(l,u).getDaysInMonth(),[b,g]=[[],[]];for(let A=0;A<n;A++){b.push(0);let k=d-n+A+1;g.push(new m(l,u,k).toIsoDateString())}for(let A=1;A<=o;A++)b.push(A),g.push(new m(a,r,A).toIsoDateString());let p=(7-(n+o)%7)%7,[c,_]=new m(a,r).addMonths(1).toParts();for(let A=1;A<=p;A++)b.push(0),g.push(new m(c,_,A).toIsoDateString());if(t.fixedWeeks){let A=Math.ceil(b.length/7),k=t.fixedWeeks,E=k-A;if(E>0)for(let T=0;T<E*7;T++)b.push(0),g.push(m.fromIsoDateString(g[g.length-1]).addDays(1).toIsoDateString());else E<0&&(b.length=k*7,g.length=k*7)}let y=A=>Array.from({length:Math.ceil(A.length/7)},(k,E)=>A.slice(E*7,(E+1)*7)),f=y(b),w=y(g);et(i,A=>f.map((k,E)=>{let T=A(),I=w[E],H=T.querySelector('template[name="number"]');if(H){let j=(4-t.startDay+7)%7,nt=m.fromIsoDateString(I[j]).getWeekNumber();et(H,X=>X({slots:{default:nt}}))}return et(T.querySelector('template[name="day"]'),j=>k.map((nt,X)=>{if(nt===0){let it=m.fromIsoDateString(I[X]).getDay();return j({slots:{default:it},attrs:{"data-date":I[X],"data-outside":""}})}let K=m.fromIsoDateString(I[X]),J=j({slots:{default:nt},attrs:{"data-date":I[X]}}),ut=s.subtext(K),Y=s.details(K),gt=s.variant(K);if([!1,null,void 0].includes(gt)||(J.dataset.dateVariant=gt),![!1,null,void 0].includes(ut)){let Z=J.querySelector('template[name="subtext"]');Z&&et(Z,it=>it({slots:{default:ut}}))}if(![!1,null,void 0].includes(Y)){let Z=J.querySelector('template[name="details"]');Z&&et(Z,it=>it({slots:{default:Y}}))}return J})),T}))}function Ir(i,t,e,s,r,a){let o=((l,u)=>r.lowerBound(()=>m.today().getMonth()===l&&m.today().getYear()===u?m.today():new m(u,l)))(s.month,s.year);i.querySelectorAll("[data-date]").forEach(l=>{h(l,"role","gridcell");let u=l.querySelector("button"),d=cn(l);d&&(u?h(u,"aria-label",d.toFormattedString(e.locale,{day:"numeric",month:"long",year:"numeric",weekday:"long"})):h(l,"aria-label",d.toFormattedString(e.locale,{day:"numeric",month:"long",year:"numeric",weekday:"long"})),a.isValid(d)?t?(h(l,"disabled",""),h(l,"aria-disabled","true"),u&&h(u,"disabled","")):(S(l,"disabled"),S(l,"data-unavailable"),S(l,"aria-disabled"),u&&S(u,"disabled")):(h(l,"disabled",""),h(l,"aria-disabled","true"),u&&h(u,"disabled",""),a.isUnavailable(d)&&h(l,"data-unavailable","")),m.today().isSameDay(d)?h(l,"data-today",""):S(l,"data-today",""),r.attributes(l,d),d.isSameDay(o)?u&&h(u,"tabindex","0"):u&&h(u,"tabindex","-1"))})}function et(i,t){if(!i)return;let e=()=>{let r=i.nextElementSibling;for(;r&&r.hasAttribute("data-appended");){let a=r;r=r.nextElementSibling,a.remove()}};e();let s=t(({slots:r={},attrs:a={}}={})=>{let n=i.content.cloneNode(!0).firstElementChild;return Object.entries(r).forEach(([o,l])=>{(o==="default"?n.querySelectorAll("slot:not([name])"):n.querySelectorAll(`slot[name="${o}"]`)).forEach(d=>d.replaceWith(typeof l=="string"?document.createTextNode(l):l))}),n.querySelectorAll("slot").forEach(o=>o.remove()),Object.entries(a).forEach(([o,l])=>{n.setAttribute(o,l)}),n});return s=Array.isArray(s)?s:[s],s.reverse().forEach(r=>{h(r,"data-appended",""),i.after(r)}),{cleanup:e}}function cn(i){return!i||!i.hasAttribute("data-date")?null:m.fromIsoDateString(i.getAttribute("data-date"))}var M=class{static SELECTION=1;static ACTIVATION=2;static VIEW_CHANGE=3},Kt=class{constructor(){this.subscribers=[],this.subscriberTypes=new WeakMap}subscribe(t,e){let s=Array.isArray(t)?t:[t];this.subscribers.push(e),this.subscriberTypes.has(e)||this.subscriberTypes.set(e,[]),this.subscriberTypes.get(e).push(...s)}notify(t){let e=Array.isArray(t)?t:[t];this.subscribers.forEach(s=>{e.length&&!this.subscriberTypes.get(s)?.some(r=>e.includes(r))||s()})}};var $=class{static SINGLE="single";static MULTIPLE="multiple";static RANGE="range"},Xe=class i{constructor(t,e,s){this.config=e,this.observable=s,this.selection=t,this.active=null,this.displayResolver=r=>r}setDisplayResolver(t){this.displayResolver=t}select(t){let e=this.selection;this.selection=this.selection.select(t,this.config),this.selection.shouldNotify(e)?this.observable.notify(M.SELECTION):this.observable.notify(M.ACTIVATION)}activate(t){let e=this.active;t?this.active=t:this.active=null,this.selection.activate(t),e!==this.active&&this.observable.notify(M.ACTIVATION)}setValue(t){let e=this.selection;this.selection=this.createSelectionFromValue(t,this.config),this.selection.shouldNotify(e)?this.observable.notify(M.SELECTION):this.observable.notify(M.ACTIVATION)}getValue(){return this.selection.value()}isSelectable(t){return this.selection.selectable(t,this.config)}contains(...t){return this.selection.contains(...t)}hasSelection(){return this.selection.hasSelection()}lowerBound(...t){return this.selection.lowerBound(...t)}upperBound(...t){return this.selection.upperBound(...t)}display(...t){return this.displayResolver(this.selection.display(...t))}attributes(...t){return this.selection.attributes(...t)}createSelectionFromValue(t,e){if(e.mode===$.MULTIPLE){let s=t?t.map(r=>m.fromIsoDateString(r)):[];return new Je(s)}else if(e.mode===$.RANGE){let{start:s,end:r,preset:a}=t||{};return a&&Qe[a]&&a!=="custom"?new Ze(a,e):!s&&!r?new fe:r?new pe(m.fromIsoDateString(s),m.fromIsoDateString(r)):new Ct(m.fromIsoDateString(s))}else return t?new de(m.fromIsoDateString(t)):new he}static createFromValueStringAttribute(t,e,s){let r=i.createSelectionFromValueStringAttribute(t,e);return new i(r,e,s)}static createSelectionFromValueStringAttribute(t,e){if(e.mode===$.MULTIPLE){let s=t?t.split(",").map(r=>r.trim()).map(r=>m.fromIsoDateString(r)):[];return new Je(s)}else if(e.mode===$.RANGE){if(!t)return new fe;let[s,r]=t.split("/").map(a=>a.trim());return!r&&s&&Qe[s]&&s!=="custom"?new Ze(s,e):(s=m.fromIsoDateString(s),r?(r=m.fromIsoDateString(r),new pe(s,r)):new Ct(s))}else return t?new de(m.fromIsoDateString(t)):new he}},Ke=class{constructor(t,e){this.selectable=t,this.observable=e,this._selection=this.selectable.selection,this.selectable.observable.subscribe(M.SELECTION,()=>{this._blockSync()||this.sync()}),this._blockSync=()=>{}}blockSyncIf(t){this._blockSync=t}sync(){this._selection=this.selectable.selection,this.observable.notify(M.SELECTION)}setValue(t){return this.selectable.setValue(t)}getValue(){return this._selection.value()}isSelectable(t){return this._selection.selectable(t,this.config)}hasSelection(){return this._selection.hasSelection()}display(...t){return this.selectable.displayResolver(this._selection.display(...t))}},St=class{contains(){}shouldNotify(t){return!0}hasSelection(){return!1}lowerBound(t){return be(t)}upperBound(t){return this.lowerBound(t)}selectable(t,e){return!0}display(){}value(){}activate(){}attributes(t,e){this.contains(e)?(h(t,"data-selected",""),h(t,"aria-selected","true")):(S(t,"data-selected"),h(t,"aria-selected","false"))}},he=class i extends St{shouldNotify(t){return!(t instanceof i)}hasSelection(){return!1}contains(){return!1}select(t){return new de(t)}lowerBound(t){return be(t)}display(t){return""}value(){return null}},de=class i extends St{constructor(t){super(),this._date=t}hasSelection(){return!0}shouldNotify(t){return!(t instanceof i&&this._date.isSameDay(t._date))}select(t){return this._date.isSameDay(t)?new he:new i(t)}contains(t){return this._date.isSameDay(t)}lowerBound(){return this._date}display(t){return this._date.toFormattedString(t,{day:"numeric",month:"short",year:"numeric"})}value(){return this._date.toIsoDateString()}},Je=class i extends St{constructor(t){super(),this._dates=t}hasSelection(){return this._dates.length>0}shouldNotify(t){return!(t instanceof i&&this._dates.every(e=>t._dates.includes(e))&&t._dates.every(e=>this._dates.includes(e)))}select(t){return this._dates.some(s=>s.isSameDay(t))?new i(this._dates.filter(s=>!s.isSameDay(t))):new i([...this._dates,t])}contains(t){return this._dates.some(e=>e.isSameDay(t))}lowerBound(t){return this._dates.sort((s,r)=>s.isBefore(r)?-1:1)[0]||be(t)}upperBound(t){let e=this._dates.sort((s,r)=>s.isBefore(r)?-1:1);return e[e.length-1]||be(t)}display(t){return this._dates.map(e=>e.toFormattedString(t,{day:"numeric",month:"short",year:"numeric"})).join(", ")}value(){return this._dates.map(t=>t.toIsoDateString())}},fe=class i extends St{constructor(){super()}hasSelection(){return!1}shouldNotify(t){return!(t instanceof i||t instanceof Ct)}select(t){return new Ct(t)}contains(){return!1}lowerBound(t){return be(t)}display(t){return""}value(){return null}},Ct=class i extends St{constructor(t){super(),this._start=t,this._endPreview=null}hasSelection(){return!1}shouldNotify(t){return!1}select(t,e){return t.isBefore(this._start)?new i(t):t.isSameDay(this._start)&&e.minRange>1?new fe:new pe(this._start,t)}activate(t){this._endPreview=t}selectable(t,e){if(e.maxRange&&(t.isBefore(this._start)||this._start.addDays(e.maxRange-1).isBefore(t)))return!1;if(e.minRange){if(this._start.isSameDay(t))return!0;if(t.isBefore(this._start)||this._start.addDays(e.minRange-1).isAfter(t))return!1}let s=e.unavailable.filter(a=>a.isAfter(this._start)).sort((a,n)=>a.toDate()-n.toDate())[0],r=e.unavailable.filter(a=>a.isBefore(this._start)).sort((a,n)=>n.toDate()-a.toDate())[0];return t.isAfter(this._start)?!s||t.isBefore(s):t.isBefore(this._start)?!r||t.isAfter(r):!0}contains(t){return t.isSameDay(this._start)}lowerBound(){return this._start}display(t){return new Intl.DateTimeFormat(t,{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"}).format(this._start.getDate())+" -"}value(){return null}attributes(t,e){this._endPreview&&e.isBetween(this._start,this._endPreview)?(h(t,"data-in-range",""),h(t,"aria-selected","true")):(S(t,"data-in-range"),S(t,"aria-selected")),e.isSameDay(this._start)?h(t,"data-selected",""):S(t,"data-selected"),e.isSameDay(this._start)?h(t,"aria-selected","true"):S(t,"aria-selected"),e.isSameDay(this._start)?h(t,"data-start",""):S(t,"data-start"),e.isSameDay(this._endPreview)?h(t,"data-end-preview",""):S(t,"data-end-preview")}},pe=class i extends St{constructor(t,e){super(),this._start=t,this._end=e}hasSelection(){return!0}shouldNotify(t){return!(t instanceof i&&this._start.isSameDay(t._start)&&this._end.isSameDay(t._end))}select(t){return new Ct(t)}contains(t){return t.isBetween(this._start,this._end)}lowerBound(){return this._start}upperBound(){return this._end}display(t){return new Intl.DateTimeFormat(t,{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"}).formatRange(this._start.getDate(),this._end.getDate()).replaceAll("\u2009"," ")}value(){return{start:this._start.toIsoDateString(),end:this._end.toIsoDateString()}}attributes(t,e){e.isSameDay(this._start)||e.isSameDay(this._end)?h(t,"data-selected",""):S(t,"data-selected"),e.isSameDay(this._start)?h(t,"data-start",""):S(t,"data-start"),e.isSameDay(this._end)?h(t,"data-end",""):S(t,"data-end"),this.contains(e)?(h(t,"data-in-range",""),h(t,"aria-selected","true")):(S(t,"data-in-range"),S(t,"aria-selected"))}},Ze=class i extends St{constructor(t,e){super(),this._preset=t,this._config=e}get _start(){let[t]=Qe[this._preset](this._config);return this._config.min&&t.isBefore(this._config.min)?this._config.min:t}get _end(){let[,t]=Qe[this._preset](this._config);return this._config.max&&t.isAfter(this._config.max)?this._config.max:t}hasSelection(){return!0}shouldNotify(t){return!(t instanceof i&&this._preset===t._preset)}select(t){return new Ct(t,this._config)}contains(t){return t.isBetween(this._start,this._end)}lowerBound(){return this._preset==="allTime"?m.today():this._start}upperBound(){return this._preset==="allTime"?m.today():m.today()}display(t){return new Intl.DateTimeFormat(t,{day:"numeric",month:"short",year:"numeric",timeZone:"UTC"}).formatRange(this._start.getDate(),this._end.getDate()).replaceAll("\u2009"," ")}value(){return{start:this._start.toIsoDateString(),end:this._end.toIsoDateString(),preset:this._preset}}attributes(t,e){e.isSameDay(this._start)||e.isSameDay(this._end)?h(t,"data-selected",""):S(t,"data-selected"),e.isSameDay(this._start)?h(t,"data-start",""):S(t,"data-start"),e.isSameDay(this._end)?h(t,"data-end",""):S(t,"data-end"),this.contains(e)?(h(t,"data-in-range",""),h(t,"aria-selected","true")):(S(t,"data-in-range"),S(t,"aria-selected"))}};function be(i){return typeof i=="function"?i():i}var Qe={today:()=>[m.today(),m.today()],yesterday:()=>{let i=m.today().incrementDays(-1);return[i,i]},thisWeek:i=>{let t=m.today().getCopy().incrementDays(i.startDay-m.today().getDayOfWeek()),e=t.incrementDays(6);return[t,e]},lastWeek:i=>{let t=m.today().incrementDays(i.startDay-(m.today().getDayOfWeek()+7)),e=t.incrementDays(6);return[t,e]},last7Days:()=>{let i=m.today();return[m.today().incrementDays(-6),i]},thisMonth:()=>{let i=m.fromParts(m.today().getYear(),m.today().getMonth(),1),t=m.fromParts(m.today().getYear(),m.today().getMonth(),m.today().getDaysInMonth());return[i,t]},lastMonth:()=>{let i=m.today().getMonth()-1,t=m.today().getYear();i<1&&(i+=12,t--);let e=m.fromParts(t,i,1),s=m.fromParts(t,i,e.getDaysInMonth());return[e,s]},thisQuarter:()=>{let t=Math.floor((m.today().getMonth()-1)/3)*3+1,e=t+2,s=m.fromParts(m.today().getYear(),t,1),r=m.fromParts(m.today().getYear(),e,1),a=m.fromParts(m.today().getYear(),e,r.getDaysInMonth());return[s,a]},lastQuarter:()=>{let t=Math.floor((m.today().getMonth()-4)/3)*3+1,e=t+2,s=m.today().getYear();t<1&&(t+=12,e+=12,s--);let r=m.fromParts(s,t,1),a=m.fromParts(s,e,1),n=m.fromParts(s,e,a.getDaysInMonth());return[r,n]},thisYear:()=>{let i=m.fromParts(m.today().getYear(),1,1),t=m.fromParts(m.today().getYear(),12,31);return[i,t]},lastYear:()=>{let i=m.today().getYear()-1,t=m.fromParts(i,1,1),e=m.fromParts(i,12,31);return[t,e]},last14Days:()=>{let i=m.today();return[m.today().incrementDays(-13),i]},last30Days:()=>{let i=m.today();return[m.today().incrementDays(-29),i]},last3Months:()=>{let i=m.today(),t=m.today().getDay()+1,e=m.today().getMonth()-3,s=m.today().getYear();return e<1&&(e+=12,s--),[m.fromParts(s,e,t),i]},last6Months:()=>{let i=m.today(),t=m.today().getDay()+1,e=m.today().getMonth()-6,s=m.today().getYear();return e<1&&(e+=12,s--),[m.fromParts(s,e,t),i]},yearToDate:()=>{let i=m.fromParts(m.today().getYear(),1,1),t=m.today();return[i,t]},allTime:i=>{if(!i.min)throw new Error("Min date is required for allTime preset");let t=i.min,e=m.today();return[t,e]}};var ti=class{constructor(t,e,s,r){this.month=t,this.year=e,this.config=s,this.observable=r}generateOffsetState(t){return new qi(this,t)}canNavigatePrevious(){let[t,e]=new m(this.year,this.month).addMonths(-1).toParts();return!(this.config.min&&m.fromParts(t,e).isBefore(m.firstDayOfMonth(this.config.min)))}canNavigateNext(){let[t,e]=new m(this.year,this.month).addMonths(this.config.months).toParts();return!(this.config.max&&m.fromParts(t,e).isAfter(this.config.max))}nextMonth(){this.canNavigateNext()&&this.adjustMonth(1)}previousMonth(){this.adjustMonth(-1)}setMonth(t){t&&(this.isWithinMinAndMax(t,this.year)&&(this.month=t),this.observable.notify(M.VIEW_CHANGE))}setYear(t){t&&(this.isWithinMinAndMax(this.month,t)&&(this.year=t),this.observable.notify(M.VIEW_CHANGE))}setDate(t){t&&(this.isWithinMinAndMax(t.getMonth(),t.getYear())&&(this.month=t.getMonth(),this.year=t.getYear()),this.observable.notify(M.VIEW_CHANGE))}isWithinMinAndMax(t,e){return!(this.config.min&&m.fromParts(e,t).isBefore(m.firstDayOfMonth(this.config.min))||this.config.max&&m.fromParts(e,t).isAfter(this.config.max))}adjustMonth(t){let[e,s]=new m(this.year,this.month).addMonths(t).toParts();this.config.min&&m.fromParts(e,s).isBefore(m.firstDayOfMonth(this.config.min))||this.config.max&&m.fromParts(e,s).isAfter(this.config.max)||([this.month,this.year]=[s,e],this.observable.notify(M.VIEW_CHANGE))}},qi=class{constructor(t,e=0){this.offset=e,this.viewState=t}get month(){let[,t]=new m(this.viewState.year,this.viewState.month).addMonths(this.offset).toParts();return t}get year(){let[t]=new m(this.viewState.year,this.viewState.month).addMonths(this.offset).toParts();return t}};var ei=class{constructor(t,e,s){this.min=s.min,this.max=s.max,this.unavailable=s.unavailable,this.selectable=t,this.metadata=e}isBetweenMinMax(t){return t.isBetween(this.min,this.max)}isUnavailable(t){return this.unavailable.some(e=>e.isSameDay(t))||this.metadata.unavailable(t)}isBlocked(t){return!this.selectable.isSelectable(t)}isValid(t){return this.isBetweenMinMax(t)&&!this.isUnavailable(t)&&!this.isBlocked(t)}};var ii=class{constructor(t){this.metadata={},this.observable=t}resetFromJSON(t){this.reset(JSON.parse(t))}appendFromJSON(t){this.append(JSON.parse(t))}append(t){this.metadata={...this.metadata,...t},this.observable.notify(M.VIEW_CHANGE)}reset(t){this.metadata=t,this.observable.notify(M.VIEW_CHANGE)}get(t){return this.metadata[t.toIsoDateString()]}has(t){return this.metadata[t.toIsoDateString()]!==void 0}subtext(t){return this.metadata[t.toIsoDateString()]?.subtext}details(t){return this.metadata[t.toIsoDateString()]?.details}variant(t){return this.metadata[t.toIsoDateString()]?.variant}unavailable(t){return!!this.metadata[t.toIsoDateString()]?.unavailable}};var Wi=class extends D{boot(){let t=this.closest("ui-date-picker")||this;this.querySelectorAll("[data-appended]").forEach(o=>o.remove());let[e,s]=tr(t,"months",1);this.observable=new Kt;let r=t.hasAttribute("locale")?t.getAttribute("locale"):ht();this.config={mode:t.getAttribute("mode")==="range"?$.RANGE:t.hasAttribute("multiple")?$.MULTIPLE:$.SINGLE,months:parseInt(e),min:t.hasAttribute("min")?t.getAttribute("min")==="today"?m.today():m.fromIsoDateString(t.getAttribute("min")):null,max:t.hasAttribute("max")?t.getAttribute("max")==="today"?m.today():m.fromIsoDateString(t.getAttribute("max")):null,maxRange:t.hasAttribute("max-range")?parseInt(t.getAttribute("max-range")):null,minRange:t.hasAttribute("min-range")?parseInt(t.getAttribute("min-range")):null,startDay:t.hasAttribute("start-day")?parseInt(t.getAttribute("start-day")):(new Intl.Locale(r).weekInfo?.firstDay||7)%7,unavailable:t.hasAttribute("unavailable")?t.getAttribute("unavailable").split(",").map(o=>m.fromIsoDateString(o.trim())):[],locale:r,fixedWeeks:t.hasAttribute("fixed-weeks")?6:null},s(o=>{this.config.months=parseInt(o),this.observable.notify(M.VIEW_CHANGE)}),this.selectable=Xe.createFromValueStringAttribute(t.getAttribute("value"),this.config,this.observable),this.metadata=new ii(this.observable),this.validator=new ei(this.selectable,this.metadata,this.config);let a=this.selectable.getValue()===null&&t.hasAttribute("open-to")?t.getAttribute("open-to")==="today"?m.today():m.fromIsoDateString(t.getAttribute("open-to")):this.selectable.lowerBound(()=>m.today());if(this.viewState=new ti(a.getMonth(),a.getYear(),this.config,this.observable),this._disableable=new P(this,{disableWithParent:!1}),!this.hasAttribute("static")){let{enable:o,disable:l}=hn(this,this.selectable,this.viewState,this.validator);this._disableable.onInitAndChange(u=>{u?l():o()})}this._controllable=new F(this,{bubbles:!0}),this._submittable=new Q(this,{name:this.getAttribute("name"),value:this.selectable.getValue()});let n=N();this._controllable.initial(o=>o&&this.selectable.setValue(o)),this._controllable.getter(()=>this.selectable.getValue()),this._controllable.setter(n(o=>{this.selectable.setValue(o)})),this.observable.subscribe(M.SELECTION,n(()=>{this.dispatchEvent(new Event("select",{bubbles:!1,cancelable:!0})),this._controllable.dispatch()})),this.observable.subscribe(M.SELECTION,()=>{this._submittable.update(this.selectable.getValue())}),this.observable.subscribe(M.SELECTION,()=>{this.anchorSelection()}),this.observable.subscribe(M.VIEW_CHANGE,()=>{this.dispatchEvent(new Event("navigate",{bubbles:!1,cancelable:!0}))}),queueMicrotask(()=>{this.closest("ui-date-picker")?.bootWithCalendar(this)})}navigateNext(){this.viewState.nextMonth()}navigatePrevious(){this.viewState.previousMonth()}anchorSelection(){let t=document.activeElement;this.contains(t)&&t.closest("[data-date]")!==null||this.viewState.setDate(this.selectable.lowerBound(m.today()))}appendMetadata(t){this.metadata.append(t)}resetMetadata(t={}){this.metadata.reset(t)}visibleDateRange(){return[m.fromParts(this.viewState.year,this.viewState.month,1).toIsoDateString(),m.fromParts(this.viewState.year,this.viewState.month+1,0).toIsoDateString()]}},Vi=class extends D{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,Ht(this,()=>this._disableable.isDisabled(),()=>t.navigatePrevious());let e=()=>{t.viewState.canNavigatePrevious()&&!this._disableable.isDisabled()?S(this,"disabled"):h(this,"disabled","")};t.observable.subscribe(M.VIEW_CHANGE,e),this._disableable.onInitAndChange(()=>{e()})}},Bi=class extends D{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,Ht(this,()=>this._disableable.isDisabled(),()=>t.navigateNext());let e=()=>{t.viewState.canNavigateNext()&&!this._disableable.isDisabled()?S(this,"disabled"):h(this,"disabled","")};t.observable.subscribe(M.VIEW_CHANGE,e),this._disableable.onInitAndChange(()=>{e()})}},Hi=class extends D{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.config=t.config,this.viewState=t.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset),this.validator=t.validator;let e=this.querySelector("select"),s=this.hasAttribute("display")?this.getAttribute("display"):"long";if(e)this.renderSelectOptions(e,s),e.value=this.viewState.month,e.addEventListener("change",this._disableable.enabled(()=>{this.viewState.setMonth(parseInt(e.value))})),t.observable.subscribe(M.VIEW_CHANGE,()=>{this.renderSelectOptions(e,s),e.value=this.viewState.month}),this._disableable.onInitAndChange(r=>{r?h(e,"disabled",""):S(e,"disabled")});else{let r=()=>this.textContent=new Intl.DateTimeFormat(this.config.locale,{month:this.hasAttribute("display")?this.getAttribute("display"):"long",timeZone:"UTC"}).format(new m(this.offsetState.year,this.offsetState.month).getDate());r(),this.viewState.observable.subscribe(M.VIEW_CHANGE,()=>r())}}renderSelectOptions(t,e){let r=Array.from({length:12},(a,n)=>n+1).map(a=>{let n=new m(this.viewState.year,a),o=new m(this.viewState.year,a+1,0);return!this.validator.isBetweenMinMax(n)&&!this.validator.isBetweenMinMax(o)?null:{month:a,label:new Intl.DateTimeFormat(this.config.locale,{month:e,timeZone:"UTC"}).format(new m(2024,a).getDate())}}).filter(Boolean);et(t.querySelector("template"),a=>r.map(n=>{let o=a({slots:{default:n.label}});return o.setAttribute("value",n.month),o}))}},Yi=class extends D{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.config=t.config,this.viewState=t.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset),this.numberOfPastYears=100,this.numberOfFutureYears=10,this.validator=t.validator;let e=this.querySelector("select");if(e)this.renderSelectOptions(e),e.value=this.viewState.year,e.addEventListener("change",this._disableable.enabled(()=>{this.viewState.setYear(parseInt(e.value))})),t.observable.subscribe(M.VIEW_CHANGE,()=>{this.yearIsLessThanMinimum(this.viewState.year)&&(this.numberOfPastYears+=100,this.renderSelectOptions(e)),this.yearIsGreaterThanMaximum(this.viewState.year)&&(this.numberOfFutureYears+=10,this.renderSelectOptions(e)),e.value=this.viewState.year}),this._disableable.onInitAndChange(s=>{s?h(e,"disabled",""):S(e,"disabled")});else{let s=()=>this.textContent=new Intl.DateTimeFormat(this.config.locale,{year:this.hasAttribute("display")?this.getAttribute("display"):"numeric",timeZone:"UTC"}).format(new m(this.offsetState.year,this.offsetState.month).getDate());s(),this.viewState.observable.subscribe(M.VIEW_CHANGE,()=>s())}}yearIsLessThanMinimum(t){return t<this.minimumYear()}yearIsGreaterThanMaximum(t){return t>this.maximumYear()}minimumYear(){return new Date().getFullYear()-this.numberOfPastYears}maximumYear(){return new Date().getFullYear()+this.numberOfFutureYears}renderSelectOptions(t){let e=new Date().getFullYear(),r=Array.from({length:this.numberOfPastYears+this.numberOfFutureYears+1},(a,n)=>e-this.numberOfPastYears+n).map(a=>{let n=new m(a,1),o=new m(a,12,31);return!this.validator.isBetweenMinMax(n)&&!this.validator.isBetweenMinMax(o)?null:a}).filter(Boolean);et(t.querySelector("template"),a=>r.map(n=>a({slots:{default:n}})))}},$i=class extends D{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.config=t.config,this.selectable=t.selectable,this.observable=t.observable,this.metadata=t.metadata,this.validator=t.validator,this.viewState=t.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset),this.monthEls=[],this.renderMonths();let e=()=>this.monthEls.forEach(a=>Pr(a,this.config,a.offsetState,this.metadata)),s=()=>this.monthEls.forEach(a=>Ir(a,this._disableable.isDisabled(),this.config,a.offsetState,this.selectable,this.validator));e(),s();let r=this.config.months;this.viewState.observable.subscribe(M.VIEW_CHANGE,()=>{r!==this.config.months&&(r=this.config.months,this.renderMonths()),e(),s()}),this.observable.subscribe([M.SELECTION,M.ACTIVATION],()=>{s()}),this._disableable.onChange(()=>s())}renderMonths(){let t=this.querySelector('template:not([name]), template[name="month"]');et(t,e=>{let s=Array.from({length:this.config.months}).map((r,a)=>a);return this.monthEls=s.map(r=>{let a=this.viewState.generateOffsetState(r),n=e({attrs:{"data-month":""}});n.offsetState=a;let o=n.querySelector("thead")?.set;return h(n,"role","grid"),o&&h(o,"aria-hidden","true"),n}),this.monthEls})}},zi=class extends D{boot(){let t=this.closest("ui-calendar, ui-date-picker");this._disableable=t._disableable,this.behavior=this.hasAttribute("behavior")?this.getAttribute("behavior"):"auto",t.hasAttribute("static")&&(this.behavior="none"),Ht(this,()=>this._disableable.isDisabled(),()=>this.navigateAndSelectToday()),this._disableable.onInitAndChange(s=>{s?h(this,"disabled",""):S(this,"disabled")});let e=this.querySelector("template");e&&et(e,s=>s({slots:{default:m.today().getDay()}}))}navigateAndSelectToday(){let t=this.closest("ui-calendar, ui-date-picker"),e=()=>{let r=t.viewState,a=m.today();return r.year===a.getYear()&&r.month===a.getMonth()};(this.behavior==="select"||this.behavior==="auto"&&e())&&(t.config.mode===$.RANGE?t.selectable.setValue({start:m.today().toIsoDateString(),end:m.today().toIsoDateString()}):t.config.mode===$.MULTIPLE?t.selectable.setValue([m.today().toIsoDateString()]):t.selectable.setValue(m.today().toIsoDateString())),t.viewState.setMonth(m.today().getMonth()),t.viewState.setYear(m.today().getYear())}},Gi=class extends D{boot(){let t=this.closest("ui-calendar");if(this._disableable=t._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.selectable=t.selectable,this.observable=t.observable,this.config=t.config,this.viewState=t.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset),this.config.mode!==$.RANGE)throw"Presets can only be used with range calendars";let e=this.firstElementChild;if(e){let s=r=>{if(e._selectable instanceof z){let a=e._selectable.findByValue(r);return a?a?.el?.textContent:null}else if(e instanceof HTMLSelectElement)return e.querySelector(`option[value="${r}"]`)?.textContent;return null};this.selectable.setDisplayResolver(r=>{let a=this.selectable.getValue()?.preset||"";if(a){let n=s(a);if(n)return n}return r}),e.value=this.selectable.getValue()?.preset||"custom",e.addEventListener("change",this._disableable.enabled(()=>{if(["","custom"].includes(e.value)){let{start:r,end:a}=this.selectable.getValue()||{};r&&a&&this.selectable.setValue({start:r,end:a})}else this.selectable.setValue({preset:e.value})})),this.observable.subscribe(M.SELECTION,()=>{let r=this.selectable.getValue();e.value=r?.preset||"custom"}),this._disableable.onInitAndChange(r=>{r?h(e,"disabled",""):S(e,"disabled")})}}},ji=class extends D{boot(){let t=this.closest("ui-calendar");this._disableable=t._disableable,this.offset=this.hasAttribute("offset")?parseInt(this.getAttribute("offset")):0,this.selectable=t.selectable,this.observable=t.observable,this.config=t.config,this.viewState=t.viewState,this.offsetState=this.viewState.generateOffsetState(this.offset);let[e,s]=this.querySelectorAll("input");this.config.mode===$.RANGE?Ji(e,s,t):Ki(e,t)}};O(({css:i})=>i`
    ui-calendar-preset,
    ui-calendar-previous,
    ui-calendar-next {
        display: block;
        user-select: none;
    }
`);C("calendar",Wi);C("calendar-today",zi);C("calendar-presets",Gi);C("calendar-previous",Vi);C("calendar-inputs",ji);C("calendar-next",Bi);C("calendar-months",$i);C("calendar-month",Hi);C("calendar-year",Yi);function hn(i,t,e,s){let r=!1,a=i.hasAttribute("readonly");return x(i,"click",n=>{if(r||a)return;let o=n.target.closest("[data-date]");if(!o)return;let l=Jt(o);s.isValid(l)&&t.select(l)}),x(i,"mouseover",n=>{if(r||a)return;let o=n.target.closest("[data-date]");if(!o)return;let l=Jt(o);s.isValid(l)&&t.activate(l)}),x(i,"mouseout",()=>{r||a||t.activate(null)}),x(i,"focusin",n=>{if(r||a)return;let o=n.target.closest("[data-date]");if(!o)return;let l=Jt(o);s.isValid(l)&&t.activate(l)}),x(i,"keydown",n=>{if(r)return;let o=n.target.closest("[data-date]");if(!o)return;let l=!0,u,d=Jt(o),b=g=>{let v=d.getCopy(),p=Math.sign(g),c=366;for(v.setDay(v.getDay()+g);!s.isValid(v)&&c>0;)v.setDay(v.getDay()+p),c--;d=v};switch(n.key){case"ArrowRight":u="forward",b(1);break;case"ArrowLeft":u="backward",b(-1);break;case"ArrowUp":u="backward",b(-7);break;case"ArrowDown":u="forward",b(7);break;case"Home":e.previousMonth();break;case"End":e.nextMonth();break;case"PageUp":n.shiftKey,e.previousMonth();break;case"PageDown":n.shiftKey,e.nextMonth();break;default:l=!1}if(l){n.preventDefault(),n.stopPropagation();let g=Array.from(i.querySelectorAll("[data-date]")).find(v=>Jt(v).isSameDay(d));!g&&u&&(u==="forward"?e.nextMonth():e.previousMonth(),g=Array.from(i.querySelectorAll("[data-date]")).find(v=>Jt(v).isSameDay(d))),g?.querySelector("button")?.focus()}}),{enable(){r=!1},disable(){r=!0}}}function Jt(i){return!i||!i.hasAttribute("data-date")?null:m.fromIsoDateString(i.getAttribute("data-date"))}function Ki(i,t){Xi(i);let e=N(),s=e(()=>{let r=t.selectable.getValue();i.value=r||""});t.observable.subscribe(M.SELECTION,s),s(),i.addEventListener("change",e(()=>{let r=i.valueAsDate;r?(t.selectable.setValue(m.fromLocalDate(r).toIsoDateString()),t.viewState.setDate(m.fromLocalDate(r))):t.selectable.setValue("")}))}function Ji(i,t,e){Xi(i),Xi(t);let s=N(),r=s(()=>{let{start:n,end:o}=e.selectable.getValue()||{};i.value=n||"",t.value=o||""}),a=s(()=>{let n=i.valueAsDate,o=t.valueAsDate;n&&o?e.selectable.setValue({start:m.fromLocalDate(n).toIsoDateString(),end:m.fromLocalDate(o).toIsoDateString()}):n?e.selectable.setValue({start:m.fromLocalDate(n).toIsoDateString(),end:null}):e.selectable.setValue({start:null,end:null})});e.observable.subscribe(M.SELECTION,r),r(),i.addEventListener("change",a),t.addEventListener("change",a)}function Xi(i){x(i,"change",t=>t.stopPropagation()),x(i,"input",t=>t.stopPropagation())}var Qi=class extends V{bootWithCalendar(t){let e=t.config.mode===$.RANGE;this.calendar=t,this._disableable=new P(this),this.observable=new Kt,this.selectable=new Ke(this.calendar.selectable,this.observable),this.viewState=this.calendar.viewState,this.querySelector("ui-selected-date")?.bootWithCalendar(),this.querySelector("ui-date-picker-select")?.bootWithCalendar();let s=this.querySelector("dialog");if(!s)return;let r=this.querySelector("input");r=s?.contains(r)?null:r;let a=Array.from(this.querySelectorAll("input")).find(u=>u!==r);a=s?.contains(a)?null:a,r&&r.addEventListener("click",u=>u.preventDefault()),a&&a.addEventListener("click",u=>u.preventDefault());let n=this.querySelector("button");n=s?.contains(n)?null:n;let o=U(this.calendar,"calendar");if(this.triggerEl=r||n,!this.triggerEl)return;if(h(this.triggerEl,"role","combobox"),h(this.triggerEl,"aria-controls",o),this._disableable.onInitAndChange(u=>{u?h(this.triggerEl,"disabled",""):S(this.triggerEl,"disabled")}),this._dialogable=new Yt(s,{clickOutside:!this.hasAttribute("disable-click-outside"),triggers:[n,r,a].filter(Boolean)}),this._anchorable=new G(s,{reference:this.triggerEl,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),ir()&&(r&&this.showIOSOverlay(r),a&&this.showIOSOverlay(a)),this.querySelectorAll("button").forEach(u=>{u!==this.triggerEl&&(s.contains(u)||(h(u,"aria-controls",o),h(u,"aria-haspopup","combobox"),Nr(u,this._dialogable),x(u,"click",()=>this._dialogable.toggle())))}),dn(this,this.triggerEl,s,this._dialogable,this._anchorable),Nr(this.triggerEl,this._dialogable),bn(this,this._dialogable),fn(this.triggerEl,this._dialogable),mn(this,this.calendar.config.mode,this.observable,this.selectable,this._dialogable),e&&s&&r&&a)Zi(r),Zi(a),Ji(r,a,this);else if(s&&r){let u=r;Zi(u),Ki(u,this)}else s&&pn(n,this._dialogable);this._controllable=new F(this,{bubbles:!0}),this.calendar.addEventListener("change",u=>u.stopPropagation()),this.calendar.addEventListener("input",u=>u.stopPropagation()),this._submittable=new Q(this,{name:this.getAttribute("name"),value:this.selectable.getValue()});let l=N();this._controllable.initial(u=>u&&this.selectable.setValue(u)),this._controllable.getter(()=>this.selectable.getValue()),this._controllable.setter(l(u=>this.selectable.setValue(u))),this.observable.subscribe(M.SELECTION,l(()=>{this.dispatchEvent(new Event("select",{bubbles:!1,cancelable:!0})),this._controllable.dispatch()})),this.observable.subscribe(M.SELECTION,()=>{this._submittable.update(this.selectable.getValue())}),this.observable.subscribe(M.VIEW_CHANGE,()=>{this.dispatchEvent(new Event("navigate",{bubbles:!1,cancelable:!0}))})}showIOSOverlay(t){let e=document.createElement("button");e.setAttribute("data-flux-ios-overlay",""),e.setAttribute("data-appended",""),e.classList.add("absolute","inset-0"),t.after(e)}input(){return this.querySelector("input")}clear(){this.selectable.setValue(null)}open(){this._dialogable.setState(!0)}close(){this._dialogable.setState(!1)}trigger(){return this.triggerEl}},ts=class extends D{bootWithCalendar(){if(this.picker=this.closest("ui-date-picker"),this.querySelectorAll("[data-appended]").forEach(t=>t.remove()),!this.querySelector('template[name="date"]')){let t=document.createElement("template");t.setAttribute("name","date"),t.innerHTML="<div><slot></slot></div>",this.appendChild(t)}this.templates={placeholder:this.querySelector('template[name="placeholder"]'),date:this.querySelector('template[name="date"]')},this.picker.observable.subscribe(M.SELECTION,()=>{this.render(this.picker)}),this.render(this.picker)}render(t){if(this.templates.placeholder?.clearPlaceholder?.(),this.templates.date?.clearDate?.(),t.selectable.hasSelection()){let{cleanup:e}=et(this.templates.date,s=>s({slots:{default:t.selectable.display(this.picker.calendar.config.locale)}}));this.templates.date.clearDate=e}else{if(!this.templates.placeholder)return;let{cleanup:e}=et(this.templates.placeholder,s=>s({slots:{}}));this.templates.placeholder.clearPlaceholder=e}}},es=class extends D{bootWithCalendar(){this.picker=this.closest("ui-date-picker"),this.picker.selectable.blockSyncIf(()=>this.getBoundingClientRect().width>0),Ht(this,()=>this.picker._disableable.isDisabled(),()=>{this.picker.selectable.sync(),this.picker._dialogable.setState(!1)})}};C("date-picker",Qi);C("date-picker-select",es);C("selected-date",ts);O(({css:i})=>i`ui-date-picker { display: block; }`);O(({css:i})=>i`
/* For Chrome, Safari, Edge */
ui-date-picker input[type="date"]::-webkit-calendar-picker-indicator {
    display: none;
    -webkit-appearance: none;
}
`);function Nr(i,t){h(i,"aria-haspopup","listbox");let e=()=>{h(i,"aria-expanded",t.getState()?"true":"false"),t.getState()?h(i,"data-open",""):S(i,"data-open","")};t.onChange(()=>{e()}),e()}function dn(i,t,e,s,r){let a=()=>{Array.from([i,e]).forEach(n=>{s.getState()?h(n,"data-open",""):S(n,"data-open","")}),s.getState()&&r.reposition()};s.onChange(()=>a()),a(),s.onChange(()=>{s.getState()?i.dispatchEvent(new Event("open",{bubbles:!1,cancelable:!1})):i.dispatchEvent(new Event("close",{bubbles:!1,cancelable:!1}))})}function fn(i,t){x(i,"keydown",e=>{["ArrowDown","ArrowUp","Escape"].includes(e.key)&&(e.key==="ArrowDown"||e.key==="ArrowUp"?t.getState()||(t.setState(!0),e.preventDefault(),e.stopImmediatePropagation()):e.key==="Escape"&&t.getState()&&t.setState(!1))})}function pn(i,t){x(i,"click",()=>{t.setState(!t.getState())})}function Zi(i){x(i,"focus",()=>i.select())}function bn(i,t){let{lock:e,unlock:s}=ct(t.el);t.onChange(()=>{t.getState()?e():s()})}function mn(i,t,e,s,r){let a=t!==$.MULTIPLE;if(i.hasAttribute("close")){let n=i.getAttribute("close");a=n.split(" ").includes("auto"),n==="manual"&&(a=!1)}a&&e.subscribe(M.SELECTION,()=>{s.hasSelection()&&r.setState(!1)})}var is=class extends D{boot(){let t=this.trigger(),e=this.overlay();this._disabled=this.hasAttribute("disabled"),this._popoverable=new st(e),this._anchorable=new G(e,{reference:t,auto:!1,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0});let{lock:s,unlock:r}=ct(this._popoverable.el);this._popoverable.onChange(()=>{this._popoverable.getState()?s():r()}),x(t,"contextmenu",a=>{a.preventDefault(),this._anchorable.reposition(a.pageX,a.pageY),this._popoverable.setState(!0),this.hasAttribute("detail")&&h(e,"data-detail",this.getAttribute("detail"))}),this.hasAttribute("detail")&&h(e,"data-detail","")}trigger(){return this.firstElementChild}overlay(){if(this.hasAttribute("target")){let t=this.getAttribute("target");return document.getElementById(t)}else return this.lastElementChild.matches("[popover]")&&this.lastElementChild}};C("context",is);var me=class extends mt{groupOfType=B;boot({options:t}){t({wrap:!1,filter:!1}),this.onChanges=[]}onChange(t){this.onChanges.push(t)}activated(t){this.onChanges.forEach(e=>e())}activateFirst(){this.filterAwareWalker().first()?.use(B).activate()}activateBySearch(t){this.filterAwareWalker().find(s=>s.textContent.toLowerCase().trim().startsWith(t.toLowerCase()))?.use(B).activate()}activateSelectedOrFirst(t){if(!t||(s=>s.matches("ui-option")?getComputedStyle(s).display==="none":!1)(t)){this.filterAwareWalker().first()?.use(B).activate();return}t?.use(B).activate()}activateActiveOrFirst(){let t=this.getActive();if(!t){this.filterAwareWalker().first()?.use(B).activate();return}t?.use(B).activate()}activateActiveOrLast(){let t=this.getActive();if(!t){this.filterAwareWalker().last()?.use(B).activate();return}t?.use(B).activate()}activatePrev(){let t=this.getActive();if(!t){this.filterAwareWalker().last()?.use(B).activate();return}let e;this.options.wrap?e=this.filterAwareWalker().prevOrLast(t):e=this.filterAwareWalker().prev(t),e?.use(B).activate()}activateNext(){let t=this.getActive();if(!t){this.filterAwareWalker().first()?.use(B).activate();return}let e;this.options.wrap?e=this.filterAwareWalker().nextOrFirst(t):e=this.filterAwareWalker().next(t),e?.use(B).activate()}getActive(){return this.walker().find(t=>t.use(B).isActive())}clearActive(){this.getActive()?.use(B).deactivate()}filterAwareWalker(){let t=e=>e.matches("ui-option")?getComputedStyle(e).display==="none":!1;return W(this.el,(e,{skip:s,reject:r})=>{if(e[this.constructor.name]&&e!==this.el)return r();if(!e[this.groupOfType.name])return s();if(e.hasAttribute("disabled")||t(e))return r()})}},B=class i extends R{groupedByType=me;mount(){this.el.addEventListener("mouseenter",()=>{this.activate()}),this.el.addEventListener("mouseleave",()=>{this.deactivate()})}activate(){this.group()&&this.group().walker().each(t=>t.use(i).deactivate(!1)),!this.el.hasAttribute("disabled")&&(h(this.el,"data-active",""),this.el.scrollIntoView({block:"nearest"}),this.group()&&this.group().activated(this.el))}deactivate(t=!0){S(this.el,"data-active"),t&&this.group()&&this.group().activated(this.el)}isActive(){return this.el.hasAttribute("data-active")}};var ge=class extends mt{groupOfType=_t;boot({options:t}){t({}),this.onChanges=[],this.lastSearch=""}onChange(t){this.onChanges.push(t)}filter(t){t===""?this.walker().each(e=>{e.use(_t).unfilter()}):this.walker().each(e=>{this.matches(e,t)?e.use(_t).unfilter():e.use(_t).filter()}),this.lastSearch!==t&&this.onChanges.forEach(e=>e()),this.lastSearch=t}matches(t,e){return t.textContent.toLowerCase().trim().includes(e.toLowerCase().trim())}hasResults(){return this.walker().some(t=>!t.use(_t).isFiltered())}},_t=class extends R{groupedByType=ge;boot({options:t}){t({mirror:null,keep:!1}),this.onChanges=[]}filter(){this.options().keep||(h(this.el,"data-hidden",""),this.options().mirror&&h(this.options().mirror,"data-hidden",""))}unfilter(){S(this.el,"data-hidden"),this.options().mirror&&S(this.options().mirror,"data-hidden","")}isFiltered(){return this.el.hasAttribute("data-hidden")}};var bt=class extends mt{groupOfType=q;boot({options:t}){t({wrap:!1,ensureTabbable:!0})}mount(){this.options().ensureTabbable&&this.ensureTabbable()}focusFirst(){let t;t=t||this.walker().find(e=>e.hasAttribute("autofocus")),t=t||this.walker().find(e=>e.getAttribute("tabindex")==="0"),t=t||this.walker().find(e=>e.getAttribute("tabindex")==="-1"),t=t||this.walker().find(e=>Zs(e)),t?.focus()}focusPrev(){this.moveFocus(t=>this.options().wrap?this.walker().prevOrLast(t):this.walker().prev(t))}focusNext(){this.moveFocus(t=>this.options().wrap?this.walker().nextOrFirst(t):this.walker().next(t))}focusBySearch(t){let e=this.walker().find(s=>s.textContent.toLowerCase().trim().startsWith(t.toLowerCase()));e?.use(q).tabbable(),e?.use(q).focus()}moveFocus(t){let e=this.walker().find(r=>r.use(q).isTabbable());t(e)?.use(q).focus()}ensureTabbable(){this.walker().findOrFirst(t=>{t.use(q).isTabbable()})?.use(q).tabbable()}wipeTabbables(){this.walker().each(t=>{t.use(q).untabbable()})}untabbleOthers(t){this.walker().each(e=>{e!==t&&e.use(q).untabbable()})}walker(){return W(this.el,(t,{skip:e,reject:s})=>{if(t[this.constructor.name]&&t!==this.el)return s();if(!t[this.groupOfType.name])return e();if(t.hasAttribute("disabled"))return s()})}},q=class extends R{groupedByType=bt;boot({options:t}){t({hover:!1,disableable:null,tabbable:!1,tabbableAttr:null})}mount(){let t=this.options().disableable;if(!t)throw"Focusable requires a Disableable instance...";this.el.hasAttribute("tabindex")||(this.options().tabbable?this.tabbable():this.untabbable()),this.pauseFocusListener=this.on("focus",t.enabled(()=>{this.focus(!1)})).pause,this.on("focus",t.enabled(()=>{ie()&&h(this.el,"data-focus","")})),this.on("blur",t.enabled(()=>{S(this.el,"data-focus")})),this.options().hover&&this.on("pointerenter",t.enabled(()=>{this.group()?.untabbleOthers(this.el),this.tabbable()})),this.options().hover&&this.on("pointerleave",t.enabled(e=>{this.untabbable()}))}focus(t=!0){this.group()?.untabbleOthers(this.el),this.tabbable(),t&&this.pauseFocusListener(()=>{this.el.focus({focusVisible:!1})})}tabbable(){h(this.el,"tabindex","0"),this.options().tabbableAttr&&h(this.el,this.options().tabbableAttr,"")}untabbable(){h(this.el,"tabindex","-1"),this.options().tabbableAttr&&S(this.el,this.options().tabbableAttr)}isTabbable(){return this.el.getAttribute("tabindex")==="0"}};var ve=class extends D{boot(){h(this,"tabindex","-1"),this.hasAttribute("popover")&&this.addEventListener("lofi-close-popovers",()=>{this.hidePopover()}),h(this,"role","listbox")}},ss=class extends D{mount(){let t=this;this._disableable=new P(t,{disableWithParent:!1}),this._disableable.onInitAndChange(r=>{r?h(t,"aria-disabled","true"):S(t,"aria-disabled")});let e=U(t,"option");h(t,"role","option"),this._filterable=new _t(t,{mirror:this,keep:!!this.closest("ui-empty")||this.getAttribute("filter")==="manual"}),this._activatable=new B(t),this.hasAttribute("action")||(this._selectable=new L(t,{value:this.getValue(),label:this.getLabel(),selectedInitially:this.hasAttribute("selected")})),new MutationObserver(r=>{r.forEach(a=>{a.attributeName==="selected"&&(this.hasAttribute("selected")?this._selectable.setState(!0):this._selectable.setState(!1))})}).observe(this,{attributeFilter:["selected"]})}get selected(){return this?._selectable?this._selectable.isSelected():!1}set selected(t){if(!this?._selectable)return!1;this._selectable.setState(t)}getLabel(){return this.hasAttribute("label")?this.getAttribute("label"):this.textContent.trim()}getValue(){return this.hasAttribute("value")?this.getAttribute("value"):this.textContent.trim()}};O(({css:i})=>i`ui-options:not([popover]), ui-option { display: block; cursor: default; }`);C("options",ve);C("option",ss);var si=class extends D{boot(){if(this.querySelectorAll("[data-appended]").forEach(t=>t.remove()),!this.querySelector("template")){let t=document.createElement("template");t.setAttribute("name","placeholder"),t.innerHTML="<span>"+this.innerHTML+"</span>",this.innerHTML="",this.appendChild(t)}if(!this.querySelector('template[name="options"]')){let t=document.createElement("template");t.setAttribute("name","options"),t.innerHTML="<div><slot></slot></div>",this.appendChild(t)}if(!this.querySelector('template[name="option"]')){let t=document.createElement("template");t.setAttribute("name","option"),t.innerHTML="<div><slot></slot></div>",this.appendChild(t)}this.templates={placeholder:this.querySelector('template[name="placeholder"]'),overflow:this.querySelector('template[name="overflow"]'),options:this.querySelector('template[name="options"]'),option:this.querySelector('template[name="option"]')},this.templates.options.elsByValue=new Map,this.max=this.templates.overflow?.getAttribute("max")?this.templates.overflow.getAttribute("max"):1/0,this.selecteds=new Map,this.picker=this.closest("ui-select"),this.multiple=this.picker.hasAttribute("multiple")}mount(){queueMicrotask(()=>{this.picker._selectable.onInitAndChange(()=>{this.render(!0)});let t=this.picker.list();t&&new MutationObserver(e=>{queueMicrotask(()=>this.render())}).observe(t,{childList:!0})})}render(t){if(this.multiple){let e=this.picker.value,s=Array.from(this.selecteds.keys()).filter(n=>!e.includes(n)),r=e.filter(n=>!this.selecteds.has(n));s.forEach(n=>this.selecteds.delete(n));let a=new Map;for(let n of r){let o=this.picker._selectable.findByValue(n);if(!o){if(t)return setTimeout(()=>this.render());throw`Could not find option for value "${n}"`}a.set(n,o)}a.forEach((n,o)=>this.selecteds.set(o,n)),this.templates.placeholder?.clearPlaceholder?.(),this.templates.overflow?.clearOverflow?.(),this.templates.options?.clearOptions?.(),this.selecteds.size>0?this.renderOptions({hasOverflowed:n=>{if(this.max==="auto"){let o=!1;if(this.renderOverflow(this.selecteds.size,this.selecteds.size-n),this.clientWidth<this.scrollWidth&&(o=!0),this.templates.overflow?.clearOverflow?.(),o)return!0}return n>parseInt(this.max)},renderOverflow:n=>{this.templates?.overflow?.getAttribute("mode")!=="append"&&this.templates.options?.clearOptions?.(),this.renderOverflow(this.selecteds.size,n)}}):this.renderPlaceholder()}else{let e=this.picker.value;if(Array.from(this.selecteds.keys()).includes(e))return;this.selecteds.clear();let s=this.picker._selectable.findByValue(e);if(s)this.selecteds.set(e,s);else if(!["",null,void 0].includes(e)){if(t)return setTimeout(()=>{console.log("retrying..."),this.render()});throw`Could not find option for value "${e}"`}this.templates.placeholder?.clearPlaceholder?.(),this.templates.option?.clearOption?.(),this.selecteds.size>0?this.renderOption():this.renderPlaceholder()}}renderOptions({hasOverflowed:t,renderOverflow:e}){let s=document.createElement("div");s.style.display="contents";let r=ye(this.templates.options,{default:s});this.templates.options.after(r),this.templates.options.clearOptions=()=>{r.remove(),this.templates.options.clearOptions=()=>{}};let a=0,n=!1;for(let[l,u]of this.selecteds){let d=new DocumentFragment;d.append(...u.el.cloneNode(!0).childNodes);let b=ye(this.templates.option,{text:u.el.textContent.trim(),default:d,value:l});if(b.setAttribute("data-value",l),b.setAttribute("data-appended",""),b.deselect=()=>u.deselect(),s.appendChild(b),a++,t(a)){n=!0,s.removeChild(b),a--;break}}let o=new DocumentFragment;o.append(...s.childNodes),s.replaceWith(o),n&&e(this.selecteds.size-a)}renderOption(){for(let[t,e]of this.selecteds){let s=new DocumentFragment;s.append(...e.el.cloneNode(!0).childNodes);let r=ye(this.templates.option,{text:e.el.textContent.trim(),default:s,value:t});r.setAttribute("data-value",t),r.setAttribute("data-appended",t),r.deselect=()=>e.deselect(),this.templates.option.after(r),this.templates.option.clearOption=()=>{r.remove(),this.templates.option.clearOption=()=>{}}}}renderPlaceholder(){if(!this.templates.placeholder)return;let t=ye(this.templates.placeholder);t.setAttribute("data-appended",""),this.templates.placeholder.after(t),this.templates.placeholder.clearPlaceholder=()=>{t.remove(),this.templates.placeholder.clearPlaceholder=()=>{}}}renderOverflow(t,e){if(!this.templates.overflow)return;let s=ye(this.templates.overflow,{remainder:e,count:this.selecteds.size});s.setAttribute("data-appended",""),this.templates.overflow.after(s),this.templates.overflow.clearOverflow=()=>{s.remove(),this.templates.placeholder.clearOverflow=()=>{}}}};function ye(i,t={}){let e=i.content.cloneNode(!0);return Object.entries(t).forEach(([s,r])=>{(s==="default"?e.querySelectorAll("slot:not([name])"):e.querySelectorAll(`slot[name="${s}"]`)).forEach(n=>n.replaceWith(typeof r=="string"?document.createTextNode(r):r))}),e.firstElementChild}var Ae=class extends V{boot(){let t=this.list();this._controllable=new F(this,{bubbles:!0}),this._selectable=new z(t,{multiple:this.hasAttribute("multiple")}),this._submittable=new Q(this,{name:this.getAttribute("name"),value:this._selectable.getState()}),this._controllable.initial(s=>s&&this._selectable.setState(s)),this._controllable.getter(()=>this._selectable.getState());let e=N();this._controllable.setter(e(s=>{this._selectable.setState(s)})),this._selectable.onChange(e(()=>{this._controllable.dispatch(),this.dispatchEvent(new CustomEvent("select",{bubbles:!1}))})),this._selectable.onInitAndChange(()=>{this._submittable.update(this._selectable.getState())}),queueMicrotask(()=>{this._submittable.update(this._selectable.getState())})}mount(){this._disableable=new P(this);let t=this.input(),e=this.button(),s=this.list(),r=this.hasAttribute("multiple"),a=this.hasAttribute("autocomplete"),n=this.hasAttribute("autocomplete")&&this.getAttribute("autocomplete").trim().split(" ").includes("strict"),o=this.querySelector("ui-options")||this,l=gn(o,"options");this._activatable=new me(o,{filter:"data-hidden"}),!t&&!e&&this._disableable.onInitAndChange(p=>{p?this.removeAttribute("tabindex"):this.setAttribute("tabindex","0")}),this.hasAttribute("filter")&&this.getAttribute("filter")!=="manual"&&(this._filterable=new ge(s),this._filterable.onChange(()=>{this._activatable.clearActive(),this._filterable.hasResults()&&this._activatable.activateFirst()}),this.addEventListener("close",()=>{this._filterable&&this._filterable.filter("")}));let u=this.querySelector("[popover]:not(ui-tooltip > [popover])"),d=u?.querySelector('input:not([type="hidden"])'),b=this.querySelector('input:not([type="hidden"])');b=u?.contains(b)?null:b;let g=this.querySelector("button");if(g=u?.contains(g)?null:g,!(u||b))we(this,this._activatable),xe(this,this,this._activatable),Rr(this,this._activatable,this._selectable);else if(!u&&b){let p=b;this._disableable.onInitAndChange(c=>{c?p&&h(p,"disabled",""):p&&S(p,"disabled")}),hs(this,p,this._selectable,this._popoverable),Rr(p,this._activatable,this._selectable),qr(a,n,this,p,this._selectable,this._popoverable),cs(p),us(p),this._filterable&&ls(p,this._filterable),fs(p,this._activatable),we(p,this._activatable),xe(this,p,this._activatable),ri(this,this._activatable)}else if(u&&b){let p=b;h(p,"role","combobox"),h(p,"aria-controls",l);let c=u;this._popoverable=new st(c),this._anchorable=new G(c,{reference:p,matchWidth:!0,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),qr(a,n,this,p,this._selectable,this._popoverable),this._disableable.onInitAndChange(_=>{_?p&&h(p,"disabled",""):p&&S(p,"disabled")}),this.querySelectorAll("button").forEach(_=>{c.contains(_)||(h(_,"tabindex","-1"),h(_,"aria-controls",l),h(_,"aria-haspopup","listbox"),ai(_,this._popoverable),x(_,"click",()=>{this._popoverable.toggle(),p.focus()}))}),hs(this,p,this._selectable,this._popoverable),rs(this,p,c,this._popoverable,this._anchorable),ps(this,this._popoverable,[p]),ai(p,this._popoverable),cs(p),us(p),this._filterable&&ls(p,this._filterable),fs(p,this._activatable),wn(p,this._popoverable),os(p,this._popoverable,this._activatable,this._selectable),vn(p,this._popoverable),ns(this,this._popoverable),we(p,this._activatable),xe(this,p,this._activatable),ri(this,this._activatable),as(this._popoverable,this._activatable,this._selectable),ds(this,this._selectable,this._popoverable,r)}else if(u&&d){let p=g,c=d,_=u;h(p,"role","combobox"),h(c,"role","combobox"),h(p,"aria-controls",l),this._disableable.onInitAndChange(y=>{y?(p&&h(p,"disabled",""),c&&h(c,"disabled","")):(p&&S(p,"disabled"),c&&S(c,"disabled"))}),this._popoverable=new st(_),this._anchorable=new G(_,{reference:p,matchWidth:!0,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0,scrollY:!1}),cs(c),us(c),this._filterable&&ls(c,this._filterable),yn(c,this._popoverable),rs(this,p,_,this._popoverable,this._anchorable),ps(this,this._popoverable,[c]),ai(p,this._popoverable),hs(this,c,this._selectable,this._popoverable),os(p,this._popoverable,this._activatable,this._selectable),Ur(p,this._popoverable),ns(this,this._popoverable),we(c,this._activatable),Fr(p,this._activatable,this._popoverable),xe(this,c,this._activatable),ri(this,this._activatable),as(this._popoverable,this._activatable,this._selectable),ds(this,this._selectable,this._popoverable,r)}else if(u){let p=g,c=u;h(p,"role","combobox"),h(p,"aria-controls",l),this._disableable.onInitAndChange(_=>{_?(p&&h(p,"disabled",""),t&&h(t,"disabled","")):(p&&S(p,"disabled"),t&&S(t,"disabled"))}),this._popoverable=new st(c),this._anchorable=new G(c,{reference:p,matchWidth:!0,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),rs(this,p,c,this._popoverable,this._anchorable),ps(this,this._popoverable),ai(p,this._popoverable),os(p,this._popoverable,this._activatable,this._selectable),Ur(p,this._popoverable),fs(p,this._activatable),ns(this,this._popoverable),we(p,this._activatable),Fr(p,this._activatable,this._popoverable),xe(this,p,this._activatable),ri(this,this._activatable),as(this._popoverable,this._activatable,this._selectable),ds(this,this._selectable,this._popoverable,r)}new MutationObserver(()=>{setTimeout(()=>{if(!this._popoverable||this._popoverable.getState()){let p=this._selectable.selecteds().find(c=>!c.el._disableable.isDisabled())?.el;setTimeout(()=>{this._activatable.activateSelectedOrFirst(p)})}else this._activatable.clearActive()})}).observe(s,{childList:!0})}trigger(){return this.button()||this.input()}button(){return Array.from(this.querySelectorAll("button")).find(t=>t.nextElementSibling?.matches("[popover]"))||null}input(){return this.querySelector('input:not([type="hidden"])')}list(){return this.querySelector("ui-options")||this}clear(){this.input()&&(this.input().value="",this.input().dispatchEvent(new Event("input",{bubbles:!1})))}open(){this._popoverable.setState(!0)}close(){this._popoverable.setState(!1)}deselectLast(){!this.hasAttribute("multiple")&&this.value!==null&&(this.value=null,this.dispatchEvent(new Event("input",{bubbles:!1})),this.dispatchEvent(new Event("change",{bubbles:!1}))),this.hasAttribute("multiple")&&this.value.length!==0&&(this.value=this.value.slice(0,-1),this.dispatchEvent(new Event("input",{bubbles:!1})),this.dispatchEvent(new Event("change",{bubbles:!1})))}},bs=class extends D{boot(){h(this,"data-hidden","")}mount(){queueMicrotask(()=>{let t=this.closest("ui-autocomplete, ui-combobox, ui-select"),e=this.closest("ui-options");if(!e)return;let s=o=>o.hasAttribute("data-hidden"),r=()=>{let o;CSS.supports("selector(&)")?o=Array.from(e.querySelectorAll("& > ui-option")).filter(l=>!s(l)).length===0:o=Array.from(e.querySelectorAll(":scope > ui-option")).filter(l=>!s(l)).length===0,o?S(this,"data-hidden"):h(this,"data-hidden","")};r();let a=t._filterable;a&&a.onChange(r),new MutationObserver(o=>{setTimeout(()=>r())}).observe(e,{childList:!0})})}};C("selected",si);C("select",Ae);C("empty",bs);O(({css:i})=>i`ui-select { display: block; }`);O(({css:i})=>i`ui-selected-option { display: contents; }`);O(({css:i})=>i`ui-empty { display: block; cursor: default; }`);function we(i,t){x(i,"keydown",e=>{["ArrowDown","ArrowUp"].includes(e.key)&&(e.key==="ArrowDown"?(t.activateNext(),e.preventDefault(),e.stopPropagation()):e.key==="ArrowUp"&&(t.activatePrev(),e.preventDefault(),e.stopPropagation()))})}function Fr(i,t,e){We(i,s=>{t.activateBySearch(s),e.getState()||t.getActive()?.click()})}function xe(i,t,e){x(t,"keydown",s=>{if(s.key==="Enter"){let r=e.getActive();if(s.preventDefault(),s.stopPropagation(),!r)return;r.click(),i.dispatchEvent(new CustomEvent("action",{bubbles:!1,cancelable:!1}))}})}function ri(i,t,e=!1){x(i,e?"pointerdown":"click",s=>{if(s.target.closest("ui-option")){let r=s.target.closest("ui-option");if(r._disableable.isDisabled())return;r._selectable?.trigger(),i.dispatchEvent(new CustomEvent("action",{bubbles:!1,cancelable:!1})),s.preventDefault(),s.stopPropagation()}})}function Rr(i,t,e){x(i,"focus",()=>{let s=e.selecteds().find(r=>!r.el._disableable.isDisabled())?.el;t.activateSelectedOrFirst(s)}),x(i,"blur",()=>{t.clearActive()})}function gn(i){let t=U(i,"options");return h(i,"role","listbox"),t}function ai(i,t){h(i,"aria-haspopup","listbox");let e=()=>{h(i,"aria-expanded",t.getState()?"true":"false"),t.getState()?h(i,"data-open",""):S(i,"data-open","")};t.onChange(()=>{e()}),e()}function rs(i,t,e,s,r){let a=()=>{Array.from([i,e]).forEach(n=>{s.getState()?h(n,"data-open",""):S(n,"data-open","")}),s.getState()?r.reposition():r.cleanup()};s.onChange(()=>a()),a(),s.onChange(()=>{s.getState()?i.dispatchEvent(new Event("open",{bubbles:!1,cancelable:!1})):i.dispatchEvent(new Event("close",{bubbles:!1,cancelable:!1}))})}function as(i,t,e){i.onChange(()=>{if(i.getState()){let s=e.selecteds().find(r=>!r.el._disableable.isDisabled())?.el;setTimeout(()=>{t.activateSelectedOrFirst(s)})}else t.clearActive()})}function ns(i,t){x(i,"keydown",e=>{e.key==="Escape"&&t.getState()&&(t.setState(!1),e.preventDefault(),e.stopImmediatePropagation())})}function os(i,t){x(i,"keydown",e=>{["ArrowDown","ArrowUp"].includes(e.key)&&(e.key==="ArrowDown"||e.key==="ArrowUp")&&(t.getState()||(t.setState(!0),e.preventDefault(),e.stopImmediatePropagation()))})}function vn(i,t){x(i,"click",()=>{t.getState()||(t.setState(!0),i.focus())})}function Ur(i,t){x(i,"click",()=>{t.setState(!t.getState()),i.focus()})}function yn(i,t){t.onChange(()=>{t.getState()&&setTimeout(()=>i.focus())})}function ls(i,t){t&&x(i,"input",e=>{t.filter(e.target.value)})}function us(i){x(i,"focus",()=>i.select())}function cs(i){x(i,"change",t=>t.stopPropagation()),x(i,"input",t=>t.stopPropagation())}function wn(i,t){x(i,"keydown",e=>{(/^[a-zA-Z0-9]$/.test(e.key)||e.key==="Backspace")&&(t.getState()||t.setState(!0))})}function hs(i,t,e,s){if(!i.hasAttribute("clear"))return;let a=b=>{t.value=b,t.dispatchEvent(new Event("input",{bubbles:!1}))},n=i.getAttribute("clear"),o=n===""||n.split(" ").includes("action"),l=n===""||n.split(" ").includes("select"),u=n===""||n.split(" ").includes("close"),d=n===""||n.split(" ").includes("esc");n==="none"&&(o=l=u=d=!1),o?i.addEventListener("action",b=>{a("")}):l&&e.onChange(()=>{queueMicrotask(()=>a(""))}),u&&s.onChange(()=>{s.getState()||a("")}),d&&x(t,"keydown",b=>{b.key==="Escape"&&a("")})}function ds(i,t,e,s){let r=!s,a=!s;if(i.hasAttribute("close")){let n=i.getAttribute("close");r=n===""||n.split(" ").includes("action"),a=n.split(" ").includes("select"),n==="none"&&(r=a=!1)}r?i.addEventListener("action",n=>{e.setState(!1)}):a&&t.onChange(()=>{e.setState(!1)})}function fs(i,t){t.onChange(()=>{let e=t.getActive();e?h(i,"aria-activedescendant",e.id):S(i,"aria-activedescendant")})}function qr(i,t,e,s,r,a){if(!i){h(s,"autocomplete","off"),h(s,"aria-autocomplete","none");return}let n=o=>{s.value=o,s.dispatchEvent(new Event("input",{bubbles:!1}))};h(s,"autocomplete","off"),h(s,"aria-autocomplete","list"),r.setState(s.value),queueMicrotask(()=>{r.onInitAndChange(()=>{s.value=r.selectedTextValue()})}),e.addEventListener("action",o=>{n(r.selectedTextValue())}),t&&a.onChange(()=>{a.getState()||n(r.selectedTextValue())})}function ps(i,t,e=[]){let{lock:s,unlock:r}=ct(t.el,!1,e);t.onChange(()=>{t.getState()?s():r()})}var Se=class i extends D{boot(){if(this._focusable=new bt(this,{wrap:!1,ensureTabbable:!1}),x(this,"keydown",t=>{["ArrowDown"].includes(t.key)?(t.target===this?this._focusable.focusFirst():this._focusable.focusNext(),t.preventDefault(),t.stopPropagation()):["ArrowUp"].includes(t.key)&&(t.target===this?this._focusable.focusFirst():this._focusable.focusPrev(),t.preventDefault(),t.stopPropagation())}),We(this,t=>this._focusable.focusBySearch(t)),this.hasAttribute("popover")&&this.addEventListener("lofi-close-popovers",()=>{this.hasAttribute("keep-open")||setTimeout(()=>this.hidePopover(),50)}),this.parentElement.localName==="ui-dropdown"){let t=this.parentElement;x(t.trigger(),"keydown",e=>{e.key==="ArrowDown"&&(this.fromArrowDown=!0,this.showPopover(),e.preventDefault(),e.stopPropagation())})}h(this,"role","menu"),h(this,"tabindex","-1")}mount(){this.initializeMenuItems(),new MutationObserver(e=>{this.initializeMenuItems()}).observe(this,{childList:!0,subtree:!0})}onPopoverShow(){queueMicrotask(()=>{this.fromArrowDown?(this._focusable.focusFirst(),this.fromArrowDown=!1):this.focus()})}onPopoverHide(){this._focusable.wipeTabbables()}initializeMenuItems(){this.walker().each(t=>{t._disableable||xn(t)})}walker(){return W(this,(t,{skip:e,reject:s})=>{if(t instanceof i||t instanceof Ae)return s();if(!["a","button"].includes(t.localName))return e()})}},ms=class extends D{boot(){}},gs=class extends D{boot(){this._disabled=this.hasAttribute("disabled"),this._disableable=new P(this);let t=this;if(this._disabled&&(h(t,"disabled",""),h(t,"aria-disabled","true")),U(t,"menu-checkbox"),h(t,"role","menuitemcheckbox"),this._disabled)return;t._focusable=new q(t,{disableable:this._disableable,hover:!0,tabbableAttr:"data-active"}),t._selectable=new L(t,{toggleable:!0,value:this.hasAttribute("value")?this.getAttribute("value"):t.textContent.trim(),label:this.hasAttribute("label")?this.getAttribute("label"):t.textContent.trim(),dataAttr:"data-checked",ariaAttr:"aria-checked",selectedInitially:this.hasAttribute("checked")}),this._controllable=new F(this),this._controllable.initial(s=>s&&t._selectable.setState(s)),this._controllable.getter(()=>t._selectable.getState());let e=N();this._controllable.setter(e(s=>{this._selectable.setState(s)})),this._selectable.onChange(e(()=>{this._controllable.dispatch()})),x(t,"click",()=>{this.hasAttribute("keep-open")||this.dispatchEvent(new CustomEvent("lofi-close-popovers",{bubbles:!0})),t._selectable.press()}),xs(t)}},vs=class extends D{boot(){this._disabled=this.hasAttribute("disabled"),this._disableable=new P(this);let t=this;this._disabled&&(h(t,"disabled",""),h(t,"aria-disabled","true")),U(t,"menu-radio"),h(t,"role","menuitemradio"),!this._disabled&&(t._focusable=new q(t,{disableable:this._disableable,hover:!0,tabbableAttr:"data-active"}),t._selectable=new L(t,{toggleable:!1,value:this.hasAttribute("value")?this.getAttribute("value"):t.textContent.trim(),label:this.hasAttribute("label")?this.getAttribute("label"):t.textContent.trim(),dataAttr:"data-checked",ariaAttr:"aria-checked",selectedInitially:this.hasAttribute("checked")}),x(t,"click",()=>{this.hasAttribute("keep-open")||this.dispatchEvent(new CustomEvent("lofi-close-popovers",{bubbles:!0})),t._selectable.press()}),xs(t))}},ys=class extends D{boot(){this._selectable=new z(this),this._controllable=new F(this),h(this,"role","group"),this._controllable.initial(e=>e&&this._selectable.setState(e)),this._controllable.getter(()=>this._selectable.getState());let t=N();this._controllable.setter(t(e=>{this._selectable.setState(e)})),this._selectable.onChange(t(()=>{this._controllable.dispatch()})),x(this,"lofi-close-popovers",e=>{this.hasAttribute("keep-open")&&(e.preventDefault(),e.stopPropagation())})}},ws=class extends D{boot(){this._selectable=new z(this,{multiple:!0}),this._controllable=new F(this),h(this,"role","group"),this._controllable.initial(e=>e&&this._selectable.setState(e)),this._controllable.getter(()=>this._selectable.getState());let t=N();this._controllable.setter(t(e=>{this._selectable.setState(e)})),this._selectable.onChange(t(()=>{this._controllable.dispatch()}))}};O(({css:i})=>i`ui-menu[popover]:popover-open { display: block; }`);O(({css:i})=>i`ui-menu[popover].\:popover-open { display: block; }`);O(({css:i})=>i`ui-menu-checkbox, ui-menu-radio { cursor: default; display: contents; }`);C("menu",Se);C("submenu",ms);C("menu-checkbox",gs);C("menu-radio",vs);C("menu-radio-group",ys);C("menu-checkbox-group",ws);function xs(i){x(i,"keydown",t=>{t.key==="Enter"&&(i.click(),t.preventDefault(),t.stopPropagation())}),x(i,"keydown",t=>{t.key===" "&&(t.preventDefault(),t.stopPropagation())}),x(i,"keyup",t=>{t.key===" "&&(i.click(),t.preventDefault(),t.stopPropagation())})}function xn(i){i._disableable=new P(i),i._disabled=i.hasAttribute("disabled");let t=i.querySelector("a"),e=i,s=i.parentElement.matches("ui-submenu")&&i.parentElement.querySelector("ui-menu[popover]"),r=t||e;if(i._disabled&&(h(r,"disabled",""),h(r,"aria-disabled","true")),U(r,"menu-item"),h(r,"role","menuitem"),!i._disabled)if(r._focusable=new q(r,{disableable:i._disableable,hover:!0,tabbableAttr:"data-active"}),!s)i.hasAttribute("disabled")||x(i,"click",()=>{i.hasAttribute("keep-open")||i.dispatchEvent(new CustomEvent("lofi-close-popovers",{bubbles:!0}))}),xs(e);else{s._popoverable=new st(s,{triggers:[e]}),s._anchorable=new G(s,{reference:e,position:s.hasAttribute("position")?s.getAttribute("position"):re()?"left start":"right start",gap:s.hasAttribute("gap")?s.getAttribute("gap"):"-5",crossAxis:!0}),e.addEventListener("click",n=>{s._popoverable.setState(!0)});let{clear:a}=Bt(e,s,{gain(){s._popoverable.setState(!0)},lose(){s._popoverable.setState(!1)},focusable:!1,useSafeArea:!0});s._popoverable.onChange(()=>{s._popoverable.getState()||(a(),s._focusable.wipeTabbables()),s._popoverable.getState()?s._anchorable.reposition():s._anchorable.cleanup()}),x(e,"keydown",n=>{n.key==="Enter"&&(s._popoverable.setState(!0),setTimeout(()=>s._focusable.focusFirst()))}),x(e,"keydown",n=>{n.key==="ArrowRight"&&(s._popoverable.setState(!0),setTimeout(()=>s._focusable.focusFirst()))}),x(s,"keydown",n=>{n.key==="ArrowLeft"&&(s._popoverable.setState(!1),e.focus(),n.stopPropagation())})}}var As=class i extends D{mount(){this._focusable=new bt(this,{wrap:!0}),this._disableable=new P(this);let t=[];this._disableable.onInitAndChange(e=>{e?(h(this,"aria-disabled","true"),this.walker().each(s=>{s.hasAttribute("disabled")||(h(s,"disabled","true"),h(s,"aria-disabled","true"),t.push(()=>{se(s,"disabled"),se(s,"aria-disabled")}))})):(se(this,"aria-disabled"),t.forEach(s=>s()),t=[])}),x(this,"keydown",e=>{["ArrowRight"].includes(e.key)?(e.target===this?this._focusable.focusFirst():this._focusable.focusNext(),e.preventDefault(),e.stopPropagation()):["ArrowLeft"].includes(e.key)&&(e.target===this?this._focusable.focusFirst():this._focusable.focusPrev(),e.preventDefault(),e.stopPropagation())}),h(this,"role","toolbar"),this.initializeToolbarItems()}initializeToolbarItems(){this.walker().each(t=>{t._disableable||An(t)})}walker(){return W(this,(t,{skip:e,reject:s})=>{if(t instanceof i||t.hasAttribute("popover")||t instanceof Se||t instanceof ve)return s();if(!["a","button"].includes(t.localName))return e()})}};C("toolbar",As);function An(i){i._disableable=new P(i),i._disabled=i.hasAttribute("disabled");let s=i.querySelector("a")||i;i._disabled&&(h(s,"disabled",""),h(s,"aria-disabled","true")),!i._disabled&&(s._focusable=new q(s,{disableable:i._disableable}))}var Ss=class extends D{boot(){let t=this.hasAttribute("label")?"label":"description",e=this.button(),s=this.overlay();if(e){if(!s)return}else return console.warn("ui-tooltip: no trigger element found",this);s._popoverable=new st(s,{scope:"tooltip"}),s._anchorable=new G(s,{reference:e,position:this.hasAttribute("position")?this.getAttribute("position"):void 0,gap:this.hasAttribute("gap")?this.getAttribute("gap"):void 0,offset:this.hasAttribute("offset")?this.getAttribute("offset"):void 0}),s._popoverable.onChange(()=>{s._popoverable.getState()?s._anchorable.reposition():s._anchorable.cleanup()}),this._disableable=new P(this);let r;this._disableable.onInitAndChange(l=>{r&&(r(),r=null),l||(r=Bt(e,s,{gain(){s._popoverable.setState(!0)},lose(){s._popoverable.setState(!1)},focusable:!0,useSafeArea:!1}).remove)});let a=U(s,"tooltip"),n=this.hasAttribute("interactive"),o=this.hasAttribute("label")||e.textContent.trim()==="";n?(h(e,"aria-controls",a),h(e,"aria-expanded","false"),s._popoverable.onChange(()=>{s._popoverable.getState()?h(e,"aria-expanded","true"):h(e,"aria-expanded","false")})):(o?h(e,"aria-labelledby",a):h(e,"aria-describedby",a),h(s,"aria-hidden","true")),h(s,"role","tooltip")}button(){return this.firstElementChild}overlay(){return this.lastElementChild!==this.button()&&this.lastElementChild.tagName!=="TEMPLATE"&&this.lastElementChild}};C("tooltip",Ss);var _s=class extends V{boot(){let t=this;this._disableable=new P(this),this._selectable=new L(t,{toggleable:!0,dataAttr:"data-checked",ariaAttr:"aria-checked",value:this.hasAttribute("value")?this.getAttribute("value"):null,label:this.hasAttribute("label")?this.getAttribute("label"):null,selectedInitially:this.hasAttribute("checked")}),this._submittable=new Q(this,{name:this.getAttribute("name"),value:this.getAttribute("value")??"on",includeWhenEmpty:!1,shouldUpdateValue:!1}),this.value=this._selectable.getValue(),this._detangled=N(),this._selectable.onChange(this._detangled(()=>{this.dispatchEvent(new Event("input",{bubbles:!1,cancelable:!0})),this.dispatchEvent(new Event("change",{bubbles:!1,cancelable:!0}))})),h(t,"role","switch"),this._selectable.onInitAndChange(()=>{this._submittable.update(this._selectable.getState())}),this._disableable.onInitAndChange(e=>{e?S(t,"tabindex","0"):h(t,"tabindex","0")}),x(t,"click",this._disableable.disabled(e=>{e.preventDefault(),e.stopPropagation()}),{capture:!0}),x(t,"click",this._disableable.enabled(e=>{this._selectable.press()})),x(t,"keydown",this._disableable.enabled(e=>{e.key==="Enter"&&(this._selectable.press(),e.preventDefault(),e.stopPropagation())})),x(t,"keydown",this._disableable.enabled(e=>{e.key===" "&&(e.preventDefault(),e.stopPropagation())})),x(t,"keyup",this._disableable.enabled(e=>{e.key===" "&&(this._selectable.press(),e.preventDefault(),e.stopPropagation())})),Sn(t)}get checked(){return this._selectable.isSelected()}set checked(t){this._detangled(()=>{t?this._selectable.select():this._selectable.deselect()})()}};function Sn(i){i.closest("label")?.addEventListener("click",t=>{i.contains(t.target)||i.click()})}O(({css:i})=>i`ui-switch { display: inline-block; user-select: none; }`);C("switch",_s);var ks=class i extends D{mount(){this.control=this.fieldWalker().find(t=>this.isControl(t)),this.control}associateLabelWithControl(t){t&&this.label&&(this.control=t,!this.control.hasAttribute("aria-labelledby")&&(h(this.elOrButton(this.control),"aria-labelledby",this.label.id),this.control&&!(this.control instanceof V)&&this.hasAttribute("disabled")&&this.control.setAttribute("disabled","")))}associateDescriptionWithControl(t){t&&this.description&&(this.control=t,!this.control.hasAttribute("aria-describedby")&&h(this.elOrButton(this.control),"aria-describedby",this.description.id))}associateLabel(t){this.label=t,x(t,"click",e=>{["a","button"].includes(e.target.localName)||this.focusOrTogggle(this.control)}),this.control&&this.associateLabelWithControl(this.control)}associateDescription(t){this.description=t,this.control&&this.associateDescriptionWithControl(this.control)}fieldWalker(){return W(this,(t,{skip:e,reject:s})=>{if(t instanceof i&&t!==this||t.parentElement.localName==="ui-editor"&&t!==this)return s()})}isControl(t){return!!(t instanceof V||t.matches("input, textarea, select"))}focusOrTogggle(t){if(!t||t.disabled||t.hasAttribute("disabled"))return;t.localName==="input"&&["checkbox","radio"].includes(t.type)||["ui-switch","ui-radio","ui-checkbox"].includes(t.localName)?(t.click(),t.focus()):t.localName==="input"&&["file"].includes(t.type)?t.click():["ui-select","ui-date-picker"].includes(t.localName)?t.trigger()?.focus():(["ui-editor"].includes(t.localName),t.focus())}elOrButton(t){return t instanceof D&&t.firstElementChild instanceof HTMLButtonElement?t.firstElementChild:t}},Es=class extends D{mount(){U(this,"label"),h(this,"aria-hidden","true"),this.closest("ui-field")?.associateLabel(this)}},Cs=class extends D{mount(){U(this,"description"),h(this,"aria-hidden","true"),this.closest("ui-field")?.associateDescription(this)}};O(({css:i})=>i`
    ui-label { display: inline-block; cursor: default; }
    ui-description { display: block; }
`);C("field",ks);C("label",Es);C("description",Cs);var ni=class{constructor(){this.subscribers=[]}subscribe(t,e){this.subscribers.push({reason:t,callback:e})}notify(t,e){this.subscribers.forEach(({reason:s,callback:r})=>{t===s&&r(e)})}};function Yr(i){let t={time:Tn,linear:kn,categorical:_n},e=Date.now(),s=Date.now(),r={},a=(o,l,u)=>{let d=`${o}-${l}`;for(let b in r)b.startsWith(`${o}-`)&&!b.endsWith(String(l))&&delete r[b];return r[d]||(r[d]=u()),r[d]},n={data:[],width:i.width,height:i.height,inset:i.inset,axes:{x:{axis:"x",key:i.axes.x.key,format:i.axes.x.format,inset:{start:0,end:0},position:i.axes.x.position||"bottom",tickStart:i.axes.x.tickStart,tickEnd:i.axes.x.tickEnd,tickCount:i.axes.x.tickCount,tickStep:i.axes.x.tickStep,tickValues:i.axes.x.tickValues,tickSuffix:i.axes.x.tickSuffix,tickPrefix:i.axes.x.tickPrefix,get rawValues(){return a("x.rawValues",e,()=>n.data.map(o=>o[this.key]))},get type(){return a("x.type",e,()=>i.axes.x.scale||(this.rawValues.every(o=>Cn(o))?"time":"categorical"))},get interval(){return a("x.interval",e,()=>i.axes.x.interval||"auto")},get values(){return a("x.values",e,()=>this.rawValues.map(o=>this.type==="time"?li(o):this.type==="linear"?Number(o):o))},get ticks(){return a("x.ticks",e,()=>{let o=Wr(n.data,this,oi(this.type,this.values)),l=Vr(o,this.type,this.format,this.tickSuffix,this.tickPrefix,this.interval);return o.map((u,d)=>({value:u,label:l[d]}))})},get domain(){return a("x.domain",e,()=>oi(this.type,[...this.ticks.map(o=>o.value),...this.values]))},get range(){return a("x.range",s,()=>[n.inset.left+this.inset.start,n.width-n.inset.right-this.inset.end])},get scale(){return a("x.scale",s+e,()=>t[this.type](this.domain,this.range,this.values))}},y:{axis:"y",keys:i.axes.y.keys,format:i.axes.y.format,inset:{start:0,end:0},position:i.axes.y.position||"left",tickStart:i.axes.y.tickStart,tickEnd:i.axes.y.tickEnd,tickCount:i.axes.y.tickCount,tickStep:i.axes.y.tickStep,tickValues:i.axes.y.tickValues,tickSuffix:i.axes.y.tickSuffix,tickPrefix:i.axes.y.tickPrefix,get values(){return a("y.values",e,()=>n.data.flatMap(o=>this.keys.reduce((l,u)=>(o[u]===void 0||l.push(o[u]),l),[])))},get type(){return a("y.type",e,()=>i.axes.y.scale||"linear")},get interval(){return a("y.interval",e,()=>i.axes.y.interval||"auto")},get ticks(){return a("y.ticks",e,()=>{let o=Wr(n.data,this,oi(this.type,this.values)),l=Vr(o,this.type,this.format,this.tickSuffix,this.tickPrefix,this.interval);return o.map((u,d)=>({value:u,label:l[d]}))})},get domain(){return a("y.domain",e,()=>oi(this.type,[...this.ticks.map(o=>o.value),...this.values]))},get range(){return a("y.range",s,()=>[n.height-n.inset.bottom-this.inset.end,n.inset.top+this.inset.start])},get scale(){return a("y.scale",s+e,()=>t[this.type](this.domain,this.range,this.values))}}},get series(){return a("series",e+s,()=>this.axes.y.keys.reduce((o,l)=>{if(!n.data[0].hasOwnProperty(l))return console.warn(`ui-chart: series field "${l}" does not exist`),o;let u=n.data.map(b=>({x:n.axes.x.scale(b[n.axes.x.key]),y:n.axes.y.scale(b[l]),datum:b})),d={field:l,values:n.data.map(b=>b[l]),linePath(b="smooth"){let g=this.points.map(v=>[v.x,v.y]);return{smooth:Br,none:Hr}[b](g)},areaPath(b="smooth"){return`${{smooth:Br,none:Hr}[b](this.points.map(p=>[p.x,p.y]))} L${n.axes.x.scale(n.axes.x.domain[1])},${n.axes.y.scale(n.axes.y.domain[0])} L${n.axes.x.scale(n.axes.x.domain[0])},${n.axes.y.scale(n.axes.y.domain[0])} Z`},points:u};return o[l]=d,o},{}))},closestXPoint(o){return this.closestXPoints(o)[0]},closestXPoints(o){return a("closestXPoints",e+s+o,()=>{let l=[],u=1/0;return Object.values(this.series).forEach(d=>{let b=null;d.points.forEach(g=>{let v=Math.abs(g.x-o);v<u&&(u=v,b=g)}),b&&l.push(b)}),l})},updateDimensions(o,l){this.width=o.width,this.height=o.height,this.inset=l,s=Date.now()},updateData(o){let l=JSON.parse(JSON.stringify(o));l[0]!==void 0&&typeof l[0]!="object"&&(l=l.map((u,d)=>({value:u}))),l.every(u=>u.index)||l.forEach((u,d)=>{u.index=d}),this.data=l,e=Date.now()}};return n.updateData(i.data),n}function oi(i,t){let e=[...new Set(t)];return i==="time"?Dn(e):i==="linear"?(e.sort((s,r)=>Number(s)-Number(r)),e.length===1?e[0]===0?[Number(e[0]),1]:e[0]>0?[0,Number(e[0])]:[Number(e[0]),0]:[Number(e[0]),Number(e[e.length-1])]):[e[0],e[e.length-1]]}function Wr(i,t,e){let s=[];if(t.type==="linear"){if(t.tickValues)return t.tickValues;let[r,a]=e,n=t.tickCount?Number(t.tickCount):5,o=t.tickStart===0||t.tickStart==="0"?0:t.tickStart||"auto",l=t.tickEnd===0||t.tickEnd==="0"?0:t.tickEnd||"auto";o==="auto"&&r>0&&a>0&&(r=0),l!=="auto"&&l!=="max"&&!isNaN(Number(l))&&(a=Number(l));let u=Number(t.interval),d;if(t.interval==="auto"||Number.isNaN(u)){let p=(a-r)/(n-1),c=Math.pow(10,Math.floor(Math.log10(p))),_=p/c;_<1.5?d=1:_<3?d=2:_<7?d=5:d=10,d*=c}else d=u;let b;o==="auto"?b=Math.floor(r/d)*d:o==="min"?b=r:b=Number(o);let g=b;for(;g<=a+d*.1;)g>=r-d*.1&&s.push(g),g+=d;if(l==="max")Math.abs(s[s.length-1]-e[1])>d*.1&&s.push(e[1]);else if(l!=="auto"&&!isNaN(Number(l))){let v=Number(l),p=s.length;s=Array.from({length:p},(c,_)=>b+(v-b)*(_/(p-1)))}if(s.length>n*2){let v=Math.ceil(s.length/n);s=s.filter((p,c)=>c%v===0)}}else if(t.type==="time"){let[r,a]=$r(e[0],e[1],t.tickCount,t.interval);return a}else if(t.type==="categorical"&&(i.forEach(r=>{let a=r[t.key];s.push(a)}),t.tickCount&&s.length>t.tickCount)){let r=Math.ceil(s.length/t.tickCount);s=s.filter((a,n)=>n%r===0)}return s}function Vr(i,t,e,s,r,a){let n=[];return t==="time"?(e||([e]=$r(i[0],i[i.length-1],null,a)),e={...e,timeZone:"UTC"},n=i.map(o=>new Date(o).toLocaleString(ht(),e))):t==="linear"?e?n=i.map(o=>o.toLocaleString(ht(),e)):n=i.map(o=>o.toLocaleString(ht())):n=i.map(o=>o+""),r&&(n=n.map(o=>r+o)),s&&(n=n.map(o=>o+s)),n}function _n(i,t,e){let s=[...new Set(e)],r=(t[1]-t[0])/(s.length-1),a=new Map(s.map((n,o)=>[n,t[0]+o*r]));return function(n){if(n!=null)return a.get(n)}}function kn(i,t){let e=i[1]-i[0],s=t[1]-t[0];return function(r){return t[0]+(r-i[0])*(s/e)}}function Br(i){if(i.length<2)return"";let t=l=>l<0?-1:1,e=(l,u,d,b,g,v)=>{let p=d-l,c=g-d,_=(b-u)/(p||c<0&&-0),y=(v-b)/(c||p<0&&-0),f=(_*c+y*p)/(p+c);return(t(_)+t(y))*Math.min(Math.abs(_),Math.abs(y),.5*Math.abs(f))||0},s=(l,u,d,b,g)=>{let v=d-l;return v?(3*(b-u)/v-g)/2:g},r=`M${i[0][0]},${i[0][1]}`;if(i.length===2)return r+`L${i[1][0]},${i[1][1]}`;for(let l=0;l<i.length-2;l++){let u=i[l],d=i[l+1];if(u[0]===d[0]&&u[1]===d[1])continue;let b=i[l+2],g=e(u[0],u[1],d[0],d[1],b[0],b[1]),v=(d[0]-u[0])/3,p=u[0]+v,c=u[1]+v*(l===0?s(u[0],u[1],d[0],d[1],g):i[l-1]?e(i[l-1][0],i[l-1][1],u[0],u[1],d[0],d[1]):g),_=d[0]-v,y=d[1]-v*g;r+=`C${p},${c} ${_},${y} ${d[0]},${d[1]}`}let a=i.length,n=i[a-1],o=i[a-2];if(!(n[0]===o[0]&&n[1]===o[1])){let l=e(i[a-3][0],i[a-3][1],o[0],o[1],n[0],n[1]),u=(n[0]-o[0])/3,d=o[0]+u,b=o[1]+u*l,g=n[0]-u,v=n[1]-u*s(o[0],o[1],n[0],n[1],l);r+=`C${d},${b} ${g},${v} ${n[0]},${n[1]}`}return r}function En(i,t=.05){if(!i||i.length<2)return"";let e=`M ${i[0][0]} ${i[0][1]}`;for(let s=1;s<i.length;s++){let r=i[s],a=i[s-1],n=i[s-2]||a,o=i[s+1]||r,l=a[0]+(o[0]-n[0])*t,u=a[1]+(o[1]-n[1])*t,d=r[0]-(o[0]-n[0])*t,b=r[1]-(o[1]-n[1])*t;e+=` C ${l} ${u}, ${d} ${b}, ${r[0]} ${r[1]}`}return e}function Hr(i){return En(i,0)}function Cn(i){return i instanceof Date||typeof i=="string"&&i.includes("-")&&!isNaN(Date.parse(i))}function Dn(i){return i.sort((t,e)=>typeof t=="string"?t.localeCompare(e):t-e),[li(i[0]),li(i[i.length-1])]}function Tn(i,t){let e=new Date(i[0]).getTime(),r=new Date(i[1]).getTime()-e,a=t[1]-t[0];return function(n){if(!n)return;let o=li(n);if(isNaN(o.getTime()))return;let l=(o.getTime()-e)/r;return t[0]+l*a}}function $r(i,t,e,s){let r=i,a=t,l=(a-r)/1e3/60,u=l/60,d=u/24,b=d/30,g=d/365,v,p,c;switch(s){case"second":v={hour:"numeric",minute:"numeric",second:"numeric"},p=f=>new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate(),f.getUTCHours(),f.getUTCMinutes(),f.getUTCSeconds()+1)),c=new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds()));break;case"minute":v={hour:"numeric",minute:"numeric"},p=f=>new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate(),f.getUTCHours(),f.getUTCMinutes()+1)),c=new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes()));break;case"hour":v={hour:"numeric",minute:"numeric"},p=f=>new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate(),f.getUTCHours()+1)),c=new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours()));break;case"day":v={day:"numeric"},p=f=>new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()+1)),c=new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()));break;case"week":v={day:"numeric",month:"short"},p=f=>new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth(),f.getUTCDate()+7)),c=new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()));break;case"month":v={month:"short",day:"numeric"},p=f=>new Date(Date.UTC(f.getUTCFullYear(),f.getUTCMonth()+1,1)),c=new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),1));break;case"year":v={year:"numeric"},p=f=>new Date(Date.UTC(f.getUTCFullYear()+1,0,1)),c=new Date(Date.UTC(r.getUTCFullYear(),0,1));break;default:}if(!p)if(u<1){v={hour:"numeric",minute:"numeric"};let f=e?Math.max(1,Math.floor(l/(e-1))):1;p=w=>new Date(Date.UTC(w.getUTCFullYear(),w.getUTCMonth(),w.getUTCDate(),w.getUTCHours(),w.getUTCMinutes()+f)),c=new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours()))}else if(d<1){v={hour:"numeric"};let f=e?Math.max(1,Math.floor(u/(e-1))):1;p=w=>new Date(Date.UTC(w.getUTCFullYear(),w.getUTCMonth(),w.getUTCDate(),w.getUTCHours()+f)),c=new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),0))}else if(d<=7){v={weekday:"short",hour:"numeric"};let f=e?Math.max(1,Math.floor(u/(e-1))):6;p=w=>new Date(Date.UTC(w.getUTCFullYear(),w.getUTCMonth(),w.getUTCDate(),w.getUTCHours()+f)),c=new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),0))}else if(d<=30){v={month:"short",day:"numeric"};let f=e?Math.max(1,Math.floor(d/(e-1))):1;p=w=>new Date(Date.UTC(w.getUTCFullYear(),w.getUTCMonth(),w.getUTCDate()+f)),c=new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()))}else if(b<=6){v={month:"short",day:"numeric"};let f=e?Math.max(1,Math.floor(d/(e-1))):7;p=w=>new Date(Date.UTC(w.getUTCFullYear(),w.getUTCMonth(),w.getUTCDate()+f)),c=new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()))}else if(g<2){v={month:"short"};let f=e?Math.max(1,Math.floor(b/(e-1))):1;p=w=>new Date(Date.UTC(w.getUTCFullYear(),w.getUTCMonth()+f,1)),c=new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth()))}else{v={year:"numeric"};let f=e?Math.max(1,Math.floor(g/(e-1))):1;p=w=>new Date(Date.UTC(w.getUTCFullYear()+f,0,1)),c=new Date(Date.UTC(r.getUTCFullYear(),0,1))}let _=[r],y=r;for(;y<=a;)y=p(y),y<=a&&_.push(new Date(y.getTime()));return[v,_]}function li(i){if(i instanceof Date)return i;let{year:t,month:e,day:s,hour:r,minute:a,second:n,millisecond:o}=Mn(i);return new Date(Date.UTC(t,e-1,s,r,a,n,o))}function Mn(i){let t=i.match(/^(\d{4})(?:-(\d{2}))?(?:-(\d{2}))?(?:T(\d{2}):(\d{2}):(\d{2})(?:\.(\d+))?(Z)?)?$/);if(!t)throw new Error("Invalid date format");return{year:t[1]?parseInt(t[1],10):null,month:t[2]?parseInt(t[2],10):null,day:t[3]?parseInt(t[3],10):null,hour:t[4]?parseInt(t[4],10):null,minute:t[5]?parseInt(t[5],10):null,second:t[6]?parseInt(t[6],10):null,millisecond:t[7]?parseInt(t[7].padEnd(3,"0"),10):null,utc:!!t[8]}}var Ds=class extends HTMLElement{constructor(){super(),this.querySelectorAll("[data-appended]").forEach(s=>s.remove());let t=this.querySelector('template[name="svg"]'),e=Ve(t);t.after(e),this.init(t,e)}init(t,e){this._data=this.hasAttribute("value")?JSON.parse(this.getAttribute("value")):[],this._observable=new ni,this._selectable={getState:()=>this._data,setState:y=>{this._data=y,this._observable.notify("data",this._data)}},this._controllable=new F(this),this._controllable.initial(y=>y&&this._selectable.setState(y)),this._controllable.getter(()=>this._selectable.getState()),this._controllable.setter(y=>{this._selectable.setState(y)});let s={svg:t,lines:{},areas:{},points:{},cursor:t.content.querySelector('template[name="cursor"]'),zeroLine:t.content.querySelector('template[name="zero-line"]'),axes:{x:{template:t.content.querySelector('template[name="axis"][axis="x"]'),axisLine:t.content.querySelector('template[name="axis"][axis="x"] template[name="axis-line"]'),gridLine:t.content.querySelector('template[name="axis"][axis="x"] template[name="grid-line"]'),tickMark:t.content.querySelector('template[name="axis"][axis="x"] template[name="tick-mark"]'),tickLabel:t.content.querySelector('template[name="axis"][axis="x"] template[name="tick-label"]')},y:{template:t.content.querySelector('template[name="axis"][axis="y"]'),axisLine:t.content.querySelector('template[name="axis"][axis="y"] template[name="axis-line"]'),gridLine:t.content.querySelector('template[name="axis"][axis="y"] template[name="grid-line"]'),tickMark:t.content.querySelector('template[name="axis"][axis="y"] template[name="tick-mark"]'),tickLabel:t.content.querySelector('template[name="axis"][axis="y"] template[name="tick-label"]')}},tooltip:this.querySelector('template[name="tooltip"]'),summary:this.querySelector('template[name="summary"]')};t.content.querySelectorAll('template[name="line"]').forEach(y=>{s.lines[y.getAttribute("field")]=y}),t.content.querySelectorAll('template[name="area"]').forEach(y=>{s.areas[y.getAttribute("field")]=y}),t.content.querySelectorAll('template[name="point"]').forEach(y=>{s.points[y.getAttribute("field")]=y});let r=()=>{},a=()=>{},n=()=>{},o=()=>{},l=null,u=null,d=null,b=null;u=document.createElementNS("http://www.w3.org/2000/svg","rect"),u.setAttribute("data-overlay",""),u.setAttribute("fill","none"),u.setAttribute("pointer-events","all"),u.addEventListener("mousemove",Ai(function(y){r(y),a(y),n(y),o(y)},1)),u.addEventListener("mouseleave",()=>{r(null),a(null),n(null),o(null)}),e.appendChild(u),s.cursor&&(l=at(s.cursor),l.setAttribute("data-cursor",""),e.appendChild(l)),s.tooltip&&(d=Ve(s.tooltip),s.tooltip.after(d)),s.summary&&(b=Ve(s.summary),s.summary.after(b));let g={left:8,right:8,top:8,bottom:8};if(s.svg?.hasAttribute("gutter")){let y=s.svg?.getAttribute("gutter").split(" ").map(f=>f.replace("px","")).map(Number);y.length===1?(g.top=y[0],g.right=y[0],g.bottom=y[0],g.left=y[0]):y.length===2?(g.top=y[0],g.right=y[1],g.bottom=y[0],g.left=y[1]):y.length===3?(g.top=y[0],g.right=y[1],g.bottom=y[2],g.left=y[1]):y.length===4&&(g.top=y[0],g.right=y[1],g.bottom=y[2],g.left=y[3])}let[v,p]=On(e),c=Yr({data:this._data,width:e.parentElement.getBoundingClientRect().width,height:e.parentElement.getBoundingClientRect().height,inset:{left:0,right:0,top:0,bottom:0},axes:{x:{key:v,format:s.axes.x.template?.hasAttribute("format")?JSON.parse(s.axes.x.template?.getAttribute("format")):null,scale:s.axes.x.template?.getAttribute("scale"),interval:s.axes.x.template?.getAttribute("interval"),position:s.axes.x.template?.getAttribute("position"),tickCount:s.axes.x.template?.getAttribute("tick-count")||s.axes.x.tickLabel?.getAttribute("target-tick-count"),tickStart:s.axes.x.template?.getAttribute("tick-start"),tickEnd:s.axes.x.template?.getAttribute("tick-end"),tickStep:s.axes.x.template?.getAttribute("tick-step")?Number(s.axes.x.template?.getAttribute("tick-step")):null,tickSuffix:s.axes.x.template?.getAttribute("tick-suffix"),tickPrefix:s.axes.x.template?.getAttribute("tick-prefix"),tickValues:s.axes.x.template?.hasAttribute("tick-values")?JSON.parse(s.axes.x.template?.getAttribute("tick-values")):null},y:{keys:p,format:s.axes.y.template?.hasAttribute("format")?JSON.parse(s.axes.y.template?.getAttribute("format")):null,scale:s.axes.y.template?.getAttribute("scale"),interval:s.axes.y.template?.getAttribute("interval"),position:s.axes.y.template?.getAttribute("position"),tickCount:s.axes.y.template?.getAttribute("tick-count")||s.axes.y.tickLabel?.getAttribute("target-tick-count"),tickStart:s.axes.y.template?.getAttribute("tick-start"),tickEnd:s.axes.y.template?.getAttribute("tick-end"),tickStep:s.axes.y.template?.getAttribute("tick-step")?Number(s.axes.y.template?.getAttribute("tick-step")):null,tickSuffix:s.axes.y.template?.getAttribute("tick-suffix"),tickPrefix:s.axes.y.template?.getAttribute("tick-prefix"),tickValues:s.axes.y.template?.hasAttribute("tick-values")?JSON.parse(s.axes.y.template?.getAttribute("tick-values")):null}}}),_=(y=!0)=>{if(h(e,"viewBox",`0 0 ${c.width} ${c.height}`),c.data.length!==0){if(c.data.length===1){console.warn("ui-chart: chart only has one data point so it cannot be rendered.");return}if(c.data[0][c.axes.x.key]===void 0){console.warn(`ui-chart: axis field "${c.axes.x.key}" does not exist`);return}if(Object.entries(c.series).forEach(([f,w])=>{let A=e.querySelector(`[data-line][data-series="${f}"]`),k=s.lines[f];if(k){let E=k.getAttribute("curve")||"smooth";if(A)A.setAttribute("d",w.linePath(E));else{let T=at(k);T.setAttribute("data-line",""),T.setAttribute("data-series",f),T.setAttribute("d",w.linePath(E)),e.appendChild(T)}}}),Object.entries(c.series).forEach(([f,w])=>{let A=e.querySelector(`[data-area][data-series="${f}"]`),k=s.areas[f];if(k){let E=k.getAttribute("curve")||"smooth";if(A)A.setAttribute("d",w.areaPath(E));else{let T=at(k);T.setAttribute("data-area",""),T.setAttribute("data-series",f),T.setAttribute("d",w.areaPath(E)),e.appendChild(T)}}}),Object.entries(c.series).forEach(([f,w])=>{let A=e.querySelector(`[data-point-group][data-series="${f}"]`),k=s.points[f];k&&(e.querySelector(`[data-point-group][data-series="${f}"]`)?.remove(),A=document.createElementNS("http://www.w3.org/2000/svg","g"),A.setAttribute("data-point-group",""),A.setAttribute("data-series",f),w.points.forEach(E=>{let T=at(k);T.setAttribute("data-point",""),T.setAttribute("data-series",f),T.setAttribute("cx",E.x),T.setAttribute("cy",E.y),A.appendChild(T)}),e.appendChild(A))}),o=f=>{e.querySelectorAll("[data-point-group]").forEach(w=>{if(w.querySelectorAll("[data-point]").forEach(A=>A.removeAttribute("data-active")),f){let A=f.clientX-e.getBoundingClientRect().left,k=f.clientY-e.getBoundingClientRect().top;A>=c.inset.left&&A<=c.width-c.inset.right&&k>=c.inset.top&&k<=c.height-c.inset.bottom&&c.closestXPoints(A).forEach(T=>{w.querySelectorAll(`[data-point][cx="${T.x}"]`).forEach(I=>I.setAttribute("data-active",""))})}else w.querySelectorAll("[data-point]").forEach(A=>A.removeAttribute("data-active"))})},s.axes.x.template){if(s.axes.x.axisLine){e.querySelector('[data-axis-line][data-axis="x"]')?.remove();let f=at(s.axes.x.axisLine);f.setAttribute("data-axis-line",""),f.setAttribute("data-axis","x"),f.setAttribute("x1",c.axes.x.scale(c.axes.x.domain[0])),f.setAttribute("x2",c.axes.x.scale(c.axes.x.domain[1])),f.setAttribute("y1",c.axes.y.scale(c.axes.y.domain[c.axes.x.position==="bottom"?0:1])),f.setAttribute("y2",c.axes.y.scale(c.axes.y.domain[c.axes.x.position==="bottom"?0:1])),e.appendChild(f)}if(s.axes.x.gridLine){e.querySelector('[data-grid-line-group][data-axis="x"]')?.remove();let f=document.createElementNS("http://www.w3.org/2000/svg","g");f.setAttribute("data-grid-line-group",""),f.setAttribute("data-axis","x"),c.axes.x.ticks.forEach(({value:w})=>{let A=at(s.axes.x.gridLine);A.setAttribute("data-grid-line",""),A.setAttribute("data-axis","x"),A.setAttribute("x1",c.axes.x.scale(w)),A.setAttribute("x2",c.axes.x.scale(w)),A.setAttribute("y1",c.inset.top),A.setAttribute("y2",c.height-c.inset.bottom),f.appendChild(A)}),e.appendChild(f)}if(s.axes.x.tickMark){e.querySelector('[data-tick-mark-group][data-axis="x"]')?.remove();let f=document.createElementNS("http://www.w3.org/2000/svg","g");f.setAttribute("data-tick-mark-group",""),f.setAttribute("data-axis","x"),c.axes.x.ticks.forEach(({value:w,label:A})=>{let k={x:c.axes.x.scale(w),y:c.axes.y.scale(c.axes.y.domain[c.axes.x.position==="bottom"?0:1])},E=at(s.axes.x.tickMark);E.setAttribute("data-tick-mark",""),E.setAttribute("data-axis","x"),E.setAttribute("transform",`translate(${k.x}, ${k.y})`),f.appendChild(E)}),e.appendChild(f)}if(s.axes.x.tickLabel){e.querySelector('[data-tick-label-group][data-axis="x"]')?.remove();let f=document.createElementNS("http://www.w3.org/2000/svg","g");f.setAttribute("data-tick-label-group",""),f.setAttribute("data-axis","x"),c.axes.x.ticks.forEach(({value:w,label:A})=>{let k={x:c.axes.x.scale(w),y:c.axes.y.scale(c.axes.y.domain[c.axes.x.position==="bottom"?0:1])},E=at(s.axes.x.tickLabel);E.querySelectorAll("slot").forEach(T=>T.replaceWith(document.createTextNode(A))),E.setAttribute("data-tick-label",""),E.setAttribute("data-axis","x"),E.setAttribute("transform",`translate(${k.x}, ${k.y})`),f.appendChild(E)}),e.appendChild(f),zr(f,c.axes.x)}}if(s.axes.y.template){if(s.axes.y.axisLine){e.querySelector('[data-axis-line][data-axis="y"]')?.remove();let f=at(s.axes.y.axisLine);f.setAttribute("data-axis-line",""),f.setAttribute("data-axis","y"),f.setAttribute("x1",c.axes.x.scale(c.axes.x.domain[c.axes.y.position==="left"?0:1])),f.setAttribute("x2",c.axes.x.scale(c.axes.x.domain[c.axes.y.position==="left"?0:1])),f.setAttribute("y1",c.axes.y.scale(c.axes.y.domain[0])),f.setAttribute("y2",c.axes.y.scale(c.axes.y.domain[1])),e.appendChild(f)}if(s.axes.y.gridLine){e.querySelector('[data-grid-line-group][data-axis="y"]')?.remove();let f=document.createElementNS("http://www.w3.org/2000/svg","g");f.setAttribute("data-grid-line-group",""),f.setAttribute("data-axis","y"),c.axes.y.ticks.forEach(({value:w,label:A})=>{let k={x:c.axes.x.scale(c.axes.x.domain[0]),y:c.axes.y.scale(w)},E=at(s.axes.y.gridLine);E.setAttribute("data-grid-line",""),E.setAttribute("data-axis","y"),E.setAttribute("x1",c.inset.left),E.setAttribute("x2",c.width-c.inset.right),E.setAttribute("y1",k.y),E.setAttribute("y2",k.y),f.appendChild(E)}),e.appendChild(f)}if(s.axes.y.tickMark){e.querySelector('[data-tick-mark-group][data-axis="y"]')?.remove();let f=document.createElementNS("http://www.w3.org/2000/svg","g");f.setAttribute("data-tick-mark-group",""),f.setAttribute("data-axis","y"),c.axes.y.ticks.forEach(({value:w,label:A})=>{let k={x:c.axes.x.scale(c.axes.x.domain[c.axes.y.position==="left"?0:1]),y:c.axes.y.scale(w)},E=at(s.axes.y.tickMark);E.setAttribute("data-tick-mark",""),E.setAttribute("data-axis","y"),E.setAttribute("transform",`translate(${k.x}, ${k.y})`),f.appendChild(E)}),e.appendChild(f)}if(s.axes.y.tickLabel){e.querySelector('[data-tick-label-group][data-axis="y"]')?.remove();let f=document.createElementNS("http://www.w3.org/2000/svg","g");f.setAttribute("data-tick-label-group",""),f.setAttribute("data-axis","y"),c.axes.y.ticks.forEach(({value:w,label:A})=>{let k={x:c.axes.x.scale(c.axes.x.domain[c.axes.y.position==="left"?0:1]),y:c.axes.y.scale(w)},E=at(s.axes.y.tickLabel);E.querySelectorAll("slot").forEach(T=>T.replaceWith(document.createTextNode(A))),E.setAttribute("data-tick-label",""),E.setAttribute("data-axis","y"),E.setAttribute("transform",`translate(${k.x}, ${k.y})`),f.appendChild(E)}),e.appendChild(f),zr(f,c.axes.y)}}if(s.zeroLine&&c.axes.y.domain[0]<0&&c.axes.y.domain[1]>0){e.querySelector('[data-zero-line][data-axis="y"]')?.remove();let f=at(s.zeroLine);f.setAttribute("data-zero-line",""),f.setAttribute("data-axis","y"),f.setAttribute("x1",c.axes.x.scale(c.axes.x.domain[0])),f.setAttribute("x2",c.axes.x.scale(c.axes.x.domain[1])),f.setAttribute("y1",c.axes.y.scale(0)),f.setAttribute("y2",c.axes.y.scale(0)),e.appendChild(f)}if(u&&(u.setAttribute("width",c.width),u.setAttribute("height",c.height),u.setAttribute("x",0),u.setAttribute("y",0)),l&&(r=f=>{if(f){let w=f.clientX-e.getBoundingClientRect().left,A=f.clientY-e.getBoundingClientRect().top;if(w>=c.inset.left&&w<=c.width-c.inset.right&&A>=c.inset.top&&A<=c.height-c.inset.bottom){let k=c.closestXPoint(w);l.setAttribute("opacity","1"),l.setAttribute("x1",k.x),l.setAttribute("x2",k.x),l.setAttribute("y1",c.axes.y.scale(c.axes.y.domain[0])),l.setAttribute("y2",c.axes.y.scale(c.axes.y.domain[1]))}else l.setAttribute("opacity","0")}else l.setAttribute("opacity","0")}),d&&(a=f=>{if(f===null)S(d,"data-active");else{let w=f.clientX-e.getBoundingClientRect().left,A=f.clientY-e.getBoundingClientRect().top;if(w>=c.inset.left&&w<=c.width-c.inset.right&&A>=c.inset.top&&A<=c.height-c.inset.bottom){let k=c.closestXPoint(w);if(k){h(d,"data-active","");let E=d.getBoundingClientRect(),T=e.getBoundingClientRect(),I=T.width-(k.x+E.width+15),H=T.height-(A+E.height+15),j=I<0?k.x-E.width-15:k.x+15,nt=H<0?A-E.height-15:A+15;d.style.transform=`translate(${j}px, ${nt}px)`;let X=s.tooltip.content.cloneNode(!0).firstElementChild;X.querySelectorAll("slot").forEach(K=>{let J=K.getAttribute("field");if(J){let ut=K.hasAttribute("format")?JSON.parse(K.getAttribute("format")):null,Y=k.datum[J];if(ut===null)return K.textContent=Y;ut={...ut,timeZone:"UTC"},jr(Y)?Y=Number(Y).toLocaleString(ht(),ut):Xr(Y)&&(Y=new Date(Y).toLocaleDateString(ht(),ut)),K.textContent=Y}}),d.innerHTML=X.innerHTML}else S(d,"data-active")}else S(d,"data-active")}}),b&&(n=f=>{let w=null;if(f!==null){let A=f.clientX-e.getBoundingClientRect().left,k=f.clientY-e.getBoundingClientRect().top;A>=c.inset.left&&A<=c.width-c.inset.right&&k>=c.inset.top&&k<=c.height-c.inset.bottom&&(w=c.closestXPoint(A))}if(w=w||c.closestXPoint(c.axes.x.range[1]),w){let A=s.summary.content.cloneNode(!0).firstElementChild;A.querySelectorAll("slot").forEach(k=>{let E=k.getAttribute("field");if(E){let T=k.hasAttribute("format")?JSON.parse(k.getAttribute("format")):{};T={...T,timeZone:"UTC"};let I=k.hasAttribute("fallback")&&f===null?k.getAttribute("fallback"):w.datum[E];jr(I)?I=Number(I).toLocaleString(ht(),T):Xr(I)&&(I=new Date(I).toLocaleString(ht(),T)),k.textContent=I}}),b.innerHTML=A.innerHTML}},n(null)),e.appendChild(u),e.querySelectorAll("[data-grid-line-group]").forEach(f=>u.before(f)),e.querySelectorAll("[data-axis-line]").forEach(f=>u.before(f)),e.querySelectorAll("[data-zero-line]").forEach(f=>u.before(f)),e.querySelectorAll("[data-area]").forEach(f=>u.before(f)),e.querySelectorAll("[data-line]").forEach(f=>u.before(f)),e.querySelectorAll("[data-cursor]").forEach(f=>u.before(f)),e.querySelectorAll("[data-point-group]").forEach(f=>u.before(f)),y){let f=Nn(e);c.updateDimensions({width:c.width,height:c.height},{left:g.left+f.left,right:g.right+f.right,top:g.top+f.top,bottom:g.bottom+f.bottom}),_(!1)}}};this._observable.subscribe("resize",()=>{c.updateDimensions({width:e.parentElement.getBoundingClientRect().width,height:e.parentElement.getBoundingClientRect().height},{left:0,right:0,top:0,bottom:0}),_()}),this._observable.subscribe("data",()=>{c.updateData(this._data),c.updateDimensions({width:c.width,height:c.height},{left:0,right:0,top:0,bottom:0}),_()}),new ResizeObserver(()=>{this._observable.notify("resize")}).observe(this),new MutationObserver(y=>{y.forEach(f=>{f.attributeName==="value"&&this._selectable.setState(this.hasAttribute("value")?JSON.parse(this.getAttribute("value")):[])})}).observe(this,{attributes:!0,attributeFilter:["value"]})}};customElements.define("ui-chart",Ds);function On(i){let t=null,e=[];return i.querySelectorAll('template[name="line"], template[name="area"], template[name="point"]').forEach(s=>{e.push(s.getAttribute("field")||"value")}),i.querySelectorAll('template[name="axis"][axis="x"]').forEach(s=>{t=s.getAttribute("field")||"index"}),e=Array.from(new Set(e)),t===null&&(t="index"),e.length===0&&(e=["value"]),[t,e]}function at(i){let t=document.createElementNS("http://www.w3.org/2000/svg","svg");return t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("version","1.1"),t.innerHTML=i.innerHTML,t.firstElementChild}function zr(i,t){if(Gr(i,t)){if(t.axis==="x"&&t.type==="categorical")Ln(i);else if(t.axis==="x"&&t.type==="time"){let e=Pn(i);if(!Gr(i,t))return;e(),In(i)}}}function Gr(i,t){let e=Array.from(i.children);e=e.filter(s=>s.style.display!="none");for(let s=0;s<e.length;s++){let r=e[s],a=e[s+1];if(!a)break;let n=r.getBoundingClientRect(),o=a.getBoundingClientRect(),l=20;if(t.axis==="y"){if(n.bottom+l<o.top)return!0}else if(n.right+l>o.left)return!0}return!1}function Ln(i){let t=[];return Array.from(i.children).forEach((e,s)=>{let r=e.matches("text")?e:e.querySelector("text");Array.from(i.children).forEach((a,n)=>{let o=a.matches("text")?a:a.querySelector("text");o&&(o.style.transform="rotate(-45deg)",o.style.textAnchor="end",t.push(()=>{o.style.transform=null,o.style.textAnchor=null}))})}),()=>t.forEach(e=>e())}function Pn(i){let t=Array.from(i.children);return t.forEach((e,s)=>{s%2===1&&(e.style.display="none")}),()=>t.forEach((e,s)=>{e.style.display="inline"})}function In(i){let t=Array.from(i.children);t.forEach((n,o)=>{n.style.display="none"});let e=t[0],s=t[t.length-1],r=e.matches("text")?e:e.querySelector("text"),a=s.matches("text")?s:s.querySelector("text");return e.style.display="inline",r.style.textAnchor="start",s.style.display="inline",a.style.textAnchor="end",()=>t.forEach((n,o)=>{n.style.display="inline"})}function jr(i){return typeof i=="number"||typeof i=="string"&&!isNaN(Number(i))}function Xr(i){return i instanceof Date||typeof i=="string"&&!isNaN(Date.parse(i))}function Nn(i){let t=i.getBoundingClientRect(),e={top:1/0,right:-1/0,bottom:-1/0,left:1/0};return Array.from(i.children).forEach(s=>{if(s.hasAttribute("data-overlay")||s.style.display==="none")return;let r=s.getBoundingClientRect();!r.width&&!r.height||(e.top=Math.min(e.top,r.top),e.right=Math.max(e.right,r.right),e.bottom=Math.max(e.bottom,r.bottom),e.left=Math.min(e.left,r.left))}),{top:Math.max(0,t.top-e.top),right:Math.max(0,e.right-t.right),bottom:Math.max(0,e.bottom-t.bottom),left:Math.max(0,t.left-e.left)}}var Ts=class extends D{mount(){h(this,"role","status"),document.addEventListener("keydown",t=>{t.key==="Escape"&&this.hideToast()})}showToast(t={}){let e=this.template().nextElementSibling;e&&e.destroyToast();let s=Number(t.duration===void 0?5e3:t.duration),r=t.slots||{},a=t.dataset||{},n=this.querySelector("template");if(!n)return console.warn("ui-toast: no template element found",this);let o=n.content.cloneNode(!0).firstElementChild;o.setAttribute("aria-atomic","true"),Object.entries(r).forEach(([b,g])=>{[null,void 0,!1].includes(g)||o.querySelectorAll(`slot[name="${b}"]`).forEach(v=>{v.replaceWith(document.createTextNode(g))})}),Object.entries(a).forEach(([b,g])=>{o.dataset[b]=g}),o.querySelectorAll("slot").forEach(b=>b.remove());let l=()=>{o.showPopover()},u=()=>{o._hiding=!0,o.hidePopover(),o.getAnimations().length?o.addEventListener("transitionend",()=>{o.remove()},{once:!0}):o.remove()};this.appendChild(o),l(),o.hideToast=u;let d=s!==0&&setTimeout(()=>{u()},s);o.destroyToast=()=>{d&&clearTimeout(d),o.remove()}}hideToast(){let t=this.template().nextElementSibling;t&&t.destroyToast()}template(){return this.querySelector("template")}};C("toast",Ts);var Ms=class extends V{boot(){this._selectable=new z(this),this._controllable=new F(this,{disabled:this._disabled,bubbles:!0}),this._focusable=new bt(this,{wrap:!0}),this._submittable=new Q(this,{name:this.getAttribute("name"),value:this._selectable.getState(),includeWhenEmpty:!1}),this._controllable.initial(t=>t&&this._selectable.setState(t)),this._controllable.getter(()=>this._selectable.getState()),this._detangled=N(),this._controllable.setter(this._detangled(t=>{this._selectable.setState(t)})),this._selectable.onChange(this._detangled(()=>{this._controllable.dispatch()})),this._selectable.onInitAndChange(()=>{this._submittable.update(this._selectable.getState())}),x(this,"keydown",t=>{["ArrowDown","ArrowRight"].includes(t.key)?(this._focusable.focusNext(),t.preventDefault(),t.stopPropagation()):["ArrowUp","ArrowLeft"].includes(t.key)&&(this._focusable.focusPrev(),t.preventDefault(),t.stopPropagation())}),h(this,"role","radiogroup"),queueMicrotask(()=>{this._submittable.update(this._selectable.getState())})}},Os=class extends V{boot(){let t=this;this._disableable=new P(this),this._selectable=new L(t,{value:this.hasAttribute("value")?this.getAttribute("value"):Math.random().toString(36).substring(2,10),label:this.hasAttribute("label")?this.getAttribute("label"):null,selectedInitially:this.hasAttribute("checked"),dataAttr:"data-checked",ariaAttr:"aria-checked"}),this.value=this._selectable.getValue(),this._selectable.onChange(()=>{this._selectable.isSelected()&&this._focusable.focus(!1)}),this._disableable.onChange(e=>{e?this._focusable.untabbable():this._selectable.isSelected()&&this._focusable.tabbable()}),h(t,"role","radio"),this._focusable=new q(t,{disableable:this._disableable,tabbableAttr:"data-active"}),x(t,"click",this._disableable.disabled(e=>{e.preventDefault(),e.stopPropagation()}),{capture:!0}),x(t,"click",this._disableable.enabled(e=>{this._selectable.press()})),x(t,"keydown",this._disableable.enabled(e=>{e.key==="Enter"&&(this._selectable.press(),e.preventDefault(),e.stopPropagation())})),x(t,"keydown",this._disableable.enabled(e=>{e.key===" "&&(e.preventDefault(),e.stopPropagation())})),x(t,"keyup",this._disableable.enabled(e=>{e.key===" "&&(this._selectable.press(),e.preventDefault(),e.stopPropagation())})),Fn(t),x(t,"focus",e=>{ie()&&this._selectable.select()})}get checked(){return this._selectable.isSelected()}set checked(t){(this.closest("ui-radio-group")?._detangled||(()=>{}))(()=>{t&&this._selectable.select()})()}};function Fn(i){i.closest("label")?.addEventListener("click",t=>{i.contains(t.target)||i.click()})}O(({css:i})=>i`ui-radio-group { display: block; }`);O(({css:i})=>i`ui-radio { display: inline-block; user-select: none; }`);C("radio-group",Ms);C("radio",Os);var ui=class i extends D{boot(){this._disabled=this.hasAttribute("disabled")}mount(){this.walkPanels(t=>Kr(t)),new MutationObserver(t=>{this.walkPanels(e=>Kr(e))}).observe(this,{childList:!0})}showPanel(t){this.walkPanels(e=>{e.getAttribute("name")===t?e.show():e.hide()})}getPanel(t){return this.walkPanels((e,s)=>{e.getAttribute("name")===t&&s(e)})}walkPanels(t){let e=!1,s;for(let r of this.children)if(!(r instanceof i)&&!(r instanceof ci)&&(t(r,a=>{e=!0,s=a}),e))break;return s}},ci=class i extends V{boot(){this._focusable=new bt(this,{wrap:!0}),this._selectableGroup=new z(this),this._controllable=new F(this,{disabled:this._disabled}),this._controllable.initial(e=>e&&this._selectableGroup.setState(e)),this._controllable.getter(()=>this._selectableGroup.getState());let t=N();this._controllable.setter(t(e=>{this._selectableGroup.setState(e)})),this._selectableGroup.onChange(t(()=>{this._controllable.dispatch()})),x(this,"keydown",e=>{["ArrowDown","ArrowRight"].includes(e.key)?(this._focusable.focusNext(),e.preventDefault(),e.stopPropagation()):["ArrowUp","ArrowLeft"].includes(e.key)&&(this._focusable.focusPrev(),e.preventDefault(),e.stopPropagation())}),h(this,"role","tablist")}mount(){this.initializeTabs(),this._focusable.ensureTabbable(),this._selectableGroup.getState()||this._selectableGroup.selectFirst(),new MutationObserver(t=>{this.initializeTabs();let e=this._selectableGroup.selected();e.el.closest("ui-tab-group").showPanel(e.value)}).observe(this,{childList:!0})}initializeTabs(){this.walker().each(t=>{t._initialized||t._disableable||t.hasAttribute("action")||(Rn(t),t._initialized=!0)})}walker(){return W(this,(t,{skip:e,reject:s})=>{if(t instanceof ui||t instanceof i)return s();if(!["a","button"].includes(t.localName))return e()})}};function Rn(i){i._disableable=new P(i);let t=i.matches("a")?i:null,e=t||i;i._disableable.onInitAndChange(r=>{r?h(e,"aria-disabled","true"):S(e,"aria-disabled")});let s=U(e,"tab");if(h(e,"role","tab"),e._focusable=new q(e,{disableable:i._disableable,tabbableAttr:"data-active"}),!t){let r=i.getAttribute("name");i._selectable=new L(i,{value:r||Math.random().toString(36).substring(2,10),label:i.hasAttribute("label")?i.getAttribute("label"):i.textContent.trim(),selectedInitially:i.hasAttribute("selected"),toggleable:!1}),x(i,"click",()=>i._selectable.press()),i._selectable.onInitAndChange(()=>{let a=i.closest("ui-tab-group")?.getPanel(r);i._selectable.getState()?a?.show():a?.hide(),i._selectable.getState()&&i._focusable.focus(!1)}),i.closest("ui-tab-group")?.hasAttribute("manual")||x(i,"focus",()=>i._selectable.select()),queueMicrotask(()=>{let a=i.closest("ui-tab-group");if(!a)return;let n=a.getPanel(r);if(!n)throw new Error("Could not find panel...");h(i,"aria-controls",n.id),h(n,"aria-labelledby",i.id)})}}function Kr(i){i._initialized||(U(i,"tab-panel"),h(i,"role","tabpanel"),i.hasAttribute("tabindex")||h(i,"tabindex","-1"),i.show=()=>{h(i,"data-selected",""),h(i,"tabindex","0")},i.hide=()=>{S(i,"data-selected"),h(i,"tabindex","-1")},i._initialized=!0)}O(({css:i})=>i`ui-tab-group, ui-tabs { display: block; cursor: default; }`);C("tab-group",ui);C("tabs",ci);document.addEventListener("alpine:init",()=>{let i=window.Flux?.applyAppearance;i||(i=()=>{window.Flux.appearance=null,window.localStorage.removeItem("flux.appearance")});let t=Alpine.reactive({toast(...s){let r={slots:{},dataset:{}};typeof s[0]=="string"&&(r.slots.text=s.shift()),typeof s[0]=="string"&&(r.slots.heading=r.slots.text,r.slots.text=s.shift());let a=s.shift()||{};a.text&&(r.slots.text=a.text),a.heading&&(r.slots.heading=a.heading),a.variant&&(r.dataset.variant=a.variant),a.position&&(r.dataset.position=a.position),a.duration!==void 0&&(r.duration=a.duration),document.dispatchEvent(new CustomEvent("toast-show",{detail:r}))},modal(s){return{show(){document.dispatchEvent(new CustomEvent("modal-show",{detail:{name:s}}))},close(){document.dispatchEvent(new CustomEvent("modal-close",{detail:{name:s}}))}}},modals(){return{close(){document.dispatchEvent(new CustomEvent("modal-close",{detail:{}}))}}},appearance:window.localStorage.getItem("flux.appearance")||"system",systemAppearanceChanged:1,get dark(){return JSON.stringify(t.systemAppearanceChanged),t.appearance==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches:t.appearance==="dark"},set dark(s){let r=this.dark;s!==r&&(s?t.appearance="dark":t.appearance="light")}});window.Flux=t,Alpine.magic("flux",()=>t),Alpine.effect(()=>{i(t.appearance)}),document.addEventListener("livewire:navigated",()=>{i(t.appearance)}),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",()=>{t.systemAppearanceChanged++,i(t.appearance)})});!js()&&!Xs()&&Ks();})();
