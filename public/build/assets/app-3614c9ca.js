var To=Object.defineProperty;var Oo=(t,e,r)=>e in t?To(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var sn=(t,e,r)=>(Oo(t,typeof e!="symbol"?e+"":e,r),r);const Fo="modulepreload",Uo=function(t){return"/build/"+t},nn={},Ro=function(e,r,s){if(!r||r.length===0)return e();const n=document.getElementsByTagName("link");return Promise.all(r.map(i=>{if(i=Uo(i),i in nn)return;nn[i]=!0;const o=i.endsWith(".css"),a=o?'[rel="stylesheet"]':"";if(!!s)for(let d=n.length-1;d>=0;d--){const c=n[d];if(c.href===i&&(!o||c.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${a}`))return;const u=document.createElement("link");if(u.rel=o?"stylesheet":Fo,o||(u.as="script",u.crossOrigin=""),u.href=i,document.head.appendChild(u),o)return new Promise((d,c)=>{u.addEventListener("load",d),u.addEventListener("error",()=>c(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};function ai(t,e){return function(){return t.apply(e,arguments)}}const{toString:Ao}=Object.prototype,{getPrototypeOf:Ls}=Object,$r=(t=>e=>{const r=Ao.call(e);return t[r]||(t[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),ve=t=>(t=t.toLowerCase(),e=>$r(e)===t),kr=t=>e=>typeof e===t,{isArray:yt}=Array,rr=kr("undefined");function Co(t){return t!==null&&!rr(t)&&t.constructor!==null&&!rr(t.constructor)&&pe(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const li=ve("ArrayBuffer");function xo(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&li(t.buffer),e}const $o=kr("string"),pe=kr("function"),ui=kr("number"),Nr=t=>t!==null&&typeof t=="object",ko=t=>t===!0||t===!1,yr=t=>{if($r(t)!=="object")return!1;const e=Ls(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},No=ve("Date"),jo=ve("File"),Lo=ve("Blob"),Bo=ve("FileList"),Mo=t=>Nr(t)&&pe(t.pipe),Io=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||pe(t.append)&&((e=$r(t))==="formdata"||e==="object"&&pe(t.toString)&&t.toString()==="[object FormData]"))},Do=ve("URLSearchParams"),[qo,zo,Ho,Wo]=["ReadableStream","Request","Response","Headers"].map(ve),Go=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function or(t,e,{allOwnKeys:r=!1}={}){if(t===null||typeof t>"u")return;let s,n;if(typeof t!="object"&&(t=[t]),yt(t))for(s=0,n=t.length;s<n;s++)e.call(null,t[s],s,t);else{const i=r?Object.getOwnPropertyNames(t):Object.keys(t),o=i.length;let a;for(s=0;s<o;s++)a=i[s],e.call(null,t[a],a,t)}}function ci(t,e){e=e.toLowerCase();const r=Object.keys(t);let s=r.length,n;for(;s-- >0;)if(n=r[s],e===n.toLowerCase())return n;return null}const at=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),di=t=>!rr(t)&&t!==at;function bs(){const{caseless:t}=di(this)&&this||{},e={},r=(s,n)=>{const i=t&&ci(e,n)||n;yr(e[i])&&yr(s)?e[i]=bs(e[i],s):yr(s)?e[i]=bs({},s):yt(s)?e[i]=s.slice():e[i]=s};for(let s=0,n=arguments.length;s<n;s++)arguments[s]&&or(arguments[s],r);return e}const Vo=(t,e,r,{allOwnKeys:s}={})=>(or(e,(n,i)=>{r&&pe(n)?t[i]=ai(n,r):t[i]=n},{allOwnKeys:s}),t),Jo=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),Ko=(t,e,r,s)=>{t.prototype=Object.create(e.prototype,s),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),r&&Object.assign(t.prototype,r)},Xo=(t,e,r,s)=>{let n,i,o;const a={};if(e=e||{},t==null)return e;do{for(n=Object.getOwnPropertyNames(t),i=n.length;i-- >0;)o=n[i],(!s||s(o,t,e))&&!a[o]&&(e[o]=t[o],a[o]=!0);t=r!==!1&&Ls(t)}while(t&&(!r||r(t,e))&&t!==Object.prototype);return e},Yo=(t,e,r)=>{t=String(t),(r===void 0||r>t.length)&&(r=t.length),r-=e.length;const s=t.indexOf(e,r);return s!==-1&&s===r},Qo=t=>{if(!t)return null;if(yt(t))return t;let e=t.length;if(!ui(e))return null;const r=new Array(e);for(;e-- >0;)r[e]=t[e];return r},Zo=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Ls(Uint8Array)),ea=(t,e)=>{const s=(t&&t[Symbol.iterator]).call(t);let n;for(;(n=s.next())&&!n.done;){const i=n.value;e.call(t,i[0],i[1])}},ta=(t,e)=>{let r;const s=[];for(;(r=t.exec(e))!==null;)s.push(r);return s},ra=ve("HTMLFormElement"),sa=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,s,n){return s.toUpperCase()+n}),on=(({hasOwnProperty:t})=>(e,r)=>t.call(e,r))(Object.prototype),na=ve("RegExp"),pi=(t,e)=>{const r=Object.getOwnPropertyDescriptors(t),s={};or(r,(n,i)=>{let o;(o=e(n,i,t))!==!1&&(s[i]=o||n)}),Object.defineProperties(t,s)},ia=t=>{pi(t,(e,r)=>{if(pe(t)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const s=t[r];if(pe(s)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},oa=(t,e)=>{const r={},s=n=>{n.forEach(i=>{r[i]=!0})};return yt(t)?s(t):s(String(t).split(e)),r},aa=()=>{},la=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e,Gr="abcdefghijklmnopqrstuvwxyz",an="0123456789",hi={DIGIT:an,ALPHA:Gr,ALPHA_DIGIT:Gr+Gr.toUpperCase()+an},ua=(t=16,e=hi.ALPHA_DIGIT)=>{let r="";const{length:s}=e;for(;t--;)r+=e[Math.random()*s|0];return r};function ca(t){return!!(t&&pe(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const da=t=>{const e=new Array(10),r=(s,n)=>{if(Nr(s)){if(e.indexOf(s)>=0)return;if(!("toJSON"in s)){e[n]=s;const i=yt(s)?[]:{};return or(s,(o,a)=>{const l=r(o,n+1);!rr(l)&&(i[a]=l)}),e[n]=void 0,i}}return s};return r(t,0)},pa=ve("AsyncFunction"),ha=t=>t&&(Nr(t)||pe(t))&&pe(t.then)&&pe(t.catch),fi=((t,e)=>t?setImmediate:e?((r,s)=>(at.addEventListener("message",({source:n,data:i})=>{n===at&&i===r&&s.length&&s.shift()()},!1),n=>{s.push(n),at.postMessage(r,"*")}))(`axios@${Math.random()}`,[]):r=>setTimeout(r))(typeof setImmediate=="function",pe(at.postMessage)),fa=typeof queueMicrotask<"u"?queueMicrotask.bind(at):typeof process<"u"&&process.nextTick||fi,p={isArray:yt,isArrayBuffer:li,isBuffer:Co,isFormData:Io,isArrayBufferView:xo,isString:$o,isNumber:ui,isBoolean:ko,isObject:Nr,isPlainObject:yr,isReadableStream:qo,isRequest:zo,isResponse:Ho,isHeaders:Wo,isUndefined:rr,isDate:No,isFile:jo,isBlob:Lo,isRegExp:na,isFunction:pe,isStream:Mo,isURLSearchParams:Do,isTypedArray:Zo,isFileList:Bo,forEach:or,merge:bs,extend:Vo,trim:Go,stripBOM:Jo,inherits:Ko,toFlatObject:Xo,kindOf:$r,kindOfTest:ve,endsWith:Yo,toArray:Qo,forEachEntry:ea,matchAll:ta,isHTMLForm:ra,hasOwnProperty:on,hasOwnProp:on,reduceDescriptors:pi,freezeMethods:ia,toObjectSet:oa,toCamelCase:sa,noop:aa,toFiniteNumber:la,findKey:ci,global:at,isContextDefined:di,ALPHABET:hi,generateString:ua,isSpecCompliantForm:ca,toJSONObject:da,isAsyncFn:pa,isThenable:ha,setImmediate:fi,asap:fa};function R(t,e,r,s,n){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),r&&(this.config=r),s&&(this.request=s),n&&(this.response=n,this.status=n.status?n.status:null)}p.inherits(R,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:p.toJSONObject(this.config),code:this.code,status:this.status}}});const mi=R.prototype,gi={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{gi[t]={value:t}});Object.defineProperties(R,gi);Object.defineProperty(mi,"isAxiosError",{value:!0});R.from=(t,e,r,s,n,i)=>{const o=Object.create(mi);return p.toFlatObject(t,o,function(l){return l!==Error.prototype},a=>a!=="isAxiosError"),R.call(o,t.message,e,r,s,n),o.cause=t,o.name=t.name,i&&Object.assign(o,i),o};const ma=null;function ws(t){return p.isPlainObject(t)||p.isArray(t)}function yi(t){return p.endsWith(t,"[]")?t.slice(0,-2):t}function ln(t,e,r){return t?t.concat(e).map(function(n,i){return n=yi(n),!r&&i?"["+n+"]":n}).join(r?".":""):e}function ga(t){return p.isArray(t)&&!t.some(ws)}const ya=p.toFlatObject(p,{},null,function(e){return/^is[A-Z]/.test(e)});function jr(t,e,r){if(!p.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,r=p.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(y,g){return!p.isUndefined(g[y])});const s=r.metaTokens,n=r.visitor||d,i=r.dots,o=r.indexes,l=(r.Blob||typeof Blob<"u"&&Blob)&&p.isSpecCompliantForm(e);if(!p.isFunction(n))throw new TypeError("visitor must be a function");function u(f){if(f===null)return"";if(p.isDate(f))return f.toISOString();if(!l&&p.isBlob(f))throw new R("Blob is not supported. Use a Buffer instead.");return p.isArrayBuffer(f)||p.isTypedArray(f)?l&&typeof Blob=="function"?new Blob([f]):Buffer.from(f):f}function d(f,y,g){let _=f;if(f&&!g&&typeof f=="object"){if(p.endsWith(y,"{}"))y=s?y:y.slice(0,-2),f=JSON.stringify(f);else if(p.isArray(f)&&ga(f)||(p.isFileList(f)||p.endsWith(y,"[]"))&&(_=p.toArray(f)))return y=yi(y),_.forEach(function(A,U){!(p.isUndefined(A)||A===null)&&e.append(o===!0?ln([y],U,i):o===null?y:y+"[]",u(A))}),!1}return ws(f)?!0:(e.append(ln(g,y,i),u(f)),!1)}const c=[],m=Object.assign(ya,{defaultVisitor:d,convertValue:u,isVisitable:ws});function h(f,y){if(!p.isUndefined(f)){if(c.indexOf(f)!==-1)throw Error("Circular reference detected in "+y.join("."));c.push(f),p.forEach(f,function(_,S){(!(p.isUndefined(_)||_===null)&&n.call(e,_,p.isString(S)?S.trim():S,y,m))===!0&&h(_,y?y.concat(S):[S])}),c.pop()}}if(!p.isObject(t))throw new TypeError("data must be an object");return h(t),e}function un(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(s){return e[s]})}function Bs(t,e){this._pairs=[],t&&jr(t,this,e)}const _i=Bs.prototype;_i.append=function(e,r){this._pairs.push([e,r])};_i.toString=function(e){const r=e?function(s){return e.call(this,s,un)}:un;return this._pairs.map(function(n){return r(n[0])+"="+r(n[1])},"").join("&")};function _a(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function vi(t,e,r){if(!e)return t;const s=r&&r.encode||_a,n=r&&r.serialize;let i;if(n?i=n(e,r):i=p.isURLSearchParams(e)?e.toString():new Bs(e,r).toString(s),i){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+i}return t}class va{constructor(){this.handlers=[]}use(e,r,s){return this.handlers.push({fulfilled:e,rejected:r,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){p.forEach(this.handlers,function(s){s!==null&&e(s)})}}const cn=va,bi={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},ba=typeof URLSearchParams<"u"?URLSearchParams:Bs,wa=typeof FormData<"u"?FormData:null,Sa=typeof Blob<"u"?Blob:null,Pa={isBrowser:!0,classes:{URLSearchParams:ba,FormData:wa,Blob:Sa},protocols:["http","https","file","blob","url","data"]},Ms=typeof window<"u"&&typeof document<"u",Ss=typeof navigator=="object"&&navigator||void 0,Ea=Ms&&(!Ss||["ReactNative","NativeScript","NS"].indexOf(Ss.product)<0),Ta=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Oa=Ms&&window.location.href||"http://localhost",Fa=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Ms,hasStandardBrowserEnv:Ea,hasStandardBrowserWebWorkerEnv:Ta,navigator:Ss,origin:Oa},Symbol.toStringTag,{value:"Module"})),re={...Fa,...Pa};function Ua(t,e){return jr(t,new re.classes.URLSearchParams,Object.assign({visitor:function(r,s,n,i){return re.isNode&&p.isBuffer(r)?(this.append(s,r.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)}},e))}function Ra(t){return p.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function Aa(t){const e={},r=Object.keys(t);let s;const n=r.length;let i;for(s=0;s<n;s++)i=r[s],e[i]=t[i];return e}function wi(t){function e(r,s,n,i){let o=r[i++];if(o==="__proto__")return!0;const a=Number.isFinite(+o),l=i>=r.length;return o=!o&&p.isArray(n)?n.length:o,l?(p.hasOwnProp(n,o)?n[o]=[n[o],s]:n[o]=s,!a):((!n[o]||!p.isObject(n[o]))&&(n[o]=[]),e(r,s,n[o],i)&&p.isArray(n[o])&&(n[o]=Aa(n[o])),!a)}if(p.isFormData(t)&&p.isFunction(t.entries)){const r={};return p.forEachEntry(t,(s,n)=>{e(Ra(s),n,r,0)}),r}return null}function Ca(t,e,r){if(p.isString(t))try{return(e||JSON.parse)(t),p.trim(t)}catch(s){if(s.name!=="SyntaxError")throw s}return(r||JSON.stringify)(t)}const Is={transitional:bi,adapter:["xhr","http","fetch"],transformRequest:[function(e,r){const s=r.getContentType()||"",n=s.indexOf("application/json")>-1,i=p.isObject(e);if(i&&p.isHTMLForm(e)&&(e=new FormData(e)),p.isFormData(e))return n?JSON.stringify(wi(e)):e;if(p.isArrayBuffer(e)||p.isBuffer(e)||p.isStream(e)||p.isFile(e)||p.isBlob(e)||p.isReadableStream(e))return e;if(p.isArrayBufferView(e))return e.buffer;if(p.isURLSearchParams(e))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return Ua(e,this.formSerializer).toString();if((a=p.isFileList(e))||s.indexOf("multipart/form-data")>-1){const l=this.env&&this.env.FormData;return jr(a?{"files[]":e}:e,l&&new l,this.formSerializer)}}return i||n?(r.setContentType("application/json",!1),Ca(e)):e}],transformResponse:[function(e){const r=this.transitional||Is.transitional,s=r&&r.forcedJSONParsing,n=this.responseType==="json";if(p.isResponse(e)||p.isReadableStream(e))return e;if(e&&p.isString(e)&&(s&&!this.responseType||n)){const o=!(r&&r.silentJSONParsing)&&n;try{return JSON.parse(e)}catch(a){if(o)throw a.name==="SyntaxError"?R.from(a,R.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:re.classes.FormData,Blob:re.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};p.forEach(["delete","get","head","post","put","patch"],t=>{Is.headers[t]={}});const Ds=Is,xa=p.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),$a=t=>{const e={};let r,s,n;return t&&t.split(`
`).forEach(function(o){n=o.indexOf(":"),r=o.substring(0,n).trim().toLowerCase(),s=o.substring(n+1).trim(),!(!r||e[r]&&xa[r])&&(r==="set-cookie"?e[r]?e[r].push(s):e[r]=[s]:e[r]=e[r]?e[r]+", "+s:s)}),e},dn=Symbol("internals");function St(t){return t&&String(t).trim().toLowerCase()}function _r(t){return t===!1||t==null?t:p.isArray(t)?t.map(_r):String(t)}function ka(t){const e=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=r.exec(t);)e[s[1]]=s[2];return e}const Na=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Vr(t,e,r,s,n){if(p.isFunction(s))return s.call(this,e,r);if(n&&(e=r),!!p.isString(e)){if(p.isString(s))return e.indexOf(s)!==-1;if(p.isRegExp(s))return s.test(e)}}function ja(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,r,s)=>r.toUpperCase()+s)}function La(t,e){const r=p.toCamelCase(" "+e);["get","set","has"].forEach(s=>{Object.defineProperty(t,s+r,{value:function(n,i,o){return this[s].call(this,e,n,i,o)},configurable:!0})})}class Lr{constructor(e){e&&this.set(e)}set(e,r,s){const n=this;function i(a,l,u){const d=St(l);if(!d)throw new Error("header name must be a non-empty string");const c=p.findKey(n,d);(!c||n[c]===void 0||u===!0||u===void 0&&n[c]!==!1)&&(n[c||l]=_r(a))}const o=(a,l)=>p.forEach(a,(u,d)=>i(u,d,l));if(p.isPlainObject(e)||e instanceof this.constructor)o(e,r);else if(p.isString(e)&&(e=e.trim())&&!Na(e))o($a(e),r);else if(p.isHeaders(e))for(const[a,l]of e.entries())i(l,a,s);else e!=null&&i(r,e,s);return this}get(e,r){if(e=St(e),e){const s=p.findKey(this,e);if(s){const n=this[s];if(!r)return n;if(r===!0)return ka(n);if(p.isFunction(r))return r.call(this,n,s);if(p.isRegExp(r))return r.exec(n);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,r){if(e=St(e),e){const s=p.findKey(this,e);return!!(s&&this[s]!==void 0&&(!r||Vr(this,this[s],s,r)))}return!1}delete(e,r){const s=this;let n=!1;function i(o){if(o=St(o),o){const a=p.findKey(s,o);a&&(!r||Vr(s,s[a],a,r))&&(delete s[a],n=!0)}}return p.isArray(e)?e.forEach(i):i(e),n}clear(e){const r=Object.keys(this);let s=r.length,n=!1;for(;s--;){const i=r[s];(!e||Vr(this,this[i],i,e,!0))&&(delete this[i],n=!0)}return n}normalize(e){const r=this,s={};return p.forEach(this,(n,i)=>{const o=p.findKey(s,i);if(o){r[o]=_r(n),delete r[i];return}const a=e?ja(i):String(i).trim();a!==i&&delete r[i],r[a]=_r(n),s[a]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const r=Object.create(null);return p.forEach(this,(s,n)=>{s!=null&&s!==!1&&(r[n]=e&&p.isArray(s)?s.join(", "):s)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,r])=>e+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...r){const s=new this(e);return r.forEach(n=>s.set(n)),s}static accessor(e){const s=(this[dn]=this[dn]={accessors:{}}).accessors,n=this.prototype;function i(o){const a=St(o);s[a]||(La(n,o),s[a]=!0)}return p.isArray(e)?e.forEach(i):i(e),this}}Lr.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);p.reduceDescriptors(Lr.prototype,({value:t},e)=>{let r=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(s){this[r]=s}}});p.freezeMethods(Lr);const _e=Lr;function Jr(t,e){const r=this||Ds,s=e||r,n=_e.from(s.headers);let i=s.data;return p.forEach(t,function(a){i=a.call(r,i,n.normalize(),e?e.status:void 0)}),n.normalize(),i}function Si(t){return!!(t&&t.__CANCEL__)}function _t(t,e,r){R.call(this,t??"canceled",R.ERR_CANCELED,e,r),this.name="CanceledError"}p.inherits(_t,R,{__CANCEL__:!0});function Pi(t,e,r){const s=r.config.validateStatus;!r.status||!s||s(r.status)?t(r):e(new R("Request failed with status code "+r.status,[R.ERR_BAD_REQUEST,R.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}function Ba(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function Ma(t,e){t=t||10;const r=new Array(t),s=new Array(t);let n=0,i=0,o;return e=e!==void 0?e:1e3,function(l){const u=Date.now(),d=s[i];o||(o=u),r[n]=l,s[n]=u;let c=i,m=0;for(;c!==n;)m+=r[c++],c=c%t;if(n=(n+1)%t,n===i&&(i=(i+1)%t),u-o<e)return;const h=d&&u-d;return h?Math.round(m*1e3/h):void 0}}function Ia(t,e){let r=0,s=1e3/e,n,i;const o=(u,d=Date.now())=>{r=d,n=null,i&&(clearTimeout(i),i=null),t.apply(null,u)};return[(...u)=>{const d=Date.now(),c=d-r;c>=s?o(u,d):(n=u,i||(i=setTimeout(()=>{i=null,o(n)},s-c)))},()=>n&&o(n)]}const Tr=(t,e,r=3)=>{let s=0;const n=Ma(50,250);return Ia(i=>{const o=i.loaded,a=i.lengthComputable?i.total:void 0,l=o-s,u=n(l),d=o<=a;s=o;const c={loaded:o,total:a,progress:a?o/a:void 0,bytes:l,rate:u||void 0,estimated:u&&a&&d?(a-o)/u:void 0,event:i,lengthComputable:a!=null,[e?"download":"upload"]:!0};t(c)},r)},pn=(t,e)=>{const r=t!=null;return[s=>e[0]({lengthComputable:r,total:t,loaded:s}),e[1]]},hn=t=>(...e)=>p.asap(()=>t(...e)),Da=re.hasStandardBrowserEnv?function(){const e=re.navigator&&/(msie|trident)/i.test(re.navigator.userAgent),r=document.createElement("a");let s;function n(i){let o=i;return e&&(r.setAttribute("href",o),o=r.href),r.setAttribute("href",o),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return s=n(window.location.href),function(o){const a=p.isString(o)?n(o):o;return a.protocol===s.protocol&&a.host===s.host}}():function(){return function(){return!0}}(),qa=re.hasStandardBrowserEnv?{write(t,e,r,s,n,i){const o=[t+"="+encodeURIComponent(e)];p.isNumber(r)&&o.push("expires="+new Date(r).toGMTString()),p.isString(s)&&o.push("path="+s),p.isString(n)&&o.push("domain="+n),i===!0&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function za(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function Ha(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function Ei(t,e){return t&&!za(e)?Ha(t,e):e}const fn=t=>t instanceof _e?{...t}:t;function dt(t,e){e=e||{};const r={};function s(u,d,c){return p.isPlainObject(u)&&p.isPlainObject(d)?p.merge.call({caseless:c},u,d):p.isPlainObject(d)?p.merge({},d):p.isArray(d)?d.slice():d}function n(u,d,c){if(p.isUndefined(d)){if(!p.isUndefined(u))return s(void 0,u,c)}else return s(u,d,c)}function i(u,d){if(!p.isUndefined(d))return s(void 0,d)}function o(u,d){if(p.isUndefined(d)){if(!p.isUndefined(u))return s(void 0,u)}else return s(void 0,d)}function a(u,d,c){if(c in e)return s(u,d);if(c in t)return s(void 0,u)}const l={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:a,headers:(u,d)=>n(fn(u),fn(d),!0)};return p.forEach(Object.keys(Object.assign({},t,e)),function(d){const c=l[d]||n,m=c(t[d],e[d],d);p.isUndefined(m)&&c!==a||(r[d]=m)}),r}const Ti=t=>{const e=dt({},t);let{data:r,withXSRFToken:s,xsrfHeaderName:n,xsrfCookieName:i,headers:o,auth:a}=e;e.headers=o=_e.from(o),e.url=vi(Ei(e.baseURL,e.url),t.params,t.paramsSerializer),a&&o.set("Authorization","Basic "+btoa((a.username||"")+":"+(a.password?unescape(encodeURIComponent(a.password)):"")));let l;if(p.isFormData(r)){if(re.hasStandardBrowserEnv||re.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if((l=o.getContentType())!==!1){const[u,...d]=l?l.split(";").map(c=>c.trim()).filter(Boolean):[];o.setContentType([u||"multipart/form-data",...d].join("; "))}}if(re.hasStandardBrowserEnv&&(s&&p.isFunction(s)&&(s=s(e)),s||s!==!1&&Da(e.url))){const u=n&&i&&qa.read(i);u&&o.set(n,u)}return e},Wa=typeof XMLHttpRequest<"u",Ga=Wa&&function(t){return new Promise(function(r,s){const n=Ti(t);let i=n.data;const o=_e.from(n.headers).normalize();let{responseType:a,onUploadProgress:l,onDownloadProgress:u}=n,d,c,m,h,f;function y(){h&&h(),f&&f(),n.cancelToken&&n.cancelToken.unsubscribe(d),n.signal&&n.signal.removeEventListener("abort",d)}let g=new XMLHttpRequest;g.open(n.method.toUpperCase(),n.url,!0),g.timeout=n.timeout;function _(){if(!g)return;const A=_e.from("getAllResponseHeaders"in g&&g.getAllResponseHeaders()),x={data:!a||a==="text"||a==="json"?g.responseText:g.response,status:g.status,statusText:g.statusText,headers:A,config:t,request:g};Pi(function(O){r(O),y()},function(O){s(O),y()},x),g=null}"onloadend"in g?g.onloadend=_:g.onreadystatechange=function(){!g||g.readyState!==4||g.status===0&&!(g.responseURL&&g.responseURL.indexOf("file:")===0)||setTimeout(_)},g.onabort=function(){g&&(s(new R("Request aborted",R.ECONNABORTED,t,g)),g=null)},g.onerror=function(){s(new R("Network Error",R.ERR_NETWORK,t,g)),g=null},g.ontimeout=function(){let U=n.timeout?"timeout of "+n.timeout+"ms exceeded":"timeout exceeded";const x=n.transitional||bi;n.timeoutErrorMessage&&(U=n.timeoutErrorMessage),s(new R(U,x.clarifyTimeoutError?R.ETIMEDOUT:R.ECONNABORTED,t,g)),g=null},i===void 0&&o.setContentType(null),"setRequestHeader"in g&&p.forEach(o.toJSON(),function(U,x){g.setRequestHeader(x,U)}),p.isUndefined(n.withCredentials)||(g.withCredentials=!!n.withCredentials),a&&a!=="json"&&(g.responseType=n.responseType),u&&([m,f]=Tr(u,!0),g.addEventListener("progress",m)),l&&g.upload&&([c,h]=Tr(l),g.upload.addEventListener("progress",c),g.upload.addEventListener("loadend",h)),(n.cancelToken||n.signal)&&(d=A=>{g&&(s(!A||A.type?new _t(null,t,g):A),g.abort(),g=null)},n.cancelToken&&n.cancelToken.subscribe(d),n.signal&&(n.signal.aborted?d():n.signal.addEventListener("abort",d)));const S=Ba(n.url);if(S&&re.protocols.indexOf(S)===-1){s(new R("Unsupported protocol "+S+":",R.ERR_BAD_REQUEST,t));return}g.send(i||null)})},Va=(t,e)=>{const{length:r}=t=t?t.filter(Boolean):[];if(e||r){let s=new AbortController,n;const i=function(u){if(!n){n=!0,a();const d=u instanceof Error?u:this.reason;s.abort(d instanceof R?d:new _t(d instanceof Error?d.message:d))}};let o=e&&setTimeout(()=>{o=null,i(new R(`timeout ${e} of ms exceeded`,R.ETIMEDOUT))},e);const a=()=>{t&&(o&&clearTimeout(o),o=null,t.forEach(u=>{u.unsubscribe?u.unsubscribe(i):u.removeEventListener("abort",i)}),t=null)};t.forEach(u=>u.addEventListener("abort",i));const{signal:l}=s;return l.unsubscribe=()=>p.asap(a),l}},Ja=Va,Ka=function*(t,e){let r=t.byteLength;if(!e||r<e){yield t;return}let s=0,n;for(;s<r;)n=s+e,yield t.slice(s,n),s=n},Xa=async function*(t,e){for await(const r of Ya(t))yield*Ka(r,e)},Ya=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:r,value:s}=await e.read();if(r)break;yield s}}finally{await e.cancel()}},mn=(t,e,r,s)=>{const n=Xa(t,e);let i=0,o,a=l=>{o||(o=!0,s&&s(l))};return new ReadableStream({async pull(l){try{const{done:u,value:d}=await n.next();if(u){a(),l.close();return}let c=d.byteLength;if(r){let m=i+=c;r(m)}l.enqueue(new Uint8Array(d))}catch(u){throw a(u),u}},cancel(l){return a(l),n.return()}},{highWaterMark:2})},Br=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",Oi=Br&&typeof ReadableStream=="function",Qa=Br&&(typeof TextEncoder=="function"?(t=>e=>t.encode(e))(new TextEncoder):async t=>new Uint8Array(await new Response(t).arrayBuffer())),Fi=(t,...e)=>{try{return!!t(...e)}catch{return!1}},Za=Oi&&Fi(()=>{let t=!1;const e=new Request(re.origin,{body:new ReadableStream,method:"POST",get duplex(){return t=!0,"half"}}).headers.has("Content-Type");return t&&!e}),gn=64*1024,Ps=Oi&&Fi(()=>p.isReadableStream(new Response("").body)),Or={stream:Ps&&(t=>t.body)};Br&&(t=>{["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!Or[e]&&(Or[e]=p.isFunction(t[e])?r=>r[e]():(r,s)=>{throw new R(`Response type '${e}' is not supported`,R.ERR_NOT_SUPPORT,s)})})})(new Response);const el=async t=>{if(t==null)return 0;if(p.isBlob(t))return t.size;if(p.isSpecCompliantForm(t))return(await new Request(re.origin,{method:"POST",body:t}).arrayBuffer()).byteLength;if(p.isArrayBufferView(t)||p.isArrayBuffer(t))return t.byteLength;if(p.isURLSearchParams(t)&&(t=t+""),p.isString(t))return(await Qa(t)).byteLength},tl=async(t,e)=>{const r=p.toFiniteNumber(t.getContentLength());return r??el(e)},rl=Br&&(async t=>{let{url:e,method:r,data:s,signal:n,cancelToken:i,timeout:o,onDownloadProgress:a,onUploadProgress:l,responseType:u,headers:d,withCredentials:c="same-origin",fetchOptions:m}=Ti(t);u=u?(u+"").toLowerCase():"text";let h=Ja([n,i&&i.toAbortSignal()],o),f;const y=h&&h.unsubscribe&&(()=>{h.unsubscribe()});let g;try{if(l&&Za&&r!=="get"&&r!=="head"&&(g=await tl(d,s))!==0){let x=new Request(e,{method:"POST",body:s,duplex:"half"}),P;if(p.isFormData(s)&&(P=x.headers.get("content-type"))&&d.setContentType(P),x.body){const[O,$]=pn(g,Tr(hn(l)));s=mn(x.body,gn,O,$)}}p.isString(c)||(c=c?"include":"omit");const _="credentials"in Request.prototype;f=new Request(e,{...m,signal:h,method:r.toUpperCase(),headers:d.normalize().toJSON(),body:s,duplex:"half",credentials:_?c:void 0});let S=await fetch(f);const A=Ps&&(u==="stream"||u==="response");if(Ps&&(a||A&&y)){const x={};["status","statusText","headers"].forEach(j=>{x[j]=S[j]});const P=p.toFiniteNumber(S.headers.get("content-length")),[O,$]=a&&pn(P,Tr(hn(a),!0))||[];S=new Response(mn(S.body,gn,O,()=>{$&&$(),y&&y()}),x)}u=u||"text";let U=await Or[p.findKey(Or,u)||"text"](S,t);return!A&&y&&y(),await new Promise((x,P)=>{Pi(x,P,{data:U,headers:_e.from(S.headers),status:S.status,statusText:S.statusText,config:t,request:f})})}catch(_){throw y&&y(),_&&_.name==="TypeError"&&/fetch/i.test(_.message)?Object.assign(new R("Network Error",R.ERR_NETWORK,t,f),{cause:_.cause||_}):R.from(_,_&&_.code,t,f)}}),Es={http:ma,xhr:Ga,fetch:rl};p.forEach(Es,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const yn=t=>`- ${t}`,sl=t=>p.isFunction(t)||t===null||t===!1,Ui={getAdapter:t=>{t=p.isArray(t)?t:[t];const{length:e}=t;let r,s;const n={};for(let i=0;i<e;i++){r=t[i];let o;if(s=r,!sl(r)&&(s=Es[(o=String(r)).toLowerCase()],s===void 0))throw new R(`Unknown adapter '${o}'`);if(s)break;n[o||"#"+i]=s}if(!s){const i=Object.entries(n).map(([a,l])=>`adapter ${a} `+(l===!1?"is not supported by the environment":"is not available in the build"));let o=e?i.length>1?`since :
`+i.map(yn).join(`
`):" "+yn(i[0]):"as no adapter specified";throw new R("There is no suitable adapter to dispatch the request "+o,"ERR_NOT_SUPPORT")}return s},adapters:Es};function Kr(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new _t(null,t)}function _n(t){return Kr(t),t.headers=_e.from(t.headers),t.data=Jr.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),Ui.getAdapter(t.adapter||Ds.adapter)(t).then(function(s){return Kr(t),s.data=Jr.call(t,t.transformResponse,s),s.headers=_e.from(s.headers),s},function(s){return Si(s)||(Kr(t),s&&s.response&&(s.response.data=Jr.call(t,t.transformResponse,s.response),s.response.headers=_e.from(s.response.headers))),Promise.reject(s)})}const Ri="1.7.7",qs={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{qs[t]=function(s){return typeof s===t||"a"+(e<1?"n ":" ")+t}});const vn={};qs.transitional=function(e,r,s){function n(i,o){return"[Axios v"+Ri+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,a)=>{if(e===!1)throw new R(n(o," has been removed"+(r?" in "+r:"")),R.ERR_DEPRECATED);return r&&!vn[o]&&(vn[o]=!0,console.warn(n(o," has been deprecated since v"+r+" and will be removed in the near future"))),e?e(i,o,a):!0}};function nl(t,e,r){if(typeof t!="object")throw new R("options must be an object",R.ERR_BAD_OPTION_VALUE);const s=Object.keys(t);let n=s.length;for(;n-- >0;){const i=s[n],o=e[i];if(o){const a=t[i],l=a===void 0||o(a,i,t);if(l!==!0)throw new R("option "+i+" must be "+l,R.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new R("Unknown option "+i,R.ERR_BAD_OPTION)}}const Ts={assertOptions:nl,validators:qs},Ie=Ts.validators;class Fr{constructor(e){this.defaults=e,this.interceptors={request:new cn,response:new cn}}async request(e,r){try{return await this._request(e,r)}catch(s){if(s instanceof Error){let n;Error.captureStackTrace?Error.captureStackTrace(n={}):n=new Error;const i=n.stack?n.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(e,r){typeof e=="string"?(r=r||{},r.url=e):r=e||{},r=dt(this.defaults,r);const{transitional:s,paramsSerializer:n,headers:i}=r;s!==void 0&&Ts.assertOptions(s,{silentJSONParsing:Ie.transitional(Ie.boolean),forcedJSONParsing:Ie.transitional(Ie.boolean),clarifyTimeoutError:Ie.transitional(Ie.boolean)},!1),n!=null&&(p.isFunction(n)?r.paramsSerializer={serialize:n}:Ts.assertOptions(n,{encode:Ie.function,serialize:Ie.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let o=i&&p.merge(i.common,i[r.method]);i&&p.forEach(["delete","get","head","post","put","patch","common"],f=>{delete i[f]}),r.headers=_e.concat(o,i);const a=[];let l=!0;this.interceptors.request.forEach(function(y){typeof y.runWhen=="function"&&y.runWhen(r)===!1||(l=l&&y.synchronous,a.unshift(y.fulfilled,y.rejected))});const u=[];this.interceptors.response.forEach(function(y){u.push(y.fulfilled,y.rejected)});let d,c=0,m;if(!l){const f=[_n.bind(this),void 0];for(f.unshift.apply(f,a),f.push.apply(f,u),m=f.length,d=Promise.resolve(r);c<m;)d=d.then(f[c++],f[c++]);return d}m=a.length;let h=r;for(c=0;c<m;){const f=a[c++],y=a[c++];try{h=f(h)}catch(g){y.call(this,g);break}}try{d=_n.call(this,h)}catch(f){return Promise.reject(f)}for(c=0,m=u.length;c<m;)d=d.then(u[c++],u[c++]);return d}getUri(e){e=dt(this.defaults,e);const r=Ei(e.baseURL,e.url);return vi(r,e.params,e.paramsSerializer)}}p.forEach(["delete","get","head","options"],function(e){Fr.prototype[e]=function(r,s){return this.request(dt(s||{},{method:e,url:r,data:(s||{}).data}))}});p.forEach(["post","put","patch"],function(e){function r(s){return function(i,o,a){return this.request(dt(a||{},{method:e,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}Fr.prototype[e]=r(),Fr.prototype[e+"Form"]=r(!0)});const vr=Fr;class zs{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(i){r=i});const s=this;this.promise.then(n=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](n);s._listeners=null}),this.promise.then=n=>{let i;const o=new Promise(a=>{s.subscribe(a),i=a}).then(n);return o.cancel=function(){s.unsubscribe(i)},o},e(function(i,o,a){s.reason||(s.reason=new _t(i,o,a),r(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const r=this._listeners.indexOf(e);r!==-1&&this._listeners.splice(r,1)}toAbortSignal(){const e=new AbortController,r=s=>{e.abort(s)};return this.subscribe(r),e.signal.unsubscribe=()=>this.unsubscribe(r),e.signal}static source(){let e;return{token:new zs(function(n){e=n}),cancel:e}}}const il=zs;function ol(t){return function(r){return t.apply(null,r)}}function al(t){return p.isObject(t)&&t.isAxiosError===!0}const Os={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Os).forEach(([t,e])=>{Os[e]=t});const ll=Os;function Ai(t){const e=new vr(t),r=ai(vr.prototype.request,e);return p.extend(r,vr.prototype,e,{allOwnKeys:!0}),p.extend(r,e,null,{allOwnKeys:!0}),r.create=function(n){return Ai(dt(t,n))},r}const B=Ai(Ds);B.Axios=vr;B.CanceledError=_t;B.CancelToken=il;B.isCancel=Si;B.VERSION=Ri;B.toFormData=jr;B.AxiosError=R;B.Cancel=B.CanceledError;B.all=function(e){return Promise.all(e)};B.spread=ol;B.isAxiosError=al;B.mergeConfig=dt;B.AxiosHeaders=_e;B.formToJSON=t=>wi(p.isHTMLForm(t)?new FormData(t):t);B.getAdapter=Ui.getAdapter;B.HttpStatusCode=ll;B.default=B;const ul=B;window.axios=ul;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";const xr=class xr{constructor(e){this.value=e}isTop(){return this.value===xr.Top}};sn(xr,"Top","top");let Fs=xr;class Hs{constructor(e,r){this.alignment=new Fs(e),this.duration=r}static fromJson(e){return new Hs(e.alignment,e.duration)}}function cl(){let t="";for(;t.length<32;)t+=Math.random().toString(16).substring(2);const e=(Number.parseInt(t.substring(16,1),16)&3|8).toString(16);return`${t.substring(0,8)}-${t.substring(8,4)}-4${t.substring(13,3)}-${e}${t.substring(17,3)}-${t.substring(20,12)}`}class Ws{constructor(e,r,s){this.$el=null,this.id=cl(),this.isVisible=!1,this.duration=e,this.message=r,this.timeout=null,this.trashed=!1,this.type=s}static fromJson(e){return new Ws(e.duration,e.message,e.type)}dispose(){this.timeout&&clearTimeout(this.timeout),this.isVisible=!1,this.$el.addEventListener("transitioncancel",()=>{this.trashed=!0}),this.$el.addEventListener("transitionend",()=>{this.trashed=!0})}runAfterDuration(e){this.timeout=setTimeout(()=>e(this),this.duration)}select(e){return e[this.type]}show(e){this.$el=e,this.isVisible=!0}}function dl(t){t.data("toasterHub",(e,r)=>(r=Hs.fromJson(r),{_toasts:[],get toasts(){const s=this._toasts.filter(n=>!n.trashed);return this._toasts.length&&!s.length&&this.$nextTick(()=>{this._toasts=[]}),s},init(){document.addEventListener("toaster:received",s=>{this.show({duration:r.duration,...s.detail})}),e.forEach(s=>this.show(s))},show(s){s=t.reactive(Ws.fromJson(s)),s.runAfterDuration(n=>n.dispose()),r.alignment.isTop()?this._toasts.unshift(s):this._toasts.push(s)}}))}const Mr=(t,e)=>{document.dispatchEvent(new CustomEvent("toaster:received",{detail:{message:t,type:e}}))},pl=t=>Mr(t,"error"),hl=t=>Mr(t,"info"),fl=t=>Mr(t,"success"),ml=t=>Mr(t,"warning"),gl=Object.freeze(Object.defineProperty({__proto__:null,error:pl,info:hl,success:fl,warning:ml},Symbol.toStringTag,{value:"Module"}));window.Toaster=gl;document.addEventListener("alpine:init",()=>{window.Alpine.plugin(dl)});function cr(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var yl=0;function Ci(t){return"__private_"+yl+++"_"+t}function _l(t,e,r){const s=[];return t.forEach(n=>typeof n!="string"?s.push(n):e[Symbol.split](n).forEach((i,o,a)=>{i!==""&&s.push(i),o<a.length-1&&s.push(r)})),s}/**
 * Takes a string with placeholder variables like `%{smart_count} file selected`
 * and replaces it with values from options `{smart_count: 5}`
 *
 * @license https://github.com/airbnb/polyglot.js/blob/master/LICENSE
 * taken from https://github.com/airbnb/polyglot.js/blob/master/lib/polyglot.js#L299
 *
 * @param phrase that needs interpolation, with placeholders
 * @param options with values that will be used to replace placeholders
 */function bn(t,e){const r=/\$/g,s="$$$$";let n=[t];if(e==null)return n;for(const i of Object.keys(e))if(i!=="_"){let o=e[i];typeof o=="string"&&(o=r[Symbol.replace](o,s)),n=_l(n,new RegExp(`%\\{${i}\\}`,"g"),o)}return n}const vl=t=>{throw new Error(`missing string: ${t}`)};var Pt=Ci("onMissingKey"),Et=Ci("apply");class xi{constructor(e,r){let{onMissingKey:s=vl}=r===void 0?{}:r;Object.defineProperty(this,Et,{value:bl}),Object.defineProperty(this,Pt,{writable:!0,value:void 0}),this.locale={strings:{},pluralize(n){return n===1?0:1}},Array.isArray(e)?e.forEach(cr(this,Et)[Et],this):cr(this,Et)[Et](e),cr(this,Pt)[Pt]=s}translate(e,r){return this.translateArray(e,r).join("")}translateArray(e,r){let s=this.locale.strings[e];if(s==null&&(cr(this,Pt)[Pt](e),s=e),typeof s=="object"){if(r&&typeof r.smart_count<"u"){const i=this.locale.pluralize(r.smart_count);return bn(s[i],r)}throw new Error("Attempted to use a string with plural forms, but no value was given for %{smart_count}")}if(typeof s!="string")throw new Error("string was not a string");return bn(s,r)}}function bl(t){if(!(t!=null&&t.strings))return;const e=this.locale;Object.assign(this.locale,{strings:{...e.strings,...t.strings},pluralize:t.pluralize||e.pluralize})}var dr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var wl=function(){var e={},r=e._fns={};e.emit=function(o,a,l,u,d,c,m){var h=s(o);h.length&&n(o,h,[a,l,u,d,c,m])},e.on=function(o,a){r[o]||(r[o]=[]),r[o].push(a)},e.once=function(o,a){function l(){a.apply(this,arguments),e.off(o,l)}this.on(o,l)},e.off=function(o,a){var l=[];if(o&&a){var u=this._fns[o],d=0,c=u?u.length:0;for(d;d<c;d++)u[d]!==a&&l.push(u[d])}l.length?this._fns[o]=l:delete this._fns[o]};function s(i){var o=r[i]?r[i]:[],a=i.indexOf(":"),l=a===-1?[i]:[i.substring(0,a),i.substring(a+1)],u=Object.keys(r),d=0,c=u.length;for(d;d<c;d++){var m=u[d];if(m==="*"&&(o=o.concat(r[m])),l.length===2&&l[0]===m){o=o.concat(r[m]);break}}return o}function n(i,o,a){var l=0,u=o.length;for(l;l<u&&o[l];l++)o[l].event=i,o[l].apply(o[l],a)}return e};const Sl=vt(wl);let Pl="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict",El=(t=21)=>{let e="",r=t|0;for(;r--;)e+=Pl[Math.random()*64|0];return e};function Tl(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var Gs=Tl,Ol=typeof dr=="object"&&dr&&dr.Object===Object&&dr,Fl=Ol,Ul=Fl,Rl=typeof self=="object"&&self&&self.Object===Object&&self,Al=Ul||Rl||Function("return this")(),$i=Al,Cl=$i,xl=function(){return Cl.Date.now()},$l=xl,kl=/\s/;function Nl(t){for(var e=t.length;e--&&kl.test(t.charAt(e)););return e}var jl=Nl,Ll=jl,Bl=/^\s+/;function Ml(t){return t&&t.slice(0,Ll(t)+1).replace(Bl,"")}var Il=Ml,Dl=$i,ql=Dl.Symbol,ki=ql,wn=ki,Ni=Object.prototype,zl=Ni.hasOwnProperty,Hl=Ni.toString,Tt=wn?wn.toStringTag:void 0;function Wl(t){var e=zl.call(t,Tt),r=t[Tt];try{t[Tt]=void 0;var s=!0}catch{}var n=Hl.call(t);return s&&(e?t[Tt]=r:delete t[Tt]),n}var Gl=Wl,Vl=Object.prototype,Jl=Vl.toString;function Kl(t){return Jl.call(t)}var Xl=Kl,Sn=ki,Yl=Gl,Ql=Xl,Zl="[object Null]",eu="[object Undefined]",Pn=Sn?Sn.toStringTag:void 0;function tu(t){return t==null?t===void 0?eu:Zl:Pn&&Pn in Object(t)?Yl(t):Ql(t)}var ru=tu;function su(t){return t!=null&&typeof t=="object"}var nu=su,iu=ru,ou=nu,au="[object Symbol]";function lu(t){return typeof t=="symbol"||ou(t)&&iu(t)==au}var uu=lu,cu=Il,En=Gs,du=uu,Tn=0/0,pu=/^[-+]0x[0-9a-f]+$/i,hu=/^0b[01]+$/i,fu=/^0o[0-7]+$/i,mu=parseInt;function gu(t){if(typeof t=="number")return t;if(du(t))return Tn;if(En(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=En(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=cu(t);var r=hu.test(t);return r||fu.test(t)?mu(t.slice(2),r?2:8):pu.test(t)?Tn:+t}var yu=gu,_u=Gs,Xr=$l,On=yu,vu="Expected a function",bu=Math.max,wu=Math.min;function Su(t,e,r){var s,n,i,o,a,l,u=0,d=!1,c=!1,m=!0;if(typeof t!="function")throw new TypeError(vu);e=On(e)||0,_u(r)&&(d=!!r.leading,c="maxWait"in r,i=c?bu(On(r.maxWait)||0,e):i,m="trailing"in r?!!r.trailing:m);function h(P){var O=s,$=n;return s=n=void 0,u=P,o=t.apply($,O),o}function f(P){return u=P,a=setTimeout(_,e),d?h(P):o}function y(P){var O=P-l,$=P-u,j=e-O;return c?wu(j,i-$):j}function g(P){var O=P-l,$=P-u;return l===void 0||O>=e||O<0||c&&$>=i}function _(){var P=Xr();if(g(P))return S(P);a=setTimeout(_,y(P))}function S(P){return a=void 0,m&&s?h(P):(s=n=void 0,o)}function A(){a!==void 0&&clearTimeout(a),u=0,s=l=n=a=void 0}function U(){return a===void 0?o:S(Xr())}function x(){var P=Xr(),O=g(P);if(s=arguments,n=this,l=P,O){if(a===void 0)return f(l);if(c)return clearTimeout(a),a=setTimeout(_,e),h(l)}return a===void 0&&(a=setTimeout(_,e)),o}return x.cancel=A,x.flush=U,x}var Pu=Su,Eu=Pu,Tu=Gs,Ou="Expected a function";function Fu(t,e,r){var s=!0,n=!0;if(typeof t!="function")throw new TypeError(Ou);return Tu(r)&&(s="leading"in r?!!r.leading:s,n="trailing"in r?!!r.trailing:n),Eu(t,e,{leading:s,maxWait:e,trailing:n})}var Uu=Fu;const Ru=vt(Uu);function br(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Au=0;function ji(t){return"__private_"+Au+++"_"+t}const Cu={version:"4.2.0"};var Qe=ji("callbacks"),Yr=ji("publish");class Li{constructor(){Object.defineProperty(this,Yr,{value:xu}),this.state={},Object.defineProperty(this,Qe,{writable:!0,value:new Set})}getState(){return this.state}setState(e){const r={...this.state},s={...this.state,...e};this.state=s,br(this,Yr)[Yr](r,s,e)}subscribe(e){return br(this,Qe)[Qe].add(e),()=>{br(this,Qe)[Qe].delete(e)}}}function xu(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];br(this,Qe)[Qe].forEach(s=>{s(...e)})}Li.VERSION=Cu.version;function Bi(t){const e=t.lastIndexOf(".");return e===-1||e===t.length-1?{name:t,extension:void 0}:{name:t.slice(0,e),extension:t.slice(e+1)}}const Fn={__proto__:null,md:"text/markdown",markdown:"text/markdown",mp4:"video/mp4",mp3:"audio/mp3",svg:"image/svg+xml",jpg:"image/jpeg",png:"image/png",webp:"image/webp",gif:"image/gif",heic:"image/heic",heif:"image/heif",yaml:"text/yaml",yml:"text/yaml",csv:"text/csv",tsv:"text/tab-separated-values",tab:"text/tab-separated-values",avi:"video/x-msvideo",mks:"video/x-matroska",mkv:"video/x-matroska",mov:"video/quicktime",dicom:"application/dicom",doc:"application/msword",msg:"application/vnd.ms-outlook",docm:"application/vnd.ms-word.document.macroenabled.12",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",dot:"application/msword",dotm:"application/vnd.ms-word.template.macroenabled.12",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xla:"application/vnd.ms-excel",xlam:"application/vnd.ms-excel.addin.macroenabled.12",xlc:"application/vnd.ms-excel",xlf:"application/x-xliff+xml",xlm:"application/vnd.ms-excel",xls:"application/vnd.ms-excel",xlsb:"application/vnd.ms-excel.sheet.binary.macroenabled.12",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlt:"application/vnd.ms-excel",xltm:"application/vnd.ms-excel.template.macroenabled.12",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",xlw:"application/vnd.ms-excel",txt:"text/plain",text:"text/plain",conf:"text/plain",log:"text/plain",pdf:"application/pdf",zip:"application/zip","7z":"application/x-7z-compressed",rar:"application/x-rar-compressed",tar:"application/x-tar",gz:"application/gzip",dmg:"application/x-apple-diskimage"};function Mi(t){var e;if(t.type)return t.type;const r=t.name?(e=Bi(t.name).extension)==null?void 0:e.toLowerCase():null;return r&&r in Fn?Fn[r]:"application/octet-stream"}function $u(t){return t.charCodeAt(0).toString(32)}function Un(t){let e="";return t.replace(/[^A-Z0-9]/gi,r=>(e+=`-${$u(r)}`,"/"))+e}function ku(t,e){let r=e||"uppy";return typeof t.name=="string"&&(r+=`-${Un(t.name.toLowerCase())}`),t.type!==void 0&&(r+=`-${t.type}`),t.meta&&typeof t.meta.relativePath=="string"&&(r+=`-${Un(t.meta.relativePath.toLowerCase())}`),t.data.size!==void 0&&(r+=`-${t.data.size}`),t.data.lastModified!==void 0&&(r+=`-${t.data.lastModified}`),r}function Nu(t){return!t.isRemote||!t.remote?!1:new Set(["box","dropbox","drive","facebook","unsplash"]).has(t.remote.provider)}function ju(t,e){if(Nu(t))return t.id;const r=Mi(t);return ku({...t,type:r},e)}function Lu(t){if(t==null&&typeof navigator<"u"&&(t=navigator.userAgent),!t)return!0;const e=/Edge\/(\d+\.\d+)/.exec(t);if(!e)return!0;const s=e[1].split(".",2),n=parseInt(s[0],10),i=parseInt(s[1],10);return n<15||n===15&&i<15063||n>18||n===18&&i>=18218}function Bu(t,e){return e.name?e.name:t.split("/")[0]==="image"?`${t.split("/")[0]}.${t.split("/")[1]}`:"noname"}function Qr(t){return t<10?`0${t}`:t.toString()}function wr(){const t=new Date,e=Qr(t.getHours()),r=Qr(t.getMinutes()),s=Qr(t.getSeconds());return`${e}:${r}:${s}`}const Mu={debug:()=>{},warn:()=>{},error:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return console.error(`[Uppy] [${wr()}]`,...e)}},Iu={debug:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return console.debug(`[Uppy] [${wr()}]`,...e)},warn:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return console.warn(`[Uppy] [${wr()}]`,...e)},error:function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];return console.error(`[Uppy] [${wr()}]`,...e)}};var Du=function(e){if(typeof e!="number"||Number.isNaN(e))throw new TypeError(`Expected a number, got ${typeof e}`);const r=e<0;let s=Math.abs(e);if(r&&(s=-s),s===0)return"0 B";const n=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],i=Math.min(Math.floor(Math.log(s)/Math.log(1024)),n.length-1),o=Number(s/1024**i),a=n[i];return`${o>=10||o%1===0?Math.round(o):o.toFixed(1)} ${a}`};const ft=vt(Du);function Ii(t,e){this.text=t=t||"",this.hasWild=~t.indexOf("*"),this.separator=e,this.parts=t.split(e)}Ii.prototype.match=function(t){var e=!0,r=this.parts,s,n=r.length,i;if(typeof t=="string"||t instanceof String)if(!this.hasWild&&this.text!=t)e=!1;else{for(i=(t||"").split(this.separator),s=0;e&&s<n;s++)r[s]!=="*"&&(s<i.length?e=r[s]===i[s]:e=!1);e=e&&i}else if(typeof t.splice=="function")for(e=[],s=t.length;s--;)this.match(t[s])&&(e[e.length]=t[s]);else if(typeof t=="object"){e={};for(var o in t)this.match(o)&&(e[o]=t[o])}return e};var qu=function(t,e,r){var s=new Ii(t,r||/[\/\.]/);return typeof e<"u"?s.match(e):s},zu=qu,Hu=/[\/\+\.]/,Wu=function(t,e){function r(s){var n=zu(s,t,Hu);return n&&n.length>=2}return e?r(e.split(";")[0]):r};const Gu=vt(Wu),Vu={maxFileSize:null,minFileSize:null,maxTotalFileSize:null,maxNumberOfFiles:null,minNumberOfFiles:null,allowedFileTypes:null,requiredMetaFields:[]};class me extends Error{constructor(e,r){var s;super(e),this.isRestriction=!0,this.isUserFacing=(s=r==null?void 0:r.isUserFacing)!=null?s:!0,r!=null&&r.file&&(this.file=r.file)}}class Ju{constructor(e,r){this.getI18n=r,this.getOpts=()=>{var s;const n=e();if(((s=n.restrictions)==null?void 0:s.allowedFileTypes)!=null&&!Array.isArray(n.restrictions.allowedFileTypes))throw new TypeError("`restrictions.allowedFileTypes` must be an array");return n}}validateAggregateRestrictions(e,r){const{maxTotalFileSize:s,maxNumberOfFiles:n}=this.getOpts().restrictions;if(n&&e.filter(o=>!o.isGhost).length+r.length>n)throw new me(`${this.getI18n()("youCanOnlyUploadX",{smart_count:n})}`);if(s){const i=[...e,...r].reduce((o,a)=>{var l;return o+((l=a.size)!=null?l:0)},0);if(i>s)throw new me(this.getI18n()("aggregateExceedsSize",{sizeAllowed:ft(s),size:ft(i)}))}}validateSingleFile(e){const{maxFileSize:r,minFileSize:s,allowedFileTypes:n}=this.getOpts().restrictions;if(n&&!n.some(a=>a.includes("/")?e.type?Gu(e.type.replace(/;.*?$/,""),a):!1:a[0]==="."&&e.extension?e.extension.toLowerCase()===a.slice(1).toLowerCase():!1)){const a=n.join(", ");throw new me(this.getI18n()("youCanOnlyUploadFileTypes",{types:a}),{file:e})}if(r&&e.size!=null&&e.size>r){var i;throw new me(this.getI18n()("exceedsSize",{size:ft(r),file:(i=e.name)!=null?i:this.getI18n()("unnamed")}),{file:e})}if(s&&e.size!=null&&e.size<s)throw new me(this.getI18n()("inferiorSize",{size:ft(s)}),{file:e})}validate(e,r){r.forEach(s=>{this.validateSingleFile(s)}),this.validateAggregateRestrictions(e,r)}validateMinNumberOfFiles(e){const{minNumberOfFiles:r}=this.getOpts().restrictions;if(r&&Object.keys(e).length<r)throw new me(this.getI18n()("youHaveToAtLeastSelectX",{smart_count:r}))}getMissingRequiredMetaFields(e){var r;const s=new me(this.getI18n()("missingRequiredMetaFieldOnFile",{fileName:(r=e.name)!=null?r:this.getI18n()("unnamed")})),{requiredMetaFields:n}=this.getOpts().restrictions,i=[];for(const o of n)(!Object.hasOwn(e.meta,o)||e.meta[o]==="")&&i.push(o);return{missingFields:i,error:s}}}const Ku={strings:{addBulkFilesFailed:{0:"Failed to add %{smart_count} file due to an internal error",1:"Failed to add %{smart_count} files due to internal errors"},youCanOnlyUploadX:{0:"You can only upload %{smart_count} file",1:"You can only upload %{smart_count} files"},youHaveToAtLeastSelectX:{0:"You have to select at least %{smart_count} file",1:"You have to select at least %{smart_count} files"},aggregateExceedsSize:"You selected %{size} of files, but maximum allowed size is %{sizeAllowed}",exceedsSize:"%{file} exceeds maximum allowed size of %{size}",missingRequiredMetaField:"Missing required meta fields",missingRequiredMetaFieldOnFile:"Missing required meta fields in %{fileName}",inferiorSize:"This file is smaller than the allowed size of %{size}",youCanOnlyUploadFileTypes:"You can only upload: %{types}",noMoreFilesAllowed:"Cannot add more files",noDuplicates:"Cannot add the duplicate file '%{fileName}', it already exists",companionError:"Connection with Companion failed",authAborted:"Authentication aborted",companionUnauthorizeHint:"To unauthorize to your %{provider} account, please go to %{url}",failedToUpload:"Failed to upload %{file}",noInternetConnection:"No Internet connection",connectedToInternet:"Connected to the Internet",noFilesFound:"You have no files or folders here",noSearchResults:"Unfortunately, there are no results for this search",selectX:{0:"Select %{smart_count}",1:"Select %{smart_count}"},allFilesFromFolderNamed:"All files from folder %{name}",openFolderNamed:"Open folder %{name}",cancel:"Cancel",logOut:"Log out",logIn:"Log in",pickFiles:"Pick files",pickPhotos:"Pick photos",filter:"Filter",resetFilter:"Reset filter",loading:"Loading...",loadedXFiles:"Loaded %{numFiles} files",authenticateWithTitle:"Please authenticate with %{pluginName} to select files",authenticateWith:"Connect to %{pluginName}",signInWithGoogle:"Sign in with Google",searchImages:"Search for images",enterTextToSearch:"Enter text to search for images",search:"Search",resetSearch:"Reset search",emptyFolderAdded:"No files were added from empty folder",addedNumFiles:"Added %{numFiles} file(s)",folderAlreadyAdded:'The folder "%{folder}" was already added',folderAdded:{0:"Added %{smart_count} file from %{folder}",1:"Added %{smart_count} files from %{folder}"},additionalRestrictionsFailed:"%{count} additional restrictions were not fulfilled",unnamed:"Unnamed",pleaseWait:"Please wait"}};function v(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Xu=0;function k(t){return"__private_"+Xu+++"_"+t}const Yu={version:"4.4.7"},pr={totalProgress:0,allowNewUpload:!0,error:null,recoveredState:null};var D=k("plugins"),W=k("restricter"),Ot=k("storeUnsubscribe"),Ee=k("emitter"),Ze=k("preProcessors"),et=k("uploaders"),Ne=k("postProcessors"),ce=k("informAndEmit"),sr=k("checkRequiredMetaFieldsOnFile"),Zr=k("checkRequiredMetaFields"),Ft=k("assertNewUploadAllowed"),Us=k("transformFile"),Ut=k("startIfAutoProceed"),Rt=k("checkAndUpdateFileState"),Qt=k("getFilesToRetry"),At=k("doRetryAll"),Rs=k("handleUploadProgress"),Ct=k("updateTotalProgress"),je=k("updateTotalProgressThrottled"),As=k("calculateTotalProgress"),es=k("addListeners"),ye=k("updateOnlineStatus"),xt=k("requestClientById"),Ae=k("createUpload"),ts=k("getUpload"),lt=k("removeUpload"),Ce=k("runUpload");class Ir{constructor(e){Object.defineProperty(this,Ce,{value:hc}),Object.defineProperty(this,lt,{value:pc}),Object.defineProperty(this,ts,{value:dc}),Object.defineProperty(this,Ae,{value:cc}),Object.defineProperty(this,es,{value:uc}),Object.defineProperty(this,As,{value:lc}),Object.defineProperty(this,Ct,{value:ac}),Object.defineProperty(this,At,{value:oc}),Object.defineProperty(this,Qt,{value:ic}),Object.defineProperty(this,Rt,{value:nc}),Object.defineProperty(this,Ut,{value:sc}),Object.defineProperty(this,Us,{value:rc}),Object.defineProperty(this,Ft,{value:tc}),Object.defineProperty(this,Zr,{value:ec}),Object.defineProperty(this,sr,{value:Zu}),Object.defineProperty(this,ce,{value:Qu}),Object.defineProperty(this,D,{writable:!0,value:Object.create(null)}),Object.defineProperty(this,W,{writable:!0,value:void 0}),Object.defineProperty(this,Ot,{writable:!0,value:void 0}),Object.defineProperty(this,Ee,{writable:!0,value:Sl()}),Object.defineProperty(this,Ze,{writable:!0,value:new Set}),Object.defineProperty(this,et,{writable:!0,value:new Set}),Object.defineProperty(this,Ne,{writable:!0,value:new Set}),this.scheduledAutoProceed=null,this.wasOffline=!1,Object.defineProperty(this,Rs,{writable:!0,value:(n,i)=>{const o=n?this.getFile(n.id):void 0;if(n==null||!o){this.log(`Not setting progress for a file that has been removed: ${n==null?void 0:n.id}`);return}if(o.progress.percentage===100){this.log(`Not setting progress for a file that has been already uploaded: ${n.id}`);return}const a={bytesTotal:i.bytesTotal,percentage:i.bytesTotal!=null&&Number.isFinite(i.bytesTotal)&&i.bytesTotal>0?Math.round(i.bytesUploaded/i.bytesTotal*100):void 0};o.progress.uploadStarted!=null?this.setFileState(n.id,{progress:{...o.progress,...a,bytesUploaded:i.bytesUploaded}}):this.setFileState(n.id,{progress:{...o.progress,...a}}),v(this,je)[je]()}}),Object.defineProperty(this,je,{writable:!0,value:Ru(()=>v(this,Ct)[Ct](),500,{leading:!0,trailing:!0})}),Object.defineProperty(this,ye,{writable:!0,value:this.updateOnlineStatus.bind(this)}),Object.defineProperty(this,xt,{writable:!0,value:new Map}),this.defaultLocale=Ku;const r={id:"uppy",autoProceed:!1,allowMultipleUploadBatches:!0,debug:!1,restrictions:Vu,meta:{},onBeforeFileAdded:(n,i)=>!Object.hasOwn(i,n.id),onBeforeUpload:n=>n,store:new Li,logger:Mu,infoTimeout:5e3},s={...r,...e};this.opts={...s,restrictions:{...r.restrictions,...e&&e.restrictions}},e&&e.logger&&e.debug?this.log("You are using a custom `logger`, but also set `debug: true`, which uses built-in logger to output logs to console. Ignoring `debug: true` and using your custom `logger`.","warning"):e&&e.debug&&(this.opts.logger=Iu),this.log(`Using Core v${Ir.VERSION}`),this.i18nInit(),this.store=this.opts.store,this.setState({...pr,plugins:{},files:{},currentUploads:{},capabilities:{uploadProgress:Lu(),individualCancellation:!0,resumableUploads:!1},meta:{...this.opts.meta},info:[]}),v(this,W)[W]=new Ju(()=>this.opts,()=>this.i18n),v(this,Ot)[Ot]=this.store.subscribe((n,i,o)=>{this.emit("state-update",n,i,o),this.updateAll(i)}),this.opts.debug&&typeof window<"u"&&(window[this.opts.id]=this),v(this,es)[es]()}emit(e){for(var r=arguments.length,s=new Array(r>1?r-1:0),n=1;n<r;n++)s[n-1]=arguments[n];v(this,Ee)[Ee].emit(e,...s)}on(e,r){return v(this,Ee)[Ee].on(e,r),this}once(e,r){return v(this,Ee)[Ee].once(e,r),this}off(e,r){return v(this,Ee)[Ee].off(e,r),this}updateAll(e){this.iteratePlugins(r=>{r.update(e)})}setState(e){this.store.setState(e)}getState(){return this.store.getState()}patchFilesState(e){const r=this.getState().files;this.setState({files:{...r,...Object.fromEntries(Object.entries(e).map(s=>{let[n,i]=s;return[n,{...r[n],...i}]}))}})}setFileState(e,r){if(!this.getState().files[e])throw new Error(`Cant set state for ${e} (the file could have been removed)`);this.patchFilesState({[e]:r})}i18nInit(){const e=s=>this.log(`Missing i18n string: ${s}`,"error"),r=new xi([this.defaultLocale,this.opts.locale],{onMissingKey:e});this.i18n=r.translate.bind(r),this.i18nArray=r.translateArray.bind(r),this.locale=r.locale}setOptions(e){this.opts={...this.opts,...e,restrictions:{...this.opts.restrictions,...e==null?void 0:e.restrictions}},e.meta&&this.setMeta(e.meta),this.i18nInit(),e.locale&&this.iteratePlugins(r=>{r.setOptions(e)}),this.setState(void 0)}resetProgress(){const e={percentage:0,bytesUploaded:!1,uploadComplete:!1,uploadStarted:null},r={...this.getState().files},s=Object.create(null);Object.keys(r).forEach(n=>{s[n]={...r[n],progress:{...r[n].progress,...e},tus:void 0,transloadit:void 0}}),this.setState({files:s,...pr})}clear(){const{capabilities:e,currentUploads:r}=this.getState();if(Object.keys(r).length>0&&!e.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");this.setState({...pr,files:{}})}addPreProcessor(e){v(this,Ze)[Ze].add(e)}removePreProcessor(e){return v(this,Ze)[Ze].delete(e)}addPostProcessor(e){v(this,Ne)[Ne].add(e)}removePostProcessor(e){return v(this,Ne)[Ne].delete(e)}addUploader(e){v(this,et)[et].add(e)}removeUploader(e){return v(this,et)[et].delete(e)}setMeta(e){const r={...this.getState().meta,...e},s={...this.getState().files};Object.keys(s).forEach(n=>{s[n]={...s[n],meta:{...s[n].meta,...e}}}),this.log("Adding metadata:"),this.log(e),this.setState({meta:r,files:s})}setFileMeta(e,r){const s={...this.getState().files};if(!s[e]){this.log(`Was trying to set metadata for a file that has been removed: ${e}`);return}const n={...s[e].meta,...r};s[e]={...s[e],meta:n},this.setState({files:s})}getFile(e){return this.getState().files[e]}getFiles(){const{files:e}=this.getState();return Object.values(e)}getFilesByIds(e){return e.map(r=>this.getFile(r))}getObjectOfFilesPerState(){const{files:e,totalProgress:r,error:s}=this.getState(),n=Object.values(e),i=[],o=[],a=[],l=[],u=[],d=[],c=[],m=[],h=[];for(const f of n){const{progress:y}=f;!y.uploadComplete&&y.uploadStarted&&(i.push(f),f.isPaused||m.push(f)),y.uploadStarted||o.push(f),(y.uploadStarted||y.preprocess||y.postprocess)&&a.push(f),y.uploadStarted&&l.push(f),f.isPaused&&u.push(f),y.uploadComplete&&d.push(f),f.error&&c.push(f),(y.preprocess||y.postprocess)&&h.push(f)}return{newFiles:o,startedFiles:a,uploadStartedFiles:l,pausedFiles:u,completeFiles:d,erroredFiles:c,inProgressFiles:i,inProgressNotPausedFiles:m,processingFiles:h,isUploadStarted:l.length>0,isAllComplete:r===100&&d.length===n.length&&h.length===0,isAllErrored:!!s&&c.length===n.length,isAllPaused:i.length!==0&&u.length===i.length,isUploadInProgress:i.length>0,isSomeGhost:n.some(f=>f.isGhost)}}validateRestrictions(e,r){r===void 0&&(r=this.getFiles());try{v(this,W)[W].validate(r,[e])}catch(s){return s}return null}validateSingleFile(e){try{v(this,W)[W].validateSingleFile(e)}catch(r){return r.message}return null}validateAggregateRestrictions(e){const r=this.getFiles();try{v(this,W)[W].validateAggregateRestrictions(r,e)}catch(s){return s.message}return null}checkIfFileAlreadyExists(e){const{files:r}=this.getState();return!!(r[e]&&!r[e].isGhost)}addFile(e){v(this,Ft)[Ft](e);const{nextFilesState:r,validFilesToAdd:s,errors:n}=v(this,Rt)[Rt]([e]),i=n.filter(a=>a.isRestriction);if(v(this,ce)[ce](i),n.length>0)throw n[0];this.setState({files:r});const[o]=s;return this.emit("file-added",o),this.emit("files-added",s),this.log(`Added file: ${o.name}, ${o.id}, mime type: ${o.type}`),v(this,Ut)[Ut](),o.id}addFiles(e){v(this,Ft)[Ft]();const{nextFilesState:r,validFilesToAdd:s,errors:n}=v(this,Rt)[Rt](e),i=n.filter(a=>a.isRestriction);v(this,ce)[ce](i);const o=n.filter(a=>!a.isRestriction);if(o.length>0){let a=`Multiple errors occurred while adding files:
`;if(o.forEach(l=>{a+=`
 * ${l.message}`}),this.info({message:this.i18n("addBulkFilesFailed",{smart_count:o.length}),details:a},"error",this.opts.infoTimeout),typeof AggregateError=="function")throw new AggregateError(o,a);{const l=new Error(a);throw l.errors=o,l}}this.setState({files:r}),s.forEach(a=>{this.emit("file-added",a)}),this.emit("files-added",s),s.length>5?this.log(`Added batch of ${s.length} files`):Object.values(s).forEach(a=>{this.log(`Added file: ${a.name}
 id: ${a.id}
 type: ${a.type}`)}),s.length>0&&v(this,Ut)[Ut]()}removeFiles(e){const{files:r,currentUploads:s}=this.getState(),n={...r},i={...s},o=Object.create(null);e.forEach(d=>{r[d]&&(o[d]=r[d],delete n[d])});function a(d){return o[d]===void 0}Object.keys(i).forEach(d=>{const c=s[d].fileIDs.filter(a);if(c.length===0){delete i[d];return}const{capabilities:m}=this.getState();if(c.length!==s[d].fileIDs.length&&!m.individualCancellation)throw new Error("The installed uploader plugin does not allow removing files during an upload.");i[d]={...s[d],fileIDs:c}});const l={currentUploads:i,files:n};Object.keys(n).length===0&&(l.allowNewUpload=!0,l.error=null,l.recoveredState=null),this.setState(l),v(this,je)[je]();const u=Object.keys(o);u.forEach(d=>{this.emit("file-removed",o[d])}),u.length>5?this.log(`Removed ${u.length} files`):this.log(`Removed files: ${u.join(", ")}`)}removeFile(e){this.removeFiles([e])}pauseResume(e){if(!this.getState().capabilities.resumableUploads||this.getFile(e).progress.uploadComplete)return;const r=this.getFile(e),n=!(r.isPaused||!1);return this.setFileState(e,{isPaused:n}),this.emit("upload-pause",r,n),n}pauseAll(){const e={...this.getState().files};Object.keys(e).filter(s=>!e[s].progress.uploadComplete&&e[s].progress.uploadStarted).forEach(s=>{const n={...e[s],isPaused:!0};e[s]=n}),this.setState({files:e}),this.emit("pause-all")}resumeAll(){const e={...this.getState().files};Object.keys(e).filter(s=>!e[s].progress.uploadComplete&&e[s].progress.uploadStarted).forEach(s=>{const n={...e[s],isPaused:!1,error:null};e[s]=n}),this.setState({files:e}),this.emit("resume-all")}async retryAll(){const e=await v(this,At)[At]();return this.emit("complete",e),e}cancelAll(){this.emit("cancel-all");const{files:e}=this.getState(),r=Object.keys(e);r.length&&this.removeFiles(r),this.setState(pr)}retryUpload(e){this.setFileState(e,{error:null,isPaused:!1}),this.emit("upload-retry",this.getFile(e));const r=v(this,Ae)[Ae]([e],{forceAllowNewUpload:!0});return v(this,Ce)[Ce](r)}logout(){this.iteratePlugins(e=>{var r;(r=e.provider)==null||r.logout==null||r.logout()})}[Symbol.for("uppy test: updateTotalProgress")](){return v(this,Ct)[Ct]()}updateOnlineStatus(){var e;((e=window.navigator.onLine)!=null?e:!0)?(this.emit("is-online"),this.wasOffline&&(this.emit("back-online"),this.info(this.i18n("connectedToInternet"),"success",3e3),this.wasOffline=!1)):(this.emit("is-offline"),this.info(this.i18n("noInternetConnection"),"error",0),this.wasOffline=!0)}getID(){return this.opts.id}use(e){if(typeof e!="function"){const l=`Expected a plugin class, but got ${e===null?"null":typeof e}. Please verify that the plugin was imported and spelled correctly.`;throw new TypeError(l)}for(var r=arguments.length,s=new Array(r>1?r-1:0),n=1;n<r;n++)s[n-1]=arguments[n];const i=new e(this,...s),o=i.id;if(!o)throw new Error("Your plugin must have an id");if(!i.type)throw new Error("Your plugin must have a type");const a=this.getPlugin(o);if(a){const l=`Already found a plugin named '${a.id}'. Tried to use: '${o}'.
Uppy plugins must have unique \`id\` options.`;throw new Error(l)}return e.VERSION&&this.log(`Using ${o} v${e.VERSION}`),i.type in v(this,D)[D]?v(this,D)[D][i.type].push(i):v(this,D)[D][i.type]=[i],i.install(),this.emit("plugin-added",i),this}getPlugin(e){for(const r of Object.values(v(this,D)[D])){const s=r.find(n=>n.id===e);if(s!=null)return s}}[Symbol.for("uppy test: getPlugins")](e){return v(this,D)[D][e]}iteratePlugins(e){Object.values(v(this,D)[D]).flat(1).forEach(e)}removePlugin(e){this.log(`Removing plugin ${e.id}`),this.emit("plugin-remove",e),e.uninstall&&e.uninstall();const r=v(this,D)[D][e.type],s=r.findIndex(o=>o.id===e.id);s!==-1&&r.splice(s,1);const i={plugins:{...this.getState().plugins,[e.id]:void 0}};this.setState(i)}destroy(){this.log(`Closing Uppy instance ${this.opts.id}: removing all files and uninstalling plugins`),this.cancelAll(),v(this,Ot)[Ot](),this.iteratePlugins(e=>{this.removePlugin(e)}),typeof window<"u"&&window.removeEventListener&&(window.removeEventListener("online",v(this,ye)[ye]),window.removeEventListener("offline",v(this,ye)[ye]))}hideInfo(){const{info:e}=this.getState();this.setState({info:e.slice(1)}),this.emit("info-hidden")}info(e,r,s){r===void 0&&(r="info"),s===void 0&&(s=3e3);const n=typeof e=="object";this.setState({info:[...this.getState().info,{type:r,message:n?e.message:e,details:n?e.details:null}]}),setTimeout(()=>this.hideInfo(),s),this.emit("info-visible")}log(e,r){const{logger:s}=this.opts;switch(r){case"error":s.error(e);break;case"warning":s.warn(e);break;default:s.debug(e);break}}registerRequestClient(e,r){v(this,xt)[xt].set(e,r)}getRequestClientForFile(e){if(!e.remote)throw new Error(`Tried to get RequestClient for a non-remote file ${e.id}`);const r=v(this,xt)[xt].get(e.remote.requestClientId);if(r==null)throw new Error(`requestClientId "${e.remote.requestClientId}" not registered for file "${e.id}"`);return r}restore(e){return this.log(`Core: attempting to restore upload "${e}"`),this.getState().currentUploads[e]?v(this,Ce)[Ce](e):(v(this,lt)[lt](e),Promise.reject(new Error("Nonexistent upload")))}[Symbol.for("uppy test: createUpload")](){return v(this,Ae)[Ae](...arguments)}addResultData(e,r){if(!v(this,ts)[ts](e)){this.log(`Not setting result for an upload that has been removed: ${e}`);return}const{currentUploads:s}=this.getState(),n={...s[e],result:{...s[e].result,...r}};this.setState({currentUploads:{...s,[e]:n}})}async upload(){var e;(e=v(this,D)[D].uploader)!=null&&e.length||this.log("No uploader type plugins are used","warning");let{files:r}=this.getState();if(v(this,Qt)[Qt]().length>0){const i=await v(this,At)[At]();if(!(this.getFiles().filter(a=>a.progress.uploadStarted==null).length>0))return this.emit("complete",i),i;({files:r}=this.getState())}const n=this.opts.onBeforeUpload(r);return n===!1?Promise.reject(new Error("Not starting the upload because onBeforeUpload returned false")):(n&&typeof n=="object"&&(r=n,this.setState({files:r})),Promise.resolve().then(()=>v(this,W)[W].validateMinNumberOfFiles(r)).catch(i=>{throw v(this,ce)[ce]([i]),i}).then(()=>{if(!v(this,Zr)[Zr](r))throw new me(this.i18n("missingRequiredMetaField"))}).catch(i=>{throw i}).then(async()=>{const{currentUploads:i}=this.getState(),o=Object.values(i).flatMap(d=>d.fileIDs),a=[];Object.keys(r).forEach(d=>{const c=this.getFile(d);!c.progress.uploadStarted&&o.indexOf(d)===-1&&a.push(c.id)});const l=v(this,Ae)[Ae](a),u=await v(this,Ce)[Ce](l);return this.emit("complete",u),u}).catch(i=>{throw this.emit("error",i),this.log(i,"error"),i}))}}function Qu(t){for(const i of t)i.isRestriction?this.emit("restriction-failed",i.file,i):this.emit("error",i,i.file),this.log(i,"warning");const e=t.filter(i=>i.isUserFacing),r=4,s=e.slice(0,r),n=e.slice(r);s.forEach(i=>{let{message:o,details:a=""}=i;this.info({message:o,details:a},"error",this.opts.infoTimeout)}),n.length>0&&this.info({message:this.i18n("additionalRestrictionsFailed",{count:n.length})})}function Zu(t){const{missingFields:e,error:r}=v(this,W)[W].getMissingRequiredMetaFields(t);return e.length>0?(this.setFileState(t.id,{missingRequiredMetaFields:e}),this.log(r.message),this.emit("restriction-failed",t,r),!1):(e.length===0&&t.missingRequiredMetaFields&&this.setFileState(t.id,{missingRequiredMetaFields:[]}),!0)}function ec(t){let e=!0;for(const r of Object.values(t))v(this,sr)[sr](r)||(e=!1);return e}function tc(t){const{allowNewUpload:e}=this.getState();if(e===!1){const r=new me(this.i18n("noMoreFilesAllowed"),{file:t});throw v(this,ce)[ce]([r]),r}}function rc(t){const e=t instanceof File?{name:t.name,type:t.type,size:t.size,data:t}:t,r=Mi(e),s=Bu(r,e),n=Bi(s).extension,i=ju(e,this.getID()),o=e.meta||{};o.name=s,o.type=r;const a=Number.isFinite(e.data.size)?e.data.size:null;return{source:e.source||"",id:i,name:s,extension:n||"",meta:{...this.getState().meta,...o},type:r,data:e.data,progress:{percentage:0,bytesUploaded:!1,bytesTotal:a,uploadComplete:!1,uploadStarted:null},size:a,isGhost:!1,isRemote:e.isRemote||!1,remote:e.remote,preview:e.preview}}function sc(){this.opts.autoProceed&&!this.scheduledAutoProceed&&(this.scheduledAutoProceed=setTimeout(()=>{this.scheduledAutoProceed=null,this.upload().catch(t=>{t.isRestriction||this.log(t.stack||t.message||t)})},4))}function nc(t){const{files:e}=this.getState(),r={...e},s=[],n=[];for(const a of t)try{var i;let l=v(this,Us)[Us](a);const u=(i=e[l.id])==null?void 0:i.isGhost;u&&(l={...e[l.id],isGhost:!1,data:a.data},this.log(`Replaced the blob in the restored ghost file: ${l.name}, ${l.id}`));const d=this.opts.onBeforeFileAdded(l,r);if(!d&&this.checkIfFileAlreadyExists(l.id)){var o;throw new me(this.i18n("noDuplicates",{fileName:(o=l.name)!=null?o:this.i18n("unnamed")}),{file:a})}if(d===!1&&!u)throw new me("Cannot add the file because onBeforeFileAdded returned false.",{isUserFacing:!1,file:a});typeof d=="object"&&d!==null&&(l=d),v(this,W)[W].validateSingleFile(l),r[l.id]=l,s.push(l)}catch(l){n.push(l)}try{v(this,W)[W].validateAggregateRestrictions(Object.values(e),s)}catch(a){return n.push(a),{nextFilesState:e,validFilesToAdd:[],errors:n}}return{nextFilesState:r,validFilesToAdd:s,errors:n}}function ic(){const{files:t}=this.getState();return Object.keys(t).filter(e=>t[e].error)}async function oc(){const t=v(this,Qt)[Qt](),e={...this.getState().files};if(t.forEach(s=>{e[s]={...e[s],isPaused:!1,error:null}}),this.setState({files:e,error:null}),this.emit("retry-all",this.getFilesByIds(t)),t.length===0)return{successful:[],failed:[]};const r=v(this,Ae)[Ae](t,{forceAllowNewUpload:!0});return v(this,Ce)[Ce](r)}function ac(){var t,e;const r=v(this,As)[As]();let s=null;r!=null&&(s=Math.round(r*100),s>100?s=100:s<0&&(s=0)),this.emit("progress",(t=s)!=null?t:0),this.setState({totalProgress:(e=s)!=null?e:0})}function lc(){const e=this.getFiles().filter(a=>a.progress.uploadStarted||a.progress.preprocess||a.progress.postprocess);if(e.length===0)return 0;if(e.every(a=>a.progress.uploadComplete))return 1;const r=a=>a.progress.bytesTotal!=null&&a.progress.bytesTotal!==0,s=e.filter(r),n=e.filter(a=>!r(a));if(s.every(a=>a.progress.uploadComplete)&&n.length>0&&!n.every(a=>a.progress.uploadComplete))return null;const i=s.reduce((a,l)=>{var u;return a+((u=l.progress.bytesTotal)!=null?u:0)},0),o=s.reduce((a,l)=>a+(l.progress.bytesUploaded||0),0);return i===0?0:o/i}function uc(){const t=(s,n,i)=>{let o=s.message||"Unknown error";s.details&&(o+=` ${s.details}`),this.setState({error:o}),n!=null&&n.id in this.getState().files&&this.setFileState(n.id,{error:o,response:i})};this.on("error",t),this.on("upload-error",(s,n,i)=>{if(t(n,s,i),typeof n=="object"&&n.message){var o;this.log(n.message,"error");const a=new Error(this.i18n("failedToUpload",{file:(o=s==null?void 0:s.name)!=null?o:""}));a.isUserFacing=!0,a.details=n.message,n.details&&(a.details+=` ${n.details}`),v(this,ce)[ce]([a])}else v(this,ce)[ce]([n])});let e=null;this.on("upload-stalled",(s,n)=>{const{message:i}=s,o=n.map(a=>a.meta.name).join(", ");e||(this.info({message:i,details:o},"warning",this.opts.infoTimeout),e=setTimeout(()=>{e=null},this.opts.infoTimeout)),this.log(`${i} ${o}`.trim(),"warning")}),this.on("upload",()=>{this.setState({error:null})});const r=s=>{const n=s.filter(o=>{const a=o!=null&&this.getFile(o.id);return a||this.log(`Not setting progress for a file that has been removed: ${o==null?void 0:o.id}`),a}),i=Object.fromEntries(n.map(o=>[o.id,{progress:{uploadStarted:Date.now(),uploadComplete:!1,bytesUploaded:0,bytesTotal:o.size}}]));this.patchFilesState(i)};this.on("upload-start",r),this.on("upload-progress",v(this,Rs)[Rs]),this.on("upload-success",(s,n)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}const i=this.getFile(s.id).progress;this.setFileState(s.id,{progress:{...i,postprocess:v(this,Ne)[Ne].size>0?{mode:"indeterminate"}:void 0,uploadComplete:!0,percentage:100,bytesUploaded:i.bytesTotal},response:n,uploadURL:n.uploadURL,isPaused:!1}),s.size==null&&this.setFileState(s.id,{size:n.bytesUploaded||i.bytesTotal}),v(this,je)[je]()}),this.on("preprocess-progress",(s,n)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}this.setFileState(s.id,{progress:{...this.getFile(s.id).progress,preprocess:n}})}),this.on("preprocess-complete",s=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}const n={...this.getState().files};n[s.id]={...n[s.id],progress:{...n[s.id].progress}},delete n[s.id].progress.preprocess,this.setState({files:n})}),this.on("postprocess-progress",(s,n)=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}this.setFileState(s.id,{progress:{...this.getState().files[s.id].progress,postprocess:n}})}),this.on("postprocess-complete",s=>{if(s==null||!this.getFile(s.id)){this.log(`Not setting progress for a file that has been removed: ${s==null?void 0:s.id}`);return}const n={...this.getState().files};n[s.id]={...n[s.id],progress:{...n[s.id].progress}},delete n[s.id].progress.postprocess,this.setState({files:n})}),this.on("restored",()=>{v(this,je)[je]()}),this.on("dashboard:file-edit-complete",s=>{s&&v(this,sr)[sr](s)}),typeof window<"u"&&window.addEventListener&&(window.addEventListener("online",v(this,ye)[ye]),window.addEventListener("offline",v(this,ye)[ye]),setTimeout(v(this,ye)[ye],3e3))}function cc(t,e){e===void 0&&(e={});const{forceAllowNewUpload:r=!1}=e,{allowNewUpload:s,currentUploads:n}=this.getState();if(!s&&!r)throw new Error("Cannot create a new upload: already uploading.");const i=El();return this.emit("upload",i,this.getFilesByIds(t)),this.setState({allowNewUpload:this.opts.allowMultipleUploadBatches!==!1&&this.opts.allowMultipleUploads!==!1,currentUploads:{...n,[i]:{fileIDs:t,step:0,result:{}}}}),i}function dc(t){const{currentUploads:e}=this.getState();return e[t]}function pc(t){const e={...this.getState().currentUploads};delete e[t],this.setState({currentUploads:e})}async function hc(t){const e=()=>{const{currentUploads:i}=this.getState();return i[t]};let r=e();const s=[...v(this,Ze)[Ze],...v(this,et)[et],...v(this,Ne)[Ne]];try{for(let i=r.step||0;i<s.length&&r;i++){const o=s[i];this.setState({currentUploads:{...this.getState().currentUploads,[t]:{...r,step:i}}});const{fileIDs:a}=r;await o(a,t),r=e()}}catch(i){throw v(this,lt)[lt](t),i}if(r){r.fileIDs.forEach(l=>{const u=this.getFile(l);u&&u.progress.postprocess&&this.emit("postprocess-complete",u)});const i=r.fileIDs.map(l=>this.getFile(l)),o=i.filter(l=>!l.error),a=i.filter(l=>l.error);this.addResultData(t,{successful:o,failed:a,uploadID:t}),r=e()}let n;return r&&(n=r.result,v(this,lt)[lt](t)),n==null&&(this.log(`Not setting result for an upload that has been removed: ${t}`),n={successful:[],failed:[],uploadID:t}),n}Ir.VERSION=Yu.version;const Di=Ir;var Dr,C,qi,tt,Rn,zi,Hi,Wi,Vs,Cs,xs,nr={},Gi=[],fc=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,ar=Array.isArray;function Be(t,e){for(var r in e)t[r]=e[r];return t}function Js(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function b(t,e,r){var s,n,i,o={};for(i in e)i=="key"?s=e[i]:i=="ref"?n=e[i]:o[i]=e[i];if(arguments.length>2&&(o.children=arguments.length>3?Dr.call(arguments,2):r),typeof t=="function"&&t.defaultProps!=null)for(i in t.defaultProps)o[i]===void 0&&(o[i]=t.defaultProps[i]);return Sr(t,o,s,n,null)}function Sr(t,e,r,s,n){var i={type:t,props:e,key:r,ref:s,__k:null,__:null,__b:0,__e:null,__c:null,constructor:void 0,__v:n??++qi,__i:-1,__u:0};return n==null&&C.vnode!=null&&C.vnode(i),i}function mt(t){return t.children}function Me(t,e){this.props=t,this.context=e}function gt(t,e){if(e==null)return t.__?gt(t.__,t.__i+1):null;for(var r;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null)return r.__e;return typeof t.type=="function"?gt(t):null}function Vi(t){var e,r;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((r=t.__k[e])!=null&&r.__e!=null){t.__e=t.__c.base=r.__e;break}return Vi(t)}}function An(t){(!t.__d&&(t.__d=!0)&&tt.push(t)&&!Ur.__r++||Rn!=C.debounceRendering)&&((Rn=C.debounceRendering)||zi)(Ur)}function Ur(){for(var t,e,r,s,n,i,o,a=1;tt.length;)tt.length>a&&tt.sort(Hi),t=tt.shift(),a=tt.length,t.__d&&(r=void 0,n=(s=(e=t).__v).__e,i=[],o=[],e.__P&&((r=Be({},s)).__v=s.__v+1,C.vnode&&C.vnode(r),Ks(e.__P,r,s,e.__n,e.__P.namespaceURI,32&s.__u?[n]:null,i,n??gt(s),!!(32&s.__u),o),r.__v=s.__v,r.__.__k[r.__i]=r,Xi(i,r,o),r.__e!=n&&Vi(r)));Ur.__r=0}function Ji(t,e,r,s,n,i,o,a,l,u,d){var c,m,h,f,y,g,_=s&&s.__k||Gi,S=e.length;for(l=mc(r,e,_,l,S),c=0;c<S;c++)(h=r.__k[c])!=null&&(m=h.__i==-1?nr:_[h.__i]||nr,h.__i=c,g=Ks(t,h,m,n,i,o,a,l,u,d),f=h.__e,h.ref&&m.ref!=h.ref&&(m.ref&&Xs(m.ref,null,h),d.push(h.ref,h.__c||f,h)),y==null&&f!=null&&(y=f),4&h.__u||m.__k===h.__k?l=Ki(h,l,t):typeof h.type=="function"&&g!==void 0?l=g:f&&(l=f.nextSibling),h.__u&=-7);return r.__e=y,l}function mc(t,e,r,s,n){var i,o,a,l,u,d=r.length,c=d,m=0;for(t.__k=new Array(n),i=0;i<n;i++)(o=e[i])!=null&&typeof o!="boolean"&&typeof o!="function"?(l=i+m,(o=t.__k[i]=typeof o=="string"||typeof o=="number"||typeof o=="bigint"||o.constructor==String?Sr(null,o,null,null,null):ar(o)?Sr(mt,{children:o},null,null,null):o.constructor==null&&o.__b>0?Sr(o.type,o.props,o.key,o.ref?o.ref:null,o.__v):o).__=t,o.__b=t.__b+1,a=null,(u=o.__i=gc(o,r,l,c))!=-1&&(c--,(a=r[u])&&(a.__u|=2)),a==null||a.__v==null?(u==-1&&(n>d?m--:n<d&&m++),typeof o.type!="function"&&(o.__u|=4)):u!=l&&(u==l-1?m--:u==l+1?m++:(u>l?m--:m++,o.__u|=4))):t.__k[i]=null;if(c)for(i=0;i<d;i++)(a=r[i])!=null&&!(2&a.__u)&&(a.__e==s&&(s=gt(a)),Qi(a,a));return s}function Ki(t,e,r){var s,n;if(typeof t.type=="function"){for(s=t.__k,n=0;s&&n<s.length;n++)s[n]&&(s[n].__=t,e=Ki(s[n],e,r));return e}t.__e!=e&&(e&&t.type&&!r.contains(e)&&(e=gt(t)),r.insertBefore(t.__e,e||null),e=t.__e);do e=e&&e.nextSibling;while(e!=null&&e.nodeType==8);return e}function Rr(t,e){return e=e||[],t==null||typeof t=="boolean"||(ar(t)?t.some(function(r){Rr(r,e)}):e.push(t)),e}function gc(t,e,r,s){var n,i,o=t.key,a=t.type,l=e[r];if(l===null&&t.key==null||l&&o==l.key&&a==l.type&&!(2&l.__u))return r;if(s>(l!=null&&!(2&l.__u)?1:0))for(n=r-1,i=r+1;n>=0||i<e.length;){if(n>=0){if((l=e[n])&&!(2&l.__u)&&o==l.key&&a==l.type)return n;n--}if(i<e.length){if((l=e[i])&&!(2&l.__u)&&o==l.key&&a==l.type)return i;i++}}return-1}function Cn(t,e,r){e[0]=="-"?t.setProperty(e,r??""):t[e]=r==null?"":typeof r!="number"||fc.test(e)?r:r+"px"}function hr(t,e,r,s,n){var i,o;e:if(e=="style")if(typeof r=="string")t.style.cssText=r;else{if(typeof s=="string"&&(t.style.cssText=s=""),s)for(e in s)r&&e in r||Cn(t.style,e,"");if(r)for(e in r)s&&r[e]==s[e]||Cn(t.style,e,r[e])}else if(e[0]=="o"&&e[1]=="n")i=e!=(e=e.replace(Wi,"$1")),o=e.toLowerCase(),e=o in t||e=="onFocusOut"||e=="onFocusIn"?o.slice(2):e.slice(2),t.l||(t.l={}),t.l[e+i]=r,r?s?r.u=s.u:(r.u=Vs,t.addEventListener(e,i?xs:Cs,i)):t.removeEventListener(e,i?xs:Cs,i);else{if(n=="http://www.w3.org/2000/svg")e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!="width"&&e!="height"&&e!="href"&&e!="list"&&e!="form"&&e!="tabIndex"&&e!="download"&&e!="rowSpan"&&e!="colSpan"&&e!="role"&&e!="popover"&&e in t)try{t[e]=r??"";break e}catch{}typeof r=="function"||(r==null||r===!1&&e[4]!="-"?t.removeAttribute(e):t.setAttribute(e,e=="popover"&&r==1?"":r))}}function xn(t){return function(e){if(this.l){var r=this.l[e.type+t];if(e.t==null)e.t=Vs++;else if(e.t<r.u)return;return r(C.event?C.event(e):e)}}}function Ks(t,e,r,s,n,i,o,a,l,u){var d,c,m,h,f,y,g,_,S,A,U,x,P,O,$,j,ie,te=e.type;if(e.constructor!=null)return null;128&r.__u&&(l=!!(32&r.__u),i=[a=e.__e=r.__e]),(d=C.__b)&&d(e);e:if(typeof te=="function")try{if(_=e.props,S="prototype"in te&&te.prototype.render,A=(d=te.contextType)&&s[d.__c],U=d?A?A.props.value:d.__:s,r.__c?g=(c=e.__c=r.__c).__=c.__E:(S?e.__c=c=new te(_,U):(e.__c=c=new Me(_,U),c.constructor=te,c.render=_c),A&&A.sub(c),c.props=_,c.state||(c.state={}),c.context=U,c.__n=s,m=c.__d=!0,c.__h=[],c._sb=[]),S&&c.__s==null&&(c.__s=c.state),S&&te.getDerivedStateFromProps!=null&&(c.__s==c.state&&(c.__s=Be({},c.__s)),Be(c.__s,te.getDerivedStateFromProps(_,c.__s))),h=c.props,f=c.state,c.__v=e,m)S&&te.getDerivedStateFromProps==null&&c.componentWillMount!=null&&c.componentWillMount(),S&&c.componentDidMount!=null&&c.__h.push(c.componentDidMount);else{if(S&&te.getDerivedStateFromProps==null&&_!==h&&c.componentWillReceiveProps!=null&&c.componentWillReceiveProps(_,U),!c.__e&&c.shouldComponentUpdate!=null&&c.shouldComponentUpdate(_,c.__s,U)===!1||e.__v==r.__v){for(e.__v!=r.__v&&(c.props=_,c.state=c.__s,c.__d=!1),e.__e=r.__e,e.__k=r.__k,e.__k.some(function(Se){Se&&(Se.__=e)}),x=0;x<c._sb.length;x++)c.__h.push(c._sb[x]);c._sb=[],c.__h.length&&o.push(c);break e}c.componentWillUpdate!=null&&c.componentWillUpdate(_,c.__s,U),S&&c.componentDidUpdate!=null&&c.__h.push(function(){c.componentDidUpdate(h,f,y)})}if(c.context=U,c.props=_,c.__P=t,c.__e=!1,P=C.__r,O=0,S){for(c.state=c.__s,c.__d=!1,P&&P(e),d=c.render(c.props,c.state,c.context),$=0;$<c._sb.length;$++)c.__h.push(c._sb[$]);c._sb=[]}else do c.__d=!1,P&&P(e),d=c.render(c.props,c.state,c.context),c.state=c.__s;while(c.__d&&++O<25);c.state=c.__s,c.getChildContext!=null&&(s=Be(Be({},s),c.getChildContext())),S&&!m&&c.getSnapshotBeforeUpdate!=null&&(y=c.getSnapshotBeforeUpdate(h,f)),j=d,d!=null&&d.type===mt&&d.key==null&&(j=Yi(d.props.children)),a=Ji(t,ar(j)?j:[j],e,r,s,n,i,o,a,l,u),c.base=e.__e,e.__u&=-161,c.__h.length&&o.push(c),g&&(c.__E=c.__=null)}catch(Se){if(e.__v=null,l||i!=null)if(Se.then){for(e.__u|=l?160:128;a&&a.nodeType==8&&a.nextSibling;)a=a.nextSibling;i[i.indexOf(a)]=null,e.__e=a}else for(ie=i.length;ie--;)Js(i[ie]);else e.__e=r.__e,e.__k=r.__k;C.__e(Se,e,r)}else i==null&&e.__v==r.__v?(e.__k=r.__k,e.__e=r.__e):a=e.__e=yc(r.__e,e,r,s,n,i,o,l,u);return(d=C.diffed)&&d(e),128&e.__u?void 0:a}function Xi(t,e,r){for(var s=0;s<r.length;s++)Xs(r[s],r[++s],r[++s]);C.__c&&C.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(i){i.call(n)})}catch(i){C.__e(i,n.__v)}})}function Yi(t){return typeof t!="object"||t==null||t.__b&&t.__b>0?t:ar(t)?t.map(Yi):Be({},t)}function yc(t,e,r,s,n,i,o,a,l){var u,d,c,m,h,f,y,g=r.props,_=e.props,S=e.type;if(S=="svg"?n="http://www.w3.org/2000/svg":S=="math"?n="http://www.w3.org/1998/Math/MathML":n||(n="http://www.w3.org/1999/xhtml"),i!=null){for(u=0;u<i.length;u++)if((h=i[u])&&"setAttribute"in h==!!S&&(S?h.localName==S:h.nodeType==3)){t=h,i[u]=null;break}}if(t==null){if(S==null)return document.createTextNode(_);t=document.createElementNS(n,S,_.is&&_),a&&(C.__m&&C.__m(e,i),a=!1),i=null}if(S==null)g===_||a&&t.data==_||(t.data=_);else{if(i=i&&Dr.call(t.childNodes),g=r.props||nr,!a&&i!=null)for(g={},u=0;u<t.attributes.length;u++)g[(h=t.attributes[u]).name]=h.value;for(u in g)if(h=g[u],u!="children"){if(u=="dangerouslySetInnerHTML")c=h;else if(!(u in _)){if(u=="value"&&"defaultValue"in _||u=="checked"&&"defaultChecked"in _)continue;hr(t,u,null,h,n)}}for(u in _)h=_[u],u=="children"?m=h:u=="dangerouslySetInnerHTML"?d=h:u=="value"?f=h:u=="checked"?y=h:a&&typeof h!="function"||g[u]===h||hr(t,u,h,g[u],n);if(d)a||c&&(d.__html==c.__html||d.__html==t.innerHTML)||(t.innerHTML=d.__html),e.__k=[];else if(c&&(t.innerHTML=""),Ji(e.type=="template"?t.content:t,ar(m)?m:[m],e,r,s,S=="foreignObject"?"http://www.w3.org/1999/xhtml":n,i,o,i?i[0]:r.__k&&gt(r,0),a,l),i!=null)for(u=i.length;u--;)Js(i[u]);a||(u="value",S=="progress"&&f==null?t.removeAttribute("value"):f!=null&&(f!==t[u]||S=="progress"&&!f||S=="option"&&f!=g[u])&&hr(t,u,f,g[u],n),u="checked",y!=null&&y!=t[u]&&hr(t,u,y,g[u],n))}return t}function Xs(t,e,r){try{if(typeof t=="function"){var s=typeof t.__u=="function";s&&t.__u(),s&&e==null||(t.__u=t(e))}else t.current=e}catch(n){C.__e(n,r)}}function Qi(t,e,r){var s,n;if(C.unmount&&C.unmount(t),(s=t.ref)&&(s.current&&s.current!=t.__e||Xs(s,null,e)),(s=t.__c)!=null){if(s.componentWillUnmount)try{s.componentWillUnmount()}catch(i){C.__e(i,e)}s.base=s.__P=null}if(s=t.__k)for(n=0;n<s.length;n++)s[n]&&Qi(s[n],e,r||typeof t.type!="function");r||Js(t.__e),t.__c=t.__=t.__e=void 0}function _c(t,e,r){return this.constructor(t,r)}function vc(t,e,r){var s,n,i,o;e==document&&(e=document.documentElement),C.__&&C.__(t,e),n=(s=typeof r=="function")?null:r&&r.__k||e.__k,i=[],o=[],Ks(e,t=(!s&&r||e).__k=b(mt,null,[t]),n||nr,nr,e.namespaceURI,!s&&r?[r]:n?null:e.firstChild?Dr.call(e.childNodes):null,i,!s&&r?r:n?n.__e:e.firstChild,s,o),Xi(i,t,o)}Dr=Gi.slice,C={__e:function(t,e,r,s){for(var n,i,o;e=e.__;)if((n=e.__c)&&!n.__)try{if((i=n.constructor)&&i.getDerivedStateFromError!=null&&(n.setState(i.getDerivedStateFromError(t)),o=n.__d),n.componentDidCatch!=null&&(n.componentDidCatch(t,s||{}),o=n.__d),o)return n.__E=n}catch(a){t=a}throw t}},qi=0,Me.prototype.setState=function(t,e){var r;r=this.__s!=null&&this.__s!=this.state?this.__s:this.__s=Be({},this.state),typeof t=="function"&&(t=t(Be({},r),this.props)),t&&Be(r,t),t!=null&&this.__v&&(e&&this._sb.push(e),An(this))},Me.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),An(this))},Me.prototype.render=mt,tt=[],zi=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Hi=function(t,e){return t.__v.__b-e.__v.__b},Ur.__r=0,Wi=/(PointerCapture)$|Capture$/i,Vs=0,Cs=xn(!1),xs=xn(!0);var we,rs,$n,Zi=[],V=C,kn=V.__b,Nn=V.__r,jn=V.diffed,Ln=V.__c,Bn=V.unmount,Mn=V.__;function bc(){for(var t;t=Zi.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Pr),t.__H.__h.forEach($s),t.__H.__h=[]}catch(e){t.__H.__h=[],V.__e(e,t.__v)}}V.__b=function(t){we=null,kn&&kn(t)},V.__=function(t,e){t&&e.__k&&e.__k.__m&&(t.__m=e.__k.__m),Mn&&Mn(t,e)},V.__r=function(t){Nn&&Nn(t);var e=(we=t.__c).__H;e&&(rs===we?(e.__h=[],we.__h=[],e.__.forEach(function(r){r.__N&&(r.__=r.__N),r.u=r.__N=void 0})):(e.__h.forEach(Pr),e.__h.forEach($s),e.__h=[])),rs=we},V.diffed=function(t){jn&&jn(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(Zi.push(e)!==1&&$n===V.requestAnimationFrame||(($n=V.requestAnimationFrame)||wc)(bc)),e.__H.__.forEach(function(r){r.u&&(r.__H=r.u),r.u=void 0})),rs=we=null},V.__c=function(t,e){e.some(function(r){try{r.__h.forEach(Pr),r.__h=r.__h.filter(function(s){return!s.__||$s(s)})}catch(s){e.some(function(n){n.__h&&(n.__h=[])}),e=[],V.__e(s,r.__v)}}),Ln&&Ln(t,e)},V.unmount=function(t){Bn&&Bn(t);var e,r=t.__c;r&&r.__H&&(r.__H.__.forEach(function(s){try{Pr(s)}catch(n){e=n}}),r.__H=void 0,e&&V.__e(e,r.__v))};var In=typeof requestAnimationFrame=="function";function wc(t){var e,r=function(){clearTimeout(s),In&&cancelAnimationFrame(e),setTimeout(t)},s=setTimeout(r,35);In&&(e=requestAnimationFrame(r))}function Pr(t){var e=we,r=t.__c;typeof r=="function"&&(t.__c=void 0,r()),we=e}function $s(t){var e=we;t.__c=t.__(),we=e}function Sc(t,e){for(var r in e)t[r]=e[r];return t}function Dn(t,e){for(var r in t)if(r!=="__source"&&!(r in e))return!0;for(var s in e)if(s!=="__source"&&t[s]!==e[s])return!0;return!1}function qn(t,e){this.props=t,this.context=e}(qn.prototype=new Me).isPureReactComponent=!0,qn.prototype.shouldComponentUpdate=function(t,e){return Dn(this.props,t)||Dn(this.state,e)};var zn=C.__b;C.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),zn&&zn(t)};var Pc=C.__e;C.__e=function(t,e,r,s){if(t.then){for(var n,i=e;i=i.__;)if((n=i.__c)&&n.__c)return e.__e==null&&(e.__e=r.__e,e.__k=r.__k),n.__c(t,e)}Pc(t,e,r,s)};var Hn=C.unmount;function eo(t,e,r){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(s){typeof s.__c=="function"&&s.__c()}),t.__c.__H=null),(t=Sc({},t)).__c!=null&&(t.__c.__P===r&&(t.__c.__P=e),t.__c.__e=!0,t.__c=null),t.__k=t.__k&&t.__k.map(function(s){return eo(s,e,r)})),t}function to(t,e,r){return t&&r&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(s){return to(s,e,r)}),t.__c&&t.__c.__P===e&&(t.__e&&r.appendChild(t.__e),t.__c.__e=!0,t.__c.__P=r)),t}function ss(){this.__u=0,this.o=null,this.__b=null}function ro(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function fr(){this.i=null,this.l=null}C.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&32&t.__u&&(t.type=null),Hn&&Hn(t)},(ss.prototype=new Me).__c=function(t,e){var r=e.__c,s=this;s.o==null&&(s.o=[]),s.o.push(r);var n=ro(s.__v),i=!1,o=function(){i||(i=!0,r.__R=null,n?n(a):a())};r.__R=o;var a=function(){if(!--s.__u){if(s.state.__a){var l=s.state.__a;s.__v.__k[0]=to(l,l.__c.__P,l.__c.__O)}var u;for(s.setState({__a:s.__b=null});u=s.o.pop();)u.forceUpdate()}};s.__u++||32&e.__u||s.setState({__a:s.__b=s.__v.__k[0]}),t.then(o,o)},ss.prototype.componentWillUnmount=function(){this.o=[]},ss.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var r=document.createElement("div"),s=this.__v.__k[0].__c;this.__v.__k[0]=eo(this.__b,r,s.__O=s.__P)}this.__b=null}var n=e.__a&&b(mt,null,t.fallback);return n&&(n.__u&=-33),[b(mt,null,e.__a?null:t.children),n]};var Wn=function(t,e,r){if(++r[1]===r[0]&&t.l.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.l.size))for(r=t.i;r;){for(;r.length>3;)r.pop()();if(r[1]<r[0])break;t.i=r=r[2]}};(fr.prototype=new Me).__a=function(t){var e=this,r=ro(e.__v),s=e.l.get(t);return s[0]++,function(n){var i=function(){e.props.revealOrder?(s.push(n),Wn(e,t,s)):n()};r?r(i):i()}},fr.prototype.render=function(t){this.i=null,this.l=new Map;var e=Rr(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var r=e.length;r--;)this.l.set(e[r],this.i=[1,0,this.i]);return t.children},fr.prototype.componentDidUpdate=fr.prototype.componentDidMount=function(){var t=this;this.l.forEach(function(e,r){Wn(t,r,e)})};var Ec=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,Tc=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Oc=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Fc=/[A-Z0-9]/g,Uc=typeof document<"u",Rc=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/:/fil|che|ra/).test(t)};function Gn(t,e,r){return e.__k==null&&(e.textContent=""),vc(t,e),typeof r=="function"&&r(),t?t.__c:null}Me.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(Me.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var Vn=C.event;function Ac(){}function Cc(){return this.cancelBubble}function xc(){return this.defaultPrevented}C.event=function(t){return Vn&&(t=Vn(t)),t.persist=Ac,t.isPropagationStopped=Cc,t.isDefaultPrevented=xc,t.nativeEvent=t};var $c={enumerable:!1,configurable:!0,get:function(){return this.class}},Jn=C.vnode;C.vnode=function(t){typeof t.type=="string"&&function(e){var r=e.props,s=e.type,n={},i=s.indexOf("-")===-1;for(var o in r){var a=r[o];if(!(o==="value"&&"defaultValue"in r&&a==null||Uc&&o==="children"&&s==="noscript"||o==="class"||o==="className")){var l=o.toLowerCase();o==="defaultValue"&&"value"in r&&r.value==null?o="value":o==="download"&&a===!0?a="":l==="translate"&&a==="no"?a=!1:l[0]==="o"&&l[1]==="n"?l==="ondoubleclick"?o="ondblclick":l!=="onchange"||s!=="input"&&s!=="textarea"||Rc(r.type)?l==="onfocus"?o="onfocusin":l==="onblur"?o="onfocusout":Oc.test(o)&&(o=l):l=o="oninput":i&&Tc.test(o)?o=o.replace(Fc,"-$&").toLowerCase():a===null&&(a=void 0),l==="oninput"&&n[o=l]&&(o="oninputCapture"),n[o]=a}}s=="select"&&n.multiple&&Array.isArray(n.value)&&(n.value=Rr(r.children).forEach(function(u){u.props.selected=n.value.indexOf(u.props.value)!=-1})),s=="select"&&n.defaultValue!=null&&(n.value=Rr(r.children).forEach(function(u){u.props.selected=n.multiple?n.defaultValue.indexOf(u.props.value)!=-1:n.defaultValue==u.props.value})),r.class&&!r.className?(n.class=r.class,Object.defineProperty(n,"className",$c)):(r.className&&!r.class||r.class&&r.className)&&(n.class=n.className=r.className),e.props=n}(t),t.$$typeof=Ec,Jn&&Jn(t)};var Kn=C.__r;C.__r=function(t){Kn&&Kn(t),t.__c};var Xn=C.diffed;C.diffed=function(t){Xn&&Xn(t);var e=t.props,r=t.__e;r!=null&&t.type==="textarea"&&"value"in e&&e.value!==r.value&&(r.value=e.value==null?"":e.value)};function kc(t){return typeof t!="object"||t===null||!("nodeType"in t)?!1:t.nodeType===Node.ELEMENT_NODE}function Nc(t,e){return e===void 0&&(e=document),typeof t=="string"?e.querySelector(t):kc(t)?t:null}function so(t){for(var e;t&&!t.dir;)t=t.parentNode;return(e=t)==null?void 0:e.dir}class no{constructor(e,r){this.uppy=e,this.opts=r??{}}getPluginState(){const{plugins:e}=this.uppy.getState();return(e==null?void 0:e[this.id])||{}}setPluginState(e){const{plugins:r}=this.uppy.getState();this.uppy.setState({plugins:{...r,[this.id]:{...r[this.id],...e}}})}setOptions(e){this.opts={...this.opts,...e},this.setPluginState(void 0),this.i18nInit()}i18nInit(){const e=new xi([this.defaultLocale,this.uppy.locale,this.opts.locale]);this.i18n=e.translate.bind(e),this.i18nArray=e.translateArray.bind(e),this.setPluginState(void 0)}addTarget(e){throw new Error("Extend the addTarget method to add your plugin to another plugin's target")}install(){}uninstall(){}update(e){}afterUpdate(){}}function Yn(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var jc=0;function Lc(t){return"__private_"+jc+++"_"+t}function Bc(t){let e=null,r;return function(){for(var s=arguments.length,n=new Array(s),i=0;i<s;i++)n[i]=arguments[i];return r=n,e||(e=Promise.resolve().then(()=>(e=null,t(...r)))),e}}var $t=Lc("updateUI");class Ar extends no{constructor(){super(...arguments),Object.defineProperty(this,$t,{writable:!0,value:void 0})}getTargetPlugin(e){let r;if(typeof(e==null?void 0:e.addTarget)=="function")r=e,r instanceof Ar||console.warn(new Error("The provided plugin is not an instance of UIPlugin. This is an indication of a bug with the way Uppy is bundled.",{cause:{targetPlugin:r,UIPlugin:Ar}}));else if(typeof e=="function"){const s=e;this.uppy.iteratePlugins(n=>{n instanceof s&&(r=n)})}return r}mount(e,r){const s=r.id,n=Nc(e);if(n){this.isTargetDOMEl=!0;const a=document.createElement("div");return a.classList.add("uppy-Root"),Yn(this,$t)[$t]=Bc(l=>{this.uppy.getPlugin(this.id)&&(Gn(this.render(l,a),a),this.afterUpdate())}),this.uppy.log(`Installing ${s} to a DOM element '${e}'`),this.opts.replaceTargetContent&&(n.innerHTML=""),Gn(this.render(this.uppy.getState(),a),a),this.el=a,n.appendChild(a),a.dir=this.opts.direction||so(a)||"ltr",this.onMount(),this.el}const i=this.getTargetPlugin(e);if(i)return this.uppy.log(`Installing ${s} to ${i.id}`),this.parent=i,this.el=i.addTarget(r),this.onMount(),this.el;this.uppy.log(`Not installing ${s}`);let o=`Invalid target option given to ${s}.`;throw typeof e=="function"?o+=" The given target is not a Plugin class. Please check that you're not specifying a React Component instead of a plugin. If you are using @uppy/* packages directly, make sure you have only 1 version of @uppy/core installed: run `npm ls @uppy/core` on the command line and verify that all the versions match and are deduped correctly.":o+="If you meant to target an HTML element, please make sure that the element exists. Check that the <script> tag initializing Uppy is right before the closing </body> tag at the end of the page. (see https://github.com/transloadit/uppy/issues/1042)\n\nIf you meant to target a plugin, please confirm that your `import` statements or `require` calls are correct.",new Error(o)}render(e,r){throw new Error("Extend the render method to add your plugin to a DOM element")}update(e){if(this.el!=null){var r,s;(r=(s=Yn(this,$t))[$t])==null||r.call(s,e)}}unmount(){if(this.isTargetDOMEl){var e;(e=this.el)==null||e.remove()}this.onUnmount()}onMount(){}onUnmount(){}}const qr=Ar,Ys=Array.from;function Mc(){const t=document.body;return!(!("draggable"in t)||!("ondragstart"in t&&"ondrop"in t)||!("FormData"in window)||!("FileReader"in window))}function io(t,e,r,s){let{onSuccess:n}=s;t.readEntries(i=>{const o=[...e,...i];i.length?queueMicrotask(()=>{io(t,o,r,{onSuccess:n})}):n(o)},i=>{r(i),n(e)})}function oo(t,e){return t==null?t:{kind:t.isFile?"file":t.isDirectory?"directory":void 0,name:t.name,getFile(){return new Promise((r,s)=>t.file(r,s))},async*values(){const r=t.createReader();yield*await new Promise(n=>{io(r,[],e,{onSuccess:i=>n(i.map(o=>oo(o,e)))})})},isSameEntry:void 0}}function ao(t,e,r){try{return r===void 0&&(r=void 0),async function*(){const s=()=>`${e}/${t.name}`;if(t.kind==="file"){const n=await t.getFile();n!=null?(n.relativePath=e?s():null,yield n):r!=null&&(yield r)}else if(t.kind==="directory")for await(const n of t.values())yield*ao(n,e?s():t.name);else r!=null&&(yield r)}()}catch(s){return Promise.reject(s)}}async function*Ic(t,e){const r=await Promise.all(Array.from(t.items,async s=>{let n;return n??(n=oo((()=>typeof s.getAsEntry=="function"?s.getAsEntry():s.webkitGetAsEntry())(),e)),{fileSystemHandle:n,lastResortFile:s.getAsFile()}}));for(const{lastResortFile:s,fileSystemHandle:n}of r)if(n!=null)try{yield*ao(n,"",s)}catch(i){s!=null?yield s:e(i)}else s!=null&&(yield s)}function Dc(t){const e=Ys(t.files);return Promise.resolve(e)}async function qc(t,e){var r;const s=(r=e==null?void 0:e.logDropError)!=null?r:Function.prototype;try{const n=[];for await(const i of Ic(t,s))n.push(i);return n}catch{return Dc(t)}}const zc={strings:{dropHereOr:"Drop here or %{browse}",browse:"browse"}},Hc={version:"4.1.3"},Wc={inputName:"files[]",width:"100%",height:"100%"};class zr extends qr{constructor(e,r){super(e,{...Wc,...r}),this.isDragDropSupported=Mc(),this.addFiles=s=>{const n=s.map(i=>({source:this.id,name:i.name,type:i.type,data:i,meta:{relativePath:i.relativePath||null}}));try{this.uppy.addFiles(n)}catch(i){this.uppy.log(i)}},this.onInputChange=s=>{const n=Ys(s.currentTarget.files||[]);n.length>0&&(this.uppy.log("[DragDrop] Files selected through input"),this.addFiles(n)),s.currentTarget.value=""},this.handleDragOver=s=>{var n,i;s.preventDefault(),s.stopPropagation();const{types:o}=s.dataTransfer,a=o.some(u=>u==="Files"),{allowNewUpload:l}=this.uppy.getState();if(!a||!l){s.dataTransfer.dropEffect="none";return}s.dataTransfer.dropEffect="copy",this.setPluginState({isDraggingOver:!0}),(n=(i=this.opts).onDragOver)==null||n.call(i,s)},this.handleDragLeave=s=>{var n,i;s.preventDefault(),s.stopPropagation(),this.setPluginState({isDraggingOver:!1}),(n=(i=this.opts).onDragLeave)==null||n.call(i,s)},this.handleDrop=async s=>{var n,i;s.preventDefault(),s.stopPropagation(),this.setPluginState({isDraggingOver:!1});const o=l=>{this.uppy.log(l,"error")},a=await qc(s.dataTransfer,{logDropError:o});a.length>0&&(this.uppy.log("[DragDrop] Files dropped"),this.addFiles(a)),(n=(i=this.opts).onDrop)==null||n.call(i,s)},this.type="acquirer",this.id=this.opts.id||"DragDrop",this.title="Drag & Drop",this.defaultLocale=zc,this.i18nInit()}renderHiddenFileInput(){var e;const{restrictions:r}=this.uppy.opts;return b("input",{className:"uppy-DragDrop-input",type:"file",hidden:!0,ref:s=>{this.fileInputRef=s},name:this.opts.inputName,multiple:r.maxNumberOfFiles!==1,accept:(e=r.allowedFileTypes)==null?void 0:e.join(", "),onChange:this.onInputChange})}static renderArrowSvg(){return b("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon uppy-DragDrop-arrow",width:"16",height:"16",viewBox:"0 0 16 16"},b("path",{d:"M11 10V0H5v10H2l6 6 6-6h-3zm0 0",fillRule:"evenodd"}))}renderLabel(){return b("div",{className:"uppy-DragDrop-label"},this.i18nArray("dropHereOr",{browse:b("span",{className:"uppy-DragDrop-browse"},this.i18n("browse"))}))}renderNote(){return b("span",{className:"uppy-DragDrop-note"},this.opts.note)}render(){const e=`uppy-u-reset
      uppy-DragDrop-container
      ${this.isDragDropSupported?"uppy-DragDrop--isDragDropSupported":""}
      ${this.getPluginState().isDraggingOver?"uppy-DragDrop--isDraggingOver":""}
    `,r={width:this.opts.width,height:this.opts.height};return b("button",{type:"button",className:e,style:r,onClick:()=>this.fileInputRef.click(),onDragOver:this.handleDragOver,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop},this.renderHiddenFileInput(),b("div",{className:"uppy-DragDrop-inner"},zr.renderArrowSvg(),this.renderLabel(),this.renderNote()))}install(){const{target:e}=this.opts;this.setPluginState({isDraggingOver:!1}),e&&this.mount(e,this)}uninstall(){this.unmount()}}zr.VERSION=Hc.version;function Qn(t,e,r,s){return r===0||t===e?t:s===0?e:t+(e-t)*2**(-s/r)}const be={STATE_ERROR:"error",STATE_WAITING:"waiting",STATE_PREPROCESSING:"preprocessing",STATE_UPLOADING:"uploading",STATE_POSTPROCESSING:"postprocessing",STATE_COMPLETE:"complete"};var lo={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(t){(function(){var e={}.hasOwnProperty;function r(){for(var i="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(i=n(i,s(a)))}return i}function s(i){if(typeof i=="string"||typeof i=="number")return i;if(typeof i!="object")return"";if(Array.isArray(i))return r.apply(null,i);if(i.toString!==Object.prototype.toString&&!i.toString.toString().includes("[native code]"))return i.toString();var o="";for(var a in i)e.call(i,a)&&i[a]&&(o=n(o,a));return o}function n(i,o){return o?i?i+" "+o:i+o:i}t.exports?(r.default=r,t.exports=r):window.classNames=r})()})(lo);var Gc=lo.exports;const Cr=vt(Gc);function ns(t){const e=[];let r="indeterminate",s;for(const{progress:i}of Object.values(t)){const{preprocess:o,postprocess:a}=i;s==null&&(o||a)&&({mode:r,message:s}=o||a),(o==null?void 0:o.mode)==="determinate"&&e.push(o.value),(a==null?void 0:a.mode)==="determinate"&&e.push(a.value)}const n=e.reduce((i,o)=>i+o/e.length,0);return{mode:r,message:s,value:n}}function Vc(t){const e=Math.floor(t/3600)%24,r=Math.floor(t/60)%60,s=Math.floor(t%60);return{hours:e,minutes:r,seconds:s}}function Jc(t){const e=Vc(t),r=e.hours===0?"":`${e.hours}h`,s=e.minutes===0?"":`${e.hours===0?e.minutes:` ${e.minutes.toString(10).padStart(2,"0")}`}m`,n=e.hours!==0?"":`${e.minutes===0?e.seconds:` ${e.seconds.toString(10).padStart(2,"0")}`}s`;return`${r}${s}${n}`}const Kc="",Zn=()=>` ${Kc} `;function Xc(t){const{newFiles:e,isUploadStarted:r,recoveredState:s,i18n:n,uploadState:i,isSomeGhost:o,startUpload:a}=t,l=Cr("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--upload",{"uppy-c-btn-primary":i===be.STATE_WAITING},{"uppy-StatusBar-actionBtn--disabled":o}),u=e&&r&&!s?n("uploadXNewFiles",{smart_count:e}):n("uploadXFiles",{smart_count:e});return b("button",{type:"button",className:l,"aria-label":n("uploadXFiles",{smart_count:e}),onClick:a,disabled:o,"data-uppy-super-focusable":!0},u)}function Yc(t){const{i18n:e,uppy:r}=t;return b("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--retry","aria-label":e("retryUpload"),onClick:()=>r.retryAll().catch(()=>{}),"data-uppy-super-focusable":!0,"data-cy":"retry"},b("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"8",height:"10",viewBox:"0 0 8 10"},b("path",{d:"M4 2.408a2.75 2.75 0 1 0 2.75 2.75.626.626 0 0 1 1.25.018v.023a4 4 0 1 1-4-4.041V.25a.25.25 0 0 1 .389-.208l2.299 1.533a.25.25 0 0 1 0 .416l-2.3 1.533A.25.25 0 0 1 4 3.316v-.908z"})),e("retry"))}function Qc(t){const{i18n:e,uppy:r}=t;return b("button",{type:"button",className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",title:e("cancel"),"aria-label":e("cancel"),onClick:()=>r.cancelAll(),"data-cy":"cancel","data-uppy-super-focusable":!0},b("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},b("g",{fill:"none",fillRule:"evenodd"},b("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),b("path",{fill:"#FFF",d:"M9.283 8l2.567 2.567-1.283 1.283L8 9.283 5.433 11.85 4.15 10.567 6.717 8 4.15 5.433 5.433 4.15 8 6.717l2.567-2.567 1.283 1.283z"}))))}function Zc(t){const{isAllPaused:e,i18n:r,isAllComplete:s,resumableUploads:n,uppy:i}=t,o=r(e?"resume":"pause");function a(){if(!s){if(!n){i.cancelAll();return}if(e){i.resumeAll();return}i.pauseAll()}}return b("button",{title:o,"aria-label":o,className:"uppy-u-reset uppy-StatusBar-actionCircleBtn",type:"button",onClick:a,"data-cy":"togglePauseResume","data-uppy-super-focusable":!0},b("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-c-icon",width:"16",height:"16",viewBox:"0 0 16 16"},b("g",{fill:"none",fillRule:"evenodd"},b("circle",{fill:"#888",cx:"8",cy:"8",r:"8"}),b("path",{fill:"#FFF",d:e?"M6 4.25L11.5 8 6 11.75z":"M5 4.5h2v7H5v-7zm4 0h2v7H9v-7z"}))))}function ed(t){const{i18n:e,doneButtonHandler:r}=t;return b("button",{type:"button",className:"uppy-u-reset uppy-c-btn uppy-StatusBar-actionBtn uppy-StatusBar-actionBtn--done",onClick:r,"data-uppy-super-focusable":!0},e("done"))}function uo(){return b("svg",{className:"uppy-StatusBar-spinner","aria-hidden":"true",focusable:"false",width:"14",height:"14"},b("path",{d:"M13.983 6.547c-.12-2.509-1.64-4.893-3.939-5.936-2.48-1.127-5.488-.656-7.556 1.094C.524 3.367-.398 6.048.162 8.562c.556 2.495 2.46 4.52 4.94 5.183 2.932.784 5.61-.602 7.256-3.015-1.493 1.993-3.745 3.309-6.298 2.868-2.514-.434-4.578-2.349-5.153-4.84a6.226 6.226 0 0 1 2.98-6.778C6.34.586 9.74 1.1 11.373 3.493c.407.596.693 1.282.842 1.988.127.598.073 1.197.161 1.794.078.525.543 1.257 1.15.864.525-.341.49-1.05.456-1.592-.007-.15.02.3 0 0",fillRule:"evenodd"}))}function td(t){const{progress:e}=t,{value:r,mode:s,message:n}=e,i="";return b("div",{className:"uppy-StatusBar-content"},b(uo,null),s==="determinate"?`${Math.round(r*100)}% ${i} `:"",n)}function rd(t){const{numUploads:e,complete:r,totalUploadedSize:s,totalSize:n,totalETA:i,i18n:o}=t,a=e>1,l=ft(s);return b("div",{className:"uppy-StatusBar-statusSecondary"},a&&o("filesUploadedOfTotal",{complete:r,smart_count:e}),b("span",{className:"uppy-StatusBar-additionalInfo"},a&&Zn(),n!=null?o("dataUploadedOfTotal",{complete:l,total:ft(n)}):o("dataUploadedOfUnknown",{complete:l}),Zn(),i!=null&&o("xTimeLeft",{time:Jc(i)})))}function co(t){const{i18n:e,complete:r,numUploads:s}=t;return b("div",{className:"uppy-StatusBar-statusSecondary"},e("filesUploadedOfTotal",{complete:r,smart_count:s}))}function sd(t){const{i18n:e,newFiles:r,startUpload:s}=t,n=Cr("uppy-u-reset","uppy-c-btn","uppy-StatusBar-actionBtn","uppy-StatusBar-actionBtn--uploadNewlyAdded");return b("div",{className:"uppy-StatusBar-statusSecondary"},b("div",{className:"uppy-StatusBar-statusSecondaryHint"},e("xMoreFilesAdded",{smart_count:r})),b("button",{type:"button",className:n,"aria-label":e("uploadXFiles",{smart_count:r}),onClick:s},e("upload")))}function nd(t){const{i18n:e,supportsUploadProgress:r,totalProgress:s,showProgressDetails:n,isUploadStarted:i,isAllComplete:o,isAllPaused:a,newFiles:l,numUploads:u,complete:d,totalUploadedSize:c,totalSize:m,totalETA:h,startUpload:f}=t,y=l&&i;if(!i||o)return null;const g=e(a?"paused":"uploading");function _(){return!a&&!y&&n?r?b(rd,{numUploads:u,complete:d,totalUploadedSize:c,totalSize:m,totalETA:h,i18n:e}):b(co,{i18n:e,complete:d,numUploads:u}):null}return b("div",{className:"uppy-StatusBar-content","aria-label":g,title:g},a?null:b(uo,null),b("div",{className:"uppy-StatusBar-status"},b("div",{className:"uppy-StatusBar-statusPrimary"},r&&s!==0?`${g}: ${s}%`:g),_(),y?b(sd,{i18n:e,newFiles:l,startUpload:f}):null))}function id(t){const{i18n:e}=t;return b("div",{className:"uppy-StatusBar-content",role:"status",title:e("complete")},b("div",{className:"uppy-StatusBar-status"},b("div",{className:"uppy-StatusBar-statusPrimary"},b("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"15",height:"11",viewBox:"0 0 15 11"},b("path",{d:"M.414 5.843L1.627 4.63l3.472 3.472L13.202 0l1.212 1.213L5.1 10.528z"})),e("complete"))))}function od(t){const{error:e,i18n:r,complete:s,numUploads:n}=t;function i(){const o=`${r("uploadFailed")} 

 ${e}`;alert(o)}return b("div",{className:"uppy-StatusBar-content",title:r("uploadFailed")},b("svg",{"aria-hidden":"true",focusable:"false",className:"uppy-StatusBar-statusIndicator uppy-c-icon",width:"11",height:"11",viewBox:"0 0 11 11"},b("path",{d:"M4.278 5.5L0 1.222 1.222 0 5.5 4.278 9.778 0 11 1.222 6.722 5.5 11 9.778 9.778 11 5.5 6.722 1.222 11 0 9.778z"})),b("div",{className:"uppy-StatusBar-status"},b("div",{className:"uppy-StatusBar-statusPrimary"},r("uploadFailed"),b("button",{className:"uppy-u-reset uppy-StatusBar-details","aria-label":r("showErrorDetails"),"data-microtip-position":"top-right","data-microtip-size":"medium",onClick:i,type:"button"},"?")),b(co,{i18n:r,complete:s,numUploads:n})))}const{STATE_ERROR:ei,STATE_WAITING:ad,STATE_PREPROCESSING:is,STATE_UPLOADING:mr,STATE_POSTPROCESSING:os,STATE_COMPLETE:gr}=be;function ld(t){let{newFiles:e,allowNewUpload:r,isUploadInProgress:s,isAllPaused:n,resumableUploads:i,error:o,hideUploadButton:a=void 0,hidePauseResumeButton:l=!1,hideCancelButton:u=!1,hideRetryButton:d=!1,recoveredState:c,uploadState:m,totalProgress:h,files:f,supportsUploadProgress:y,hideAfterFinish:g=!1,isSomeGhost:_,doneButtonHandler:S=void 0,isUploadStarted:A,i18n:U,startUpload:x,uppy:P,isAllComplete:O,showProgressDetails:$=void 0,numUploads:j,complete:ie,totalSize:te,totalETA:Se,totalUploadedSize:wt}=t;function De(){switch(m){case os:case is:{const ur=ns(f);return ur.mode==="determinate"?ur.value*100:h}case ei:return null;case mr:return y?h:null;default:return h}}function lr(){switch(m){case os:case is:{const{mode:ur}=ns(f);return ur==="indeterminate"}case mr:return!y;default:return!1}}const pt=De(),qe=pt??100,ze=!o&&e&&(!s&&!n||c)&&r&&!a,Pe=!u&&m!==ad&&m!==gr,He=i&&!l&&m===mr,en=o&&!O&&!d,tn=S&&m===gr,Po=Cr("uppy-StatusBar-progress",{"is-indeterminate":lr()}),Eo=Cr("uppy-StatusBar",`is-${m}`,{"has-ghosts":_}),rn=(()=>{switch(m){case is:case os:return b(td,{progress:ns(f)});case gr:return b(id,{i18n:U});case ei:return b(od,{error:o,i18n:U,numUploads:j,complete:ie});case mr:return b(nd,{i18n:U,supportsUploadProgress:y,totalProgress:h,showProgressDetails:$,isUploadStarted:A,isAllComplete:O,isAllPaused:n,newFiles:e,numUploads:j,complete:ie,totalUploadedSize:wt,totalSize:te,totalETA:Se,startUpload:x});default:return null}})();return!(ze||en||He||Pe||tn)&&!rn||m===gr&&g?null:b("div",{className:Eo},b("div",{className:Po,style:{width:`${qe}%`},role:"progressbar","aria-label":`${qe}%`,"aria-valuetext":`${qe}%`,"aria-valuemin":0,"aria-valuemax":100,"aria-valuenow":pt}),rn,b("div",{className:"uppy-StatusBar-actions"},ze?b(Xc,{newFiles:e,isUploadStarted:A,recoveredState:c,i18n:U,isSomeGhost:_,startUpload:x,uploadState:m}):null,en?b(Yc,{i18n:U,uppy:P}):null,He?b(Zc,{isAllPaused:n,i18n:U,isAllComplete:O,resumableUploads:i,uppy:P}):null,Pe?b(Qc,{i18n:U,uppy:P}):null,tn?b(ed,{i18n:U,doneButtonHandler:S}):null))}const ud={strings:{uploading:"Uploading",complete:"Complete",uploadFailed:"Upload failed",paused:"Paused",retry:"Retry",cancel:"Cancel",pause:"Pause",resume:"Resume",done:"Done",filesUploadedOfTotal:{0:"%{complete} of %{smart_count} file uploaded",1:"%{complete} of %{smart_count} files uploaded"},dataUploadedOfTotal:"%{complete} of %{total}",dataUploadedOfUnknown:"%{complete} of unknown",xTimeLeft:"%{time} left",uploadXFiles:{0:"Upload %{smart_count} file",1:"Upload %{smart_count} files"},uploadXNewFiles:{0:"Upload +%{smart_count} file",1:"Upload +%{smart_count} files"},upload:"Upload",retryUpload:"Retry upload",xMoreFilesAdded:{0:"%{smart_count} more file added",1:"%{smart_count} more files added"},showErrorDetails:"Show error details"}};function L(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var cd=0;function bt(t){return"__private_"+cd+++"_"+t}const dd={version:"4.1.3"},pd=2e3,hd=2e3;function fd(t,e,r,s){if(t)return be.STATE_ERROR;if(e)return be.STATE_COMPLETE;if(r)return be.STATE_WAITING;let n=be.STATE_WAITING;const i=Object.keys(s);for(let o=0;o<i.length;o++){const{progress:a}=s[i[o]];if(a.uploadStarted&&!a.uploadComplete)return be.STATE_UPLOADING;a.preprocess&&(n=be.STATE_PREPROCESSING),a.postprocess&&n!==be.STATE_PREPROCESSING&&(n=be.STATE_POSTPROCESSING)}return n}const md={hideUploadButton:!1,hideRetryButton:!1,hidePauseResumeButton:!1,hideCancelButton:!1,showProgressDetails:!1,hideAfterFinish:!0,doneButtonHandler:null};var he=bt("lastUpdateTime"),ge=bt("previousUploadedBytes"),$e=bt("previousSpeed"),ae=bt("previousETA"),as=bt("computeSmoothETA"),kt=bt("onUploadStart");class po extends qr{constructor(e,r){super(e,{...md,...r}),Object.defineProperty(this,as,{value:gd}),Object.defineProperty(this,he,{writable:!0,value:void 0}),Object.defineProperty(this,ge,{writable:!0,value:void 0}),Object.defineProperty(this,$e,{writable:!0,value:void 0}),Object.defineProperty(this,ae,{writable:!0,value:void 0}),this.startUpload=()=>this.uppy.upload().catch(()=>{}),Object.defineProperty(this,kt,{writable:!0,value:()=>{const{recoveredState:s}=this.uppy.getState();if(L(this,$e)[$e]=null,L(this,ae)[ae]=null,s){L(this,ge)[ge]=Object.values(s.files).reduce((n,i)=>{let{progress:o}=i;return n+o.bytesUploaded},0),this.uppy.emit("restore-confirmed");return}L(this,he)[he]=performance.now(),L(this,ge)[ge]=0}}),this.id=this.opts.id||"StatusBar",this.title="StatusBar",this.type="progressindicator",this.defaultLocale=ud,this.i18nInit(),this.render=this.render.bind(this),this.install=this.install.bind(this)}render(e){const{capabilities:r,files:s,allowNewUpload:n,totalProgress:i,error:o,recoveredState:a}=e,{newFiles:l,startedFiles:u,completeFiles:d,isUploadStarted:c,isAllComplete:m,isAllPaused:h,isUploadInProgress:f,isSomeGhost:y}=this.uppy.getObjectOfFilesPerState(),g=a?Object.values(s):l,_=!!r.resumableUploads,S=r.uploadProgress!==!1;let A=null,U=0;u.every(P=>P.progress.bytesTotal!=null&&P.progress.bytesTotal!==0)?(A=0,u.forEach(P=>{A+=P.progress.bytesTotal||0,U+=P.progress.bytesUploaded||0})):u.forEach(P=>{U+=P.progress.bytesUploaded||0});const x=L(this,as)[as]({uploaded:U,total:A});return ld({error:o,uploadState:fd(o,m,a,e.files||{}),allowNewUpload:n,totalProgress:i,totalSize:A,totalUploadedSize:U,isAllComplete:!1,isAllPaused:h,isUploadStarted:c,isUploadInProgress:f,isSomeGhost:y,recoveredState:a,complete:d.length,newFiles:g.length,numUploads:u.length,totalETA:x,files:s,i18n:this.i18n,uppy:this.uppy,startUpload:this.startUpload,doneButtonHandler:this.opts.doneButtonHandler,resumableUploads:_,supportsUploadProgress:S,showProgressDetails:this.opts.showProgressDetails,hideUploadButton:this.opts.hideUploadButton,hideRetryButton:this.opts.hideRetryButton,hidePauseResumeButton:this.opts.hidePauseResumeButton,hideCancelButton:this.opts.hideCancelButton,hideAfterFinish:this.opts.hideAfterFinish})}onMount(){const e=this.el;so(e)||(e.dir="ltr")}install(){const{target:e}=this.opts;e&&this.mount(e,this),this.uppy.on("upload",L(this,kt)[kt]),L(this,he)[he]=performance.now(),L(this,ge)[ge]=this.uppy.getFiles().reduce((r,s)=>r+s.progress.bytesUploaded,0)}uninstall(){this.unmount(),this.uppy.off("upload",L(this,kt)[kt])}}function gd(t){var e,r;if(t.total==null||t.total===0)return null;const s=t.total-t.uploaded;if(s<=0)return null;(r=(e=L(this,he))[he])!=null||(e[he]=performance.now());const n=performance.now()-L(this,he)[he];if(n===0){var i;return Math.round(((i=L(this,ae)[ae])!=null?i:0)/100)/10}const o=t.uploaded-L(this,ge)[ge];if(L(this,ge)[ge]=t.uploaded,o<=0){var a;return Math.round(((a=L(this,ae)[ae])!=null?a:0)/100)/10}const l=o/n,u=L(this,$e)[$e]==null?l:Qn(l,L(this,$e)[$e],pd,n);L(this,$e)[$e]=u;const d=s/u,c=Math.max(L(this,ae)[ae]-n,0),m=L(this,ae)[ae]==null?d:Qn(d,c,hd,n);return L(this,ae)[ae]=m,L(this,he)[he]=performance.now(),Math.round(m/100)/10}po.VERSION=dd.version;const yd={version:"4.2.1"},_d={fixed:!1,hideAfterFinish:!0};class ho extends qr{constructor(e,r){super(e,{..._d,...r}),this.id=this.opts.id||"ProgressBar",this.title="Progress Bar",this.type="progressindicator",this.render=this.render.bind(this)}render(e){const{totalProgress:r}=e,s=(r===0||r===100)&&this.opts.hideAfterFinish;return b("div",{className:"uppy uppy-ProgressBar",style:{position:this.opts.fixed?"fixed":"initial"},"aria-hidden":s},b("div",{className:"uppy-ProgressBar-inner",style:{width:`${r}%`}}),b("div",{className:"uppy-ProgressBar-percentage"},r))}install(){const{target:e}=this.opts;e&&this.mount(e,this)}uninstall(){this.unmount()}}ho.VERSION=yd.version;const vd={strings:{chooseFiles:"Choose files"}},bd={version:"4.1.3"},wd={pretty:!0,inputName:"files[]"};class fo extends qr{constructor(e,r){super(e,{...wd,...r}),this.input=null,this.id=this.opts.id||"FileInput",this.title="File Input",this.type="acquirer",this.defaultLocale=vd,this.i18nInit(),this.render=this.render.bind(this),this.handleInputChange=this.handleInputChange.bind(this),this.handleClick=this.handleClick.bind(this)}addFiles(e){const r=e.map(s=>({source:this.id,name:s.name,type:s.type,data:s}));try{this.uppy.addFiles(r)}catch(s){this.uppy.log(s)}}handleInputChange(e){this.uppy.log("[FileInput] Something selected through input...");const r=Ys(e.currentTarget.files||[]);this.addFiles(r),e.currentTarget.value=""}handleClick(){this.input.click()}render(){var e;const r={width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},{restrictions:s}=this.uppy.opts;return b("div",{className:"uppy-FileInput-container"},b("input",{className:"uppy-FileInput-input",style:this.opts.pretty?r:void 0,type:"file",name:this.opts.inputName,onChange:this.handleInputChange,multiple:s.maxNumberOfFiles!==1,accept:(e=s.allowedFileTypes)==null?void 0:e.join(", "),ref:n=>{this.input=n}}),this.opts.pretty&&b("button",{className:"uppy-FileInput-btn",type:"button",onClick:this.handleClick},this.i18n("chooseFiles")))}install(){const{target:e}=this.opts;e&&this.mount(e,this)}uninstall(){this.unmount()}}fo.VERSION=bd.version;class Sd extends Error{constructor(){super(...arguments),this.name="UserFacingApiError"}}var mo={};function fe(t,e){typeof e=="boolean"&&(e={forever:e}),this._originalTimeouts=JSON.parse(JSON.stringify(t)),this._timeouts=t,this._options=e||{},this._maxRetryTime=e&&e.maxRetryTime||1/0,this._fn=null,this._errors=[],this._attempts=1,this._operationTimeout=null,this._operationTimeoutCb=null,this._timeout=null,this._operationStart=null,this._timer=null,this._options.forever&&(this._cachedTimeouts=this._timeouts.slice(0))}var Pd=fe;fe.prototype.reset=function(){this._attempts=1,this._timeouts=this._originalTimeouts.slice(0)};fe.prototype.stop=function(){this._timeout&&clearTimeout(this._timeout),this._timer&&clearTimeout(this._timer),this._timeouts=[],this._cachedTimeouts=null};fe.prototype.retry=function(t){if(this._timeout&&clearTimeout(this._timeout),!t)return!1;var e=new Date().getTime();if(t&&e-this._operationStart>=this._maxRetryTime)return this._errors.push(t),this._errors.unshift(new Error("RetryOperation timeout occurred")),!1;this._errors.push(t);var r=this._timeouts.shift();if(r===void 0)if(this._cachedTimeouts)this._errors.splice(0,this._errors.length-1),r=this._cachedTimeouts.slice(-1);else return!1;var s=this;return this._timer=setTimeout(function(){s._attempts++,s._operationTimeoutCb&&(s._timeout=setTimeout(function(){s._operationTimeoutCb(s._attempts)},s._operationTimeout),s._options.unref&&s._timeout.unref()),s._fn(s._attempts)},r),this._options.unref&&this._timer.unref(),!0};fe.prototype.attempt=function(t,e){this._fn=t,e&&(e.timeout&&(this._operationTimeout=e.timeout),e.cb&&(this._operationTimeoutCb=e.cb));var r=this;this._operationTimeoutCb&&(this._timeout=setTimeout(function(){r._operationTimeoutCb()},r._operationTimeout)),this._operationStart=new Date().getTime(),this._fn(this._attempts)};fe.prototype.try=function(t){console.log("Using RetryOperation.try() is deprecated"),this.attempt(t)};fe.prototype.start=function(t){console.log("Using RetryOperation.start() is deprecated"),this.attempt(t)};fe.prototype.start=fe.prototype.try;fe.prototype.errors=function(){return this._errors};fe.prototype.attempts=function(){return this._attempts};fe.prototype.mainError=function(){if(this._errors.length===0)return null;for(var t={},e=null,r=0,s=0;s<this._errors.length;s++){var n=this._errors[s],i=n.message,o=(t[i]||0)+1;t[i]=o,o>=r&&(e=n,r=o)}return e};(function(t){var e=Pd;t.operation=function(r){var s=t.timeouts(r);return new e(s,{forever:r&&(r.forever||r.retries===1/0),unref:r&&r.unref,maxRetryTime:r&&r.maxRetryTime})},t.timeouts=function(r){if(r instanceof Array)return[].concat(r);var s={retries:10,factor:2,minTimeout:1*1e3,maxTimeout:1/0,randomize:!1};for(var n in r)s[n]=r[n];if(s.minTimeout>s.maxTimeout)throw new Error("minTimeout is greater than maxTimeout");for(var i=[],o=0;o<s.retries;o++)i.push(this.createTimeout(o,s));return r&&r.forever&&!i.length&&i.push(this.createTimeout(o,s)),i.sort(function(a,l){return a-l}),i},t.createTimeout=function(r,s){var n=s.randomize?Math.random()+1:1,i=Math.round(n*Math.max(s.minTimeout,1)*Math.pow(s.factor,r));return i=Math.min(i,s.maxTimeout),i},t.wrap=function(r,s,n){if(s instanceof Array&&(n=s,s=null),!n){n=[];for(var i in r)typeof r[i]=="function"&&n.push(i)}for(var o=0;o<n.length;o++){var a=n[o],l=r[a];r[a]=(function(d){var c=t.operation(s),m=Array.prototype.slice.call(arguments,1),h=m.pop();m.push(function(f){c.retry(f)||(f&&(arguments[0]=c.mainError()),h.apply(this,arguments))}),c.attempt(function(){d.apply(r,m)})}).bind(r,l),r[a].options=s}}})(mo);var Ed=mo;const Td=vt(Ed),Od=Object.prototype.toString,Fd=t=>Od.call(t)==="[object Error]",Ud=new Set(["network error","Failed to fetch","NetworkError when attempting to fetch resource.","The Internet connection appears to be offline.","Load failed","Network request failed","fetch failed","terminated"]);function Rd(t){return t&&Fd(t)&&t.name==="TypeError"&&typeof t.message=="string"?t.message==="Load failed"?t.stack===void 0:Ud.has(t.message):!1}class ks extends Error{constructor(e){super(),e instanceof Error?(this.originalError=e,{message:e}=e):(this.originalError=new Error(e),this.originalError.stack=this.stack),this.name="AbortError",this.message=e}}const ti=(t,e,r)=>{const s=r.retries-(e-1);return t.attemptNumber=e,t.retriesLeft=s,t};async function go(t,e){return new Promise((r,s)=>{e={...e},e.onFailedAttempt??(e.onFailedAttempt=()=>{}),e.shouldRetry??(e.shouldRetry=()=>!0),e.retries??(e.retries=10);const n=Td.operation(e),i=()=>{var a;n.stop(),s((a=e.signal)==null?void 0:a.reason)};e.signal&&!e.signal.aborted&&e.signal.addEventListener("abort",i,{once:!0});const o=()=>{var a;(a=e.signal)==null||a.removeEventListener("abort",i),n.stop()};n.attempt(async a=>{try{const l=await t(a);o(),r(l)}catch(l){try{if(!(l instanceof Error))throw new TypeError(`Non-error was thrown: "${l}". You should only throw errors.`);if(l instanceof ks)throw l.originalError;if(l instanceof TypeError&&!Rd(l))throw l;if(ti(l,a,e),await e.shouldRetry(l)||(n.stop(),s(l)),await e.onFailedAttempt(l),!n.retry(l))throw n.mainError()}catch(u){ti(u,a,e),o(),s(u)}}})})}class Ad extends Error{constructor(e,r){r===void 0&&(r=null),super("This looks like a network error, the endpoint might be blocked by an internet provider or a firewall."),this.cause=e,this.isNetworkError=!0,this.request=r}}function Cd(){return fetch(...arguments).catch(t=>{throw t.name==="AbortError"?t:new Ad(t)})}function yo(t,e){return Object.prototype.hasOwnProperty.call(t,e)}class xd extends Error{constructor(e,r){super(e),this.cause=r==null?void 0:r.cause,this.cause&&yo(this.cause,"isNetworkError")?this.isNetworkError=this.cause.isNetworkError:this.isNetworkError=!1}}function $d(t){var e;const s=(e=/^(?:https?:\/\/|\/\/)?(?:[^@\n]+@)?([^\n]+)/i.exec(t))==null?void 0:e[1];return`${/^http:\/\//i.test(t)?"ws":"wss"}://${s}`}class kd extends Error{constructor(){super("Authorization required"),this.name="AuthError",this.isAuthError=!0}}function Te(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Nd=0;function Hr(t){return"__private_"+Nd+++"_"+t}const jd={version:"4.4.2"};function Ld(t){return t.replace(/\/$/,"")}const _o=10,Bd=5*60*1e3,Md=401;class Id extends Error{constructor(e){let{statusCode:r,message:s}=e;super(s),this.name="HttpError",this.statusCode=r}}async function Dd(t){if(t.status===Md)throw new kd;if(t.ok)return t.json();let e=`Failed request with status: ${t.status}. ${t.statusText}`,r;try{r=await t.json(),r.message&&(e=`${e} message: ${r.message}`),r.requestId&&(e=`${e} request-Id: ${r.requestId}`)}catch(s){throw new Error(e,{cause:s})}throw t.status>=400&&t.status<=499&&r.message?new Sd(r.message):new Id({statusCode:t.status,message:e})}function qd(t,e,r){const{progress:s,bytesUploaded:n,bytesTotal:i}=e;if(s){var o;t.uppy.log(`Upload progress: ${s}`),t.uppy.emit("upload-progress",r,{uploadStarted:(o=r.progress.uploadStarted)!=null?o:0,bytesUploaded:n,bytesTotal:i})}}var Oe=Hr("companionHeaders"),Nt=Hr("getUrl"),ls=Hr("requestSocketToken"),jt=Hr("awaitRemoteFileUpload");class vo{constructor(e,r){Object.defineProperty(this,jt,{value:Hd}),Object.defineProperty(this,Nt,{value:zd}),Object.defineProperty(this,Oe,{writable:!0,value:void 0}),Object.defineProperty(this,ls,{writable:!0,value:async s=>{var n;let{file:i,postBody:o,signal:a}=s;if(((n=i.remote)==null?void 0:n.url)==null)throw new Error("Cannot connect to an undefined URL");return(await this.post(i.remote.url,{...i.remote.body,...o},{signal:a})).token}}),this.uppy=e,this.opts=r,this.onReceiveResponse=this.onReceiveResponse.bind(this),Te(this,Oe)[Oe]=r.companionHeaders}setCompanionHeaders(e){Te(this,Oe)[Oe]=e}[Symbol.for("uppy test: getCompanionHeaders")](){return Te(this,Oe)[Oe]}get hostname(){const{companion:e}=this.uppy.getState(),r=this.opts.companionUrl;return Ld(e&&e[r]?e[r]:r)}async headers(e){return e===void 0&&(e=!1),{...{Accept:"application/json",...e?void 0:{"Content-Type":"application/json"}},...Te(this,Oe)[Oe]}}onReceiveResponse(e){const{headers:r}=e,n=this.uppy.getState().companion||{},i=this.opts.companionUrl;r.has("i-am")&&r.get("i-am")!==n[i]&&this.uppy.setState({companion:{...n,[i]:r.get("i-am")}})}async request(e){let{path:r,method:s="GET",data:n,skipPostResponse:i,signal:o}=e;try{const a=await this.headers(!n),l=await Cd(Te(this,Nt)[Nt](r),{method:s,signal:o,headers:a,credentials:this.opts.companionCookiesRule||"same-origin",body:n?JSON.stringify(n):null});return i||this.onReceiveResponse(l),await Dd(l)}catch(a){throw a.isAuthError||a.name==="UserFacingApiError"||a.name==="AbortError"?a:new xd(`Could not ${s} ${Te(this,Nt)[Nt](r)}`,{cause:a})}}async get(e,r){return this.request({...r,path:e})}async post(e,r,s){return this.request({...s,path:e,method:"POST",data:r})}async delete(e,r,s){return this.request({...s,path:e,method:"DELETE",data:r})}async uploadRemoteFile(e,r,s){var n=this;try{const{signal:i,getQueue:o}=s||{};return await go(async()=>{var a;const l=(a=this.uppy.getFile(e.id))==null?void 0:a.serverToken;if(l!=null)return this.uppy.log(`Connecting to exiting websocket ${l}`),Te(this,jt)[jt]({file:e,queue:o(),signal:i});const d=await o().wrapPromiseFunction(async function(){try{return await Te(n,ls)[ls](...arguments)}catch(c){if(c.isAuthError)throw new ks(c);if(c.cause==null)throw c;const m=c.cause,h=()=>[408,409,429,418,423].includes(m.statusCode)||m.statusCode>=500&&m.statusCode<=599&&![501,505].includes(m.statusCode);throw m.name==="HttpError"&&!h()?new ks(m):m}},{priority:-1})({file:e,postBody:r,signal:i}).abortOn(i);if(this.uppy.getFile(e.id))return this.uppy.setFileState(e.id,{serverToken:d}),Te(this,jt)[jt]({file:this.uppy.getFile(e.id),queue:o(),signal:i})},{retries:_o,signal:i,onFailedAttempt:a=>this.uppy.log(`Retrying upload due to: ${a.message}`,"warning")})}catch(i){if(i.name==="AbortError")return;throw this.uppy.emit("upload-error",e,i),i}}}function zd(t){return/^(https?:|)\/\//.test(t)?t:`${this.hostname}/${t}`}async function Hd(t){let{file:e,queue:r,signal:s}=t,n;const{capabilities:i}=this.uppy.getState();try{return await new Promise((o,a)=>{const l=e.serverToken,u=$d(e.remote.companionUrl);let d,c,m,{isPaused:h}=e;const f=(O,$)=>{if(d==null||d.readyState!==d.OPEN){var j;this.uppy.log(`Cannot send "${O}" to socket ${e.id} because the socket state was ${String((j=d)==null?void 0:j.readyState)}`,"warning");return}d.send(JSON.stringify({action:O,payload:$??{}}))};function y(){i.resumableUploads&&f(h?"pause":"resume")}const g=async()=>{c&&c.abort(),c=new AbortController;const O=j=>{var ie;this.uppy.setFileState(e.id,{serverToken:null}),(ie=c)==null||ie.abort==null||ie.abort(),a(j)};function $(){clearTimeout(m),!h&&(m=setTimeout(()=>O(new Error("Timeout waiting for message from Companion socket")),Bd))}try{await r.wrapPromiseFunction(async()=>{await go(async()=>new Promise((ie,te)=>{d=new WebSocket(`${u}/api/${l}`),$(),d.addEventListener("close",()=>{d=void 0,te(new Error("Socket closed unexpectedly"))}),d.addEventListener("error",wt=>{var De;this.uppy.log(`Companion socket error ${JSON.stringify(wt)}, closing socket`,"warning"),(De=d)==null||De.close()}),d.addEventListener("open",()=>{y()}),d.addEventListener("message",wt=>{$();try{const{action:ze,payload:Pe}=JSON.parse(wt.data);switch(ze){case"progress":{qd(this,Pe,this.uppy.getFile(e.id));break}case"success":{var De,lr,pt,qe;const He=(De=Pe.response)==null?void 0:De.responseText;this.uppy.emit("upload-success",this.uppy.getFile(e.id),{uploadURL:Pe.url,status:(lr=(pt=Pe.response)==null?void 0:pt.status)!=null?lr:200,body:He?JSON.parse(He):void 0}),(qe=c)==null||qe.abort==null||qe.abort(),o();break}case"error":{const{message:He}=Pe.error;throw Object.assign(new Error(He),{cause:Pe.error})}default:this.uppy.log(`Companion socket unknown action ${ze}`,"warning")}}catch(ze){O(ze)}});const Se=()=>{this.uppy.log(`Closing socket ${e.id}`),clearTimeout(m),d&&d.close(),d=void 0};c.signal.addEventListener("abort",()=>{Se()})}),{retries:_o,signal:c.signal,onFailedAttempt:()=>{c.signal.aborted||this.uppy.log(`Retrying websocket ${e.id}`)}})})().abortOn(c.signal)}catch(j){if(c.signal.aborted)return;O(j)}},_=O=>{i.resumableUploads&&(h=O,d&&y())},S=O=>{var $;i.individualCancellation&&O.id===e.id&&(f("cancel"),($=c)==null||$.abort==null||$.abort(),this.uppy.log(`upload ${e.id} was removed`),o())},A=()=>{var O;f("cancel"),(O=c)==null||O.abort==null||O.abort(),this.uppy.log(`upload ${e.id} was canceled`),o()},U=(O,$)=>{(O==null?void 0:O.id)===e.id&&_($)},x=()=>_(!0),P=()=>_(!1);this.uppy.on("file-removed",S),this.uppy.on("cancel-all",A),this.uppy.on("upload-pause",U),this.uppy.on("pause-all",x),this.uppy.on("resume-all",P),n=()=>{this.uppy.off("file-removed",S),this.uppy.off("cancel-all",A),this.uppy.off("upload-pause",U),this.uppy.off("pause-all",x),this.uppy.off("resume-all",P)},s.addEventListener("abort",()=>{var O;(O=c)==null||O.abort()}),g()})}finally{n==null||n()}}vo.VERSION=jd.version;function Fe(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Wd=0;function bo(t){return"__private_"+Wd+++"_"+t}var K=bo("uppy"),Lt=bo("events");class Gd{constructor(e){Object.defineProperty(this,K,{writable:!0,value:void 0}),Object.defineProperty(this,Lt,{writable:!0,value:[]}),Fe(this,K)[K]=e}on(e,r){return Fe(this,Lt)[Lt].push([e,r]),Fe(this,K)[K].on(e,r)}remove(){for(const[e,r]of Fe(this,Lt)[Lt].splice(0))Fe(this,K)[K].off(e,r)}onFilePause(e,r){this.on("upload-pause",(s,n)=>{e===(s==null?void 0:s.id)&&r(n)})}onFileRemove(e,r){this.on("file-removed",s=>{e===s.id&&r(s.id)})}onPause(e,r){this.on("upload-pause",(s,n)=>{e===(s==null?void 0:s.id)&&r(n)})}onRetry(e,r){this.on("upload-retry",s=>{e===(s==null?void 0:s.id)&&r()})}onRetryAll(e,r){this.on("retry-all",()=>{Fe(this,K)[K].getFile(e)&&r()})}onPauseAll(e,r){this.on("pause-all",()=>{Fe(this,K)[K].getFile(e)&&r()})}onCancelAll(e,r){var s=this;this.on("cancel-all",function(){Fe(s,K)[K].getFile(e)&&r(...arguments)})}onResumeAll(e,r){this.on("resume-all",()=>{Fe(this,K)[K].getFile(e)&&r()})}}function T(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var Vd=0;function se(t){return"__private_"+Vd+++"_"+t}function Jd(t){return new Error("Cancelled",{cause:t})}function ri(t){if(t!=null){var e;const r=()=>this.abort(t.reason);t.addEventListener("abort",r,{once:!0});const s=()=>{t.removeEventListener("abort",r)};(e=this.then)==null||e.call(this,s,s)}return this}var le=se("activeRequests"),Z=se("queuedHandlers"),oe=se("paused"),We=se("pauseTimer"),X=se("downLimit"),Ge=se("upperLimit"),Ue=se("rateLimitingTimer"),Zt=se("call"),Le=se("queueNext"),Ns=se("next"),us=se("queue"),js=se("dequeue"),cs=se("resume"),Ve=se("increaseLimit");class Kd{constructor(e){Object.defineProperty(this,js,{value:ep}),Object.defineProperty(this,us,{value:Zd}),Object.defineProperty(this,Ns,{value:Qd}),Object.defineProperty(this,Le,{value:Yd}),Object.defineProperty(this,Zt,{value:Xd}),Object.defineProperty(this,le,{writable:!0,value:0}),Object.defineProperty(this,Z,{writable:!0,value:[]}),Object.defineProperty(this,oe,{writable:!0,value:!1}),Object.defineProperty(this,We,{writable:!0,value:void 0}),Object.defineProperty(this,X,{writable:!0,value:1}),Object.defineProperty(this,Ge,{writable:!0,value:void 0}),Object.defineProperty(this,Ue,{writable:!0,value:void 0}),Object.defineProperty(this,cs,{writable:!0,value:()=>this.resume()}),Object.defineProperty(this,Ve,{writable:!0,value:()=>{if(T(this,oe)[oe]){T(this,Ue)[Ue]=setTimeout(T(this,Ve)[Ve],0);return}T(this,X)[X]=this.limit,this.limit=Math.ceil((T(this,Ge)[Ge]+T(this,X)[X])/2);for(let r=T(this,X)[X];r<=this.limit;r++)T(this,Le)[Le]();T(this,Ge)[Ge]-T(this,X)[X]>3?T(this,Ue)[Ue]=setTimeout(T(this,Ve)[Ve],2e3):T(this,X)[X]=Math.floor(T(this,X)[X]/2)}}),typeof e!="number"||e===0?this.limit=1/0:this.limit=e}run(e,r){return!T(this,oe)[oe]&&T(this,le)[le]<this.limit?T(this,Zt)[Zt](e):T(this,us)[us](e,r)}wrapSyncFunction(e,r){var s=this;return function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];const a=s.run(()=>(e(...i),queueMicrotask(()=>a.done()),()=>{}),r);return{abortOn:ri,abort(){a.abort()}}}}wrapPromiseFunction(e,r){var s=this;return function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];let a;const l=new Promise((u,d)=>{a=s.run(()=>{let c,m;try{m=Promise.resolve(e(...i))}catch(h){m=Promise.reject(h)}return m.then(h=>{c?d(c):(a.done(),u(h))},h=>{c?d(c):(a.done(),d(h))}),h=>{c=Jd(h)}},r)});return l.abort=u=>{a.abort(u)},l.abortOn=ri,l}}resume(){T(this,oe)[oe]=!1,clearTimeout(T(this,We)[We]);for(let e=0;e<this.limit;e++)T(this,Le)[Le]()}pause(e){e===void 0&&(e=null),T(this,oe)[oe]=!0,clearTimeout(T(this,We)[We]),e!=null&&(T(this,We)[We]=setTimeout(T(this,cs)[cs],e))}rateLimit(e){clearTimeout(T(this,Ue)[Ue]),this.pause(e),this.limit>1&&Number.isFinite(this.limit)&&(T(this,Ge)[Ge]=this.limit-1,this.limit=T(this,X)[X],T(this,Ue)[Ue]=setTimeout(T(this,Ve)[Ve],e))}get isPaused(){return T(this,oe)[oe]}}function Xd(t){T(this,le)[le]+=1;let e=!1,r;try{r=t()}catch(s){throw T(this,le)[le]-=1,s}return{abort:s=>{e||(e=!0,T(this,le)[le]-=1,r==null||r(s),T(this,Le)[Le]())},done:()=>{e||(e=!0,T(this,le)[le]-=1,T(this,Le)[Le]())}}}function Yd(){queueMicrotask(()=>T(this,Ns)[Ns]())}function Qd(){if(T(this,oe)[oe]||T(this,le)[le]>=this.limit||T(this,Z)[Z].length===0)return;const t=T(this,Z)[Z].shift();if(t==null)throw new Error("Invariant violation: next is null");const e=T(this,Zt)[Zt](t.fn);t.abort=e.abort,t.done=e.done}function Zd(t,e){const r={fn:t,priority:(e==null?void 0:e.priority)||0,abort:()=>{T(this,js)[js](r)},done:()=>{throw new Error("Cannot mark a queued request as done: this indicates a bug")}},s=T(this,Z)[Z].findIndex(n=>r.priority>n.priority);return s===-1?T(this,Z)[Z].push(r):T(this,Z)[Z].splice(s,0,r),r}function ep(t){const e=T(this,Z)[Z].indexOf(t);e!==-1&&T(this,Z)[Z].splice(e,1)}function tp(t){const e=r=>"error"in r&&!!r.error;return t.filter(r=>!e(r))}function rp(t){return t.filter(e=>{var r;return!((r=e.progress)!=null&&r.uploadStarted)||!e.isRestored})}const{AbortController:ds}=globalThis,wo=function(t,e){t===void 0&&(t="Aborted");const r=new DOMException(t,"AbortError");return e!=null&&yo(e,"cause")&&Object.defineProperty(r,"cause",{__proto__:null,configurable:!0,writable:!0,value:e.cause}),r};function si(t,e){return t===!0?Object.keys(e):Array.isArray(t)?t:[]}function w(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var sp=0;function I(t){return"__private_"+sp+++"_"+t}const np=1024*1024,ni={getChunkSize(t){return Math.ceil(t.size/1e4)},onProgress(){},onPartComplete(){},onSuccess(){},onError(t){throw t}};function ip(t){if(typeof t=="string")return parseInt(t,10);if(typeof t=="number")return t;throw new TypeError("Expected a number")}const Er=Symbol("pausing upload, not an actual error");var G=I("abortController"),M=I("chunks"),Q=I("chunkState"),ue=I("data"),de=I("file"),er=I("uploadHasStarted"),Bt=I("onError"),ct=I("onSuccess"),ke=I("shouldUseMultipart"),rt=I("isRestoring"),ir=I("onReject"),Xe=I("maxMultipartParts"),Kt=I("minPartSize"),ps=I("initChunks"),hs=I("createUpload"),Mt=I("resumeUpload"),Xt=I("onPartProgress"),Yt=I("onPartComplete"),fs=I("abortUpload");class op{constructor(e,r){var s,n;Object.defineProperty(this,fs,{value:cp}),Object.defineProperty(this,Mt,{value:up}),Object.defineProperty(this,hs,{value:lp}),Object.defineProperty(this,ps,{value:ap}),Object.defineProperty(this,G,{writable:!0,value:new ds}),Object.defineProperty(this,M,{writable:!0,value:[]}),Object.defineProperty(this,Q,{writable:!0,value:[]}),Object.defineProperty(this,ue,{writable:!0,value:void 0}),Object.defineProperty(this,de,{writable:!0,value:void 0}),Object.defineProperty(this,er,{writable:!0,value:!1}),Object.defineProperty(this,Bt,{writable:!0,value:void 0}),Object.defineProperty(this,ct,{writable:!0,value:void 0}),Object.defineProperty(this,ke,{writable:!0,value:void 0}),Object.defineProperty(this,rt,{writable:!0,value:void 0}),Object.defineProperty(this,ir,{writable:!0,value:i=>(i==null?void 0:i.cause)===Er?null:w(this,Bt)[Bt](i)}),Object.defineProperty(this,Xe,{writable:!0,value:1e4}),Object.defineProperty(this,Kt,{writable:!0,value:5*np}),Object.defineProperty(this,Xt,{writable:!0,value:i=>o=>{if(!o.lengthComputable)return;w(this,Q)[Q][i].uploaded=ip(o.loaded);const a=w(this,Q)[Q].reduce((l,u)=>l+u.uploaded,0);this.options.onProgress(a,w(this,ue)[ue].size)}}),Object.defineProperty(this,Yt,{writable:!0,value:i=>o=>{w(this,M)[M][i]=null,w(this,Q)[Q][i].etag=o,w(this,Q)[Q][i].done=!0;const a={PartNumber:i+1,ETag:o};this.options.onPartComplete(a)}}),this.options={...ni,...r},(n=(s=this.options).getChunkSize)!=null||(s.getChunkSize=ni.getChunkSize),w(this,ue)[ue]=e,w(this,de)[de]=r.file,w(this,ct)[ct]=this.options.onSuccess,w(this,Bt)[Bt]=this.options.onError,w(this,ke)[ke]=this.options.shouldUseMultipart,w(this,rt)[rt]=r.uploadId&&r.key,w(this,ps)[ps]()}start(){w(this,er)[er]?(w(this,G)[G].signal.aborted||w(this,G)[G].abort(Er),w(this,G)[G]=new ds,w(this,Mt)[Mt]()):w(this,rt)[rt]?(this.options.companionComm.restoreUploadFile(w(this,de)[de],{uploadId:this.options.uploadId,key:this.options.key}),w(this,Mt)[Mt]()):w(this,hs)[hs]()}pause(){w(this,G)[G].abort(Er),w(this,G)[G]=new ds}abort(e){e!=null&&e.really?w(this,fs)[fs]():this.pause()}[Symbol.for("uppy test: getChunkState")](){return w(this,Q)[Q]}}function ap(){const t=w(this,ue)[ue].size,e=typeof w(this,ke)[ke]=="function"?w(this,ke)[ke](w(this,de)[de]):!!w(this,ke)[ke];if(e&&t>w(this,Kt)[Kt]){let r=Math.max(this.options.getChunkSize(w(this,ue)[ue]),w(this,Kt)[Kt]),s=Math.floor(t/r);s>w(this,Xe)[Xe]&&(s=w(this,Xe)[Xe],r=t/w(this,Xe)[Xe]),w(this,M)[M]=Array(s);for(let n=0,i=0;n<t;n+=r,i++){const o=Math.min(t,n+r),a=()=>{const l=n;return w(this,ue)[ue].slice(l,o)};if(w(this,M)[M][i]={getData:a,onProgress:w(this,Xt)[Xt](i),onComplete:w(this,Yt)[Yt](i),shouldUseMultipart:e},w(this,rt)[rt]){const l=n+r>t?t-n:r;w(this,M)[M][i].setAsUploaded=()=>{w(this,M)[M][i]=null,w(this,Q)[Q][i].uploaded=l}}}}else w(this,M)[M]=[{getData:()=>w(this,ue)[ue],onProgress:w(this,Xt)[Xt](0),onComplete:w(this,Yt)[Yt](0),shouldUseMultipart:e}];w(this,Q)[Q]=w(this,M)[M].map(()=>({uploaded:0}))}function lp(){this.options.companionComm.uploadFile(w(this,de)[de],w(this,M)[M],w(this,G)[G].signal).then(w(this,ct)[ct],w(this,ir)[ir]),w(this,er)[er]=!0}function up(){this.options.companionComm.resumeUploadFile(w(this,de)[de],w(this,M)[M],w(this,G)[G].signal).then(w(this,ct)[ct],w(this,ir)[ir])}function cp(){w(this,G)[G].abort(),this.options.companionComm.abortFileUpload(w(this,de)[de]).catch(t=>this.options.log(t))}function J(t){if(t!=null&&t.aborted)throw wo("The operation was aborted",{cause:t.reason})}function dp(t){let{method:e="PUT",CanonicalUri:r="/",CanonicalQueryString:s="",SignedHeaders:n,HashedPayload:i}=t;const o=Object.keys(n).map(a=>a.toLowerCase()).sort();return[e,r,s,...o.map(a=>`${a}:${n[a]}`),"",o.join(";"),i].join(`
`)}const Qs=new TextEncoder,Zs={name:"HMAC",hash:"SHA-256"};async function pp(t){const{subtle:e}=globalThis.crypto;return e.digest(Zs.hash,Qs.encode(t))}async function hp(t){const{subtle:e}=globalThis.crypto;return e.importKey("raw",typeof t=="string"?Qs.encode(t):t,Zs,!1,["sign"])}function ii(t){const e=new Uint8Array(t);let r="";for(let s=0;s<e.length;s++)r+=e[s].toString(16).padStart(2,"0");return r}async function It(t,e){const{subtle:r}=globalThis.crypto;return r.sign(Zs,await hp(t),Qs.encode(e))}async function fp(t){let{accountKey:e,accountSecret:r,sessionToken:s,bucketName:n,Key:i,Region:o,expires:a,uploadId:l,partNumber:u}=t;const d="s3",c=`${d}.${o}.amazonaws.com`,m=`/${n}/${encodeURI(i).replace(/[;?:@&=+$,#!'()*]/g,ie=>`%${ie.charCodeAt(0).toString(16).toUpperCase()}`)}`,h="UNSIGNED-PAYLOAD",f=new Date().toISOString().replace(/[-:]|\.\d+/g,""),y=f.slice(0,8),g=`${y}/${o}/${d}/aws4_request`,_=new URL(`https://${c}${m}`);_.searchParams.set("X-Amz-Algorithm","AWS4-HMAC-SHA256"),_.searchParams.set("X-Amz-Content-Sha256",h),_.searchParams.set("X-Amz-Credential",`${e}/${g}`),_.searchParams.set("X-Amz-Date",f),_.searchParams.set("X-Amz-Expires",a),_.searchParams.set("X-Amz-Security-Token",s),_.searchParams.set("X-Amz-SignedHeaders","host"),u&&_.searchParams.set("partNumber",u),l&&_.searchParams.set("uploadId",l),_.searchParams.set("x-id",u&&l?"UploadPart":"PutObject");const S=dp({CanonicalUri:m,CanonicalQueryString:_.search.slice(1),SignedHeaders:{host:c},HashedPayload:h}),A=ii(await pp(S)),U=["AWS4-HMAC-SHA256",f,g,A].join(`
`),x=await It(`AWS4${r}`,y),P=await It(x,o),O=await It(P,d),$=await It(O,"aws4_request"),j=ii(await It($,U));return _.searchParams.set("X-Amz-Signature",j),_}function F(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var mp=0;function ee(t){return"__private_"+mp+++"_"+t}function gp(t){const e=new URL(t);return e.search="",e.hash="",e.href}var Dt=ee("abortMultipartUpload"),q=ee("cache"),qt=ee("createMultipartUpload"),zt=ee("fetchSignature"),tr=ee("getUploadParameters"),Ht=ee("listParts"),Ye=ee("previousRetryDelay"),st=ee("requests"),Je=ee("retryDelays"),Ke=ee("sendCompletionRequest"),xe=ee("setS3MultipartState"),nt=ee("uploadPartBytes"),H=ee("getFile"),ms=ee("shouldRetry"),Wt=ee("nonMultipartUpload");class yp{constructor(e,r,s,n){Object.defineProperty(this,Wt,{value:vp}),Object.defineProperty(this,ms,{value:_p}),Object.defineProperty(this,Dt,{writable:!0,value:void 0}),Object.defineProperty(this,q,{writable:!0,value:new WeakMap}),Object.defineProperty(this,qt,{writable:!0,value:void 0}),Object.defineProperty(this,zt,{writable:!0,value:void 0}),Object.defineProperty(this,tr,{writable:!0,value:void 0}),Object.defineProperty(this,Ht,{writable:!0,value:void 0}),Object.defineProperty(this,Ye,{writable:!0,value:void 0}),Object.defineProperty(this,st,{writable:!0,value:void 0}),Object.defineProperty(this,Je,{writable:!0,value:void 0}),Object.defineProperty(this,Ke,{writable:!0,value:void 0}),Object.defineProperty(this,xe,{writable:!0,value:void 0}),Object.defineProperty(this,nt,{writable:!0,value:void 0}),Object.defineProperty(this,H,{writable:!0,value:void 0}),F(this,st)[st]=e,F(this,xe)[xe]=s,F(this,H)[H]=n,this.setOptions(r)}setOptions(e){const r=F(this,st)[st];if("abortMultipartUpload"in e&&(F(this,Dt)[Dt]=r.wrapPromiseFunction(e.abortMultipartUpload,{priority:1})),"createMultipartUpload"in e&&(F(this,qt)[qt]=r.wrapPromiseFunction(e.createMultipartUpload,{priority:-1})),"signPart"in e&&(F(this,zt)[zt]=r.wrapPromiseFunction(e.signPart)),"listParts"in e&&(F(this,Ht)[Ht]=r.wrapPromiseFunction(e.listParts)),"completeMultipartUpload"in e&&(F(this,Ke)[Ke]=r.wrapPromiseFunction(e.completeMultipartUpload,{priority:1})),"retryDelays"in e){var s;F(this,Je)[Je]=(s=e.retryDelays)!=null?s:[]}"uploadPartBytes"in e&&(F(this,nt)[nt]=r.wrapPromiseFunction(e.uploadPartBytes,{priority:1/0})),"getUploadParameters"in e&&(F(this,tr)[tr]=r.wrapPromiseFunction(e.getUploadParameters))}async getUploadId(e,r){let s;for(;(s=F(this,q)[q].get(e.data))!=null;)try{return await s}catch{}const n=F(this,qt)[qt](F(this,H)[H](e),r),i=()=>{n.abort(r.reason),F(this,q)[q].delete(e.data)};return r.addEventListener("abort",i,{once:!0}),F(this,q)[q].set(e.data,n),n.then(async o=>{r.removeEventListener("abort",i),F(this,xe)[xe](e,o),F(this,q)[q].set(e.data,o)},()=>{r.removeEventListener("abort",i),F(this,q)[q].delete(e.data)}),n}async abortFileUpload(e){const r=F(this,q)[q].get(e.data);if(r==null)return;F(this,q)[q].delete(e.data),F(this,xe)[xe](e,Object.create(null));let s;try{s=await r}catch{return}await F(this,Dt)[Dt](F(this,H)[H](e),s)}async uploadFile(e,r,s){if(J(s),r.length===1&&!r[0].shouldUseMultipart)return F(this,Wt)[Wt](e,r[0],s);const{uploadId:n,key:i}=await this.getUploadId(e,s);J(s);try{const o=await Promise.all(r.map((a,l)=>this.uploadChunk(e,l+1,a,s)));return J(s),await F(this,Ke)[Ke](F(this,H)[H](e),{key:i,uploadId:n,parts:o,signal:s},s).abortOn(s)}catch(o){throw(o==null?void 0:o.cause)!==Er&&(o==null?void 0:o.name)!=="AbortError"&&this.abortFileUpload(e),o}}restoreUploadFile(e,r){F(this,q)[q].set(e.data,r)}async resumeUploadFile(e,r,s){if(J(s),r.length===1&&r[0]!=null&&!r[0].shouldUseMultipart)return F(this,Wt)[Wt](e,r[0],s);const{uploadId:n,key:i}=await this.getUploadId(e,s);J(s);const o=await F(this,Ht)[Ht](F(this,H)[H](e),{uploadId:n,key:i,signal:s},s).abortOn(s);J(s);const a=await Promise.all(r.map((l,u)=>{const d=u+1,c=o.find(m=>{let{PartNumber:h}=m;return h===d});return c==null?this.uploadChunk(e,d,l,s):(l==null||l.setAsUploaded==null||l.setAsUploaded(),{PartNumber:d,ETag:c.ETag})}));return J(s),F(this,Ke)[Ke](F(this,H)[H](e),{key:i,uploadId:n,parts:a,signal:s},s).abortOn(s)}async uploadChunk(e,r,s,n){J(n);const{uploadId:i,key:o}=await this.getUploadId(e,n),a=F(this,Je)[Je].values(),l=F(this,Je)[Je].values(),u=()=>{const d=a.next();return d==null||d.done?null:d.value};for(;;){J(n);const d=s.getData(),{onProgress:c,onComplete:m}=s;let h;try{h=await F(this,zt)[zt](F(this,H)[H](e),{uploadId:i,key:o,partNumber:r,body:d,signal:n}).abortOn(n)}catch(f){const y=u();if(y==null||n.aborted)throw f;await new Promise(g=>setTimeout(g,y));continue}J(n);try{return{PartNumber:r,...await F(this,nt)[nt]({signature:h,body:d,size:d.size,onProgress:c,onComplete:m,signal:n}).abortOn(n)}}catch(f){if(!await F(this,ms)[ms](f,l))throw f}}}}async function _p(t,e){var r;const s=F(this,st)[st],n=t==null||(r=t.source)==null?void 0:r.status;if(n==null)return!1;if(n===403&&t.message==="Request has expired"){if(!s.isPaused){if(s.limit===1||F(this,Ye)[Ye]==null){const i=e.next();if(i==null||i.done)return!1;F(this,Ye)[Ye]=i.value}s.rateLimit(0),await new Promise(i=>setTimeout(i,F(this,Ye)[Ye]))}}else if(n===429){if(!s.isPaused){const i=e.next();if(i==null||i.done)return!1;s.rateLimit(i.value)}}else{if(n>400&&n<500&&n!==409)return!1;if(typeof navigator<"u"&&navigator.onLine===!1)s.isPaused||(s.pause(),window.addEventListener("online",()=>{s.resume()},{once:!0}));else{const i=e.next();if(i==null||i.done)return!1;await new Promise(o=>setTimeout(o,i.value))}}return!0}async function vp(t,e,r){var s;const{method:n="POST",url:i,fields:o,headers:a}=await F(this,tr)[tr](F(this,H)[H](t),{signal:r}).abortOn(r);let l;const u=e.getData();if(n.toUpperCase()==="POST"){const f=new FormData;Object.entries(o).forEach(y=>{let[g,_]=y;return f.set(g,_)}),f.set("file",u),l=f}else l=u;const{onProgress:d,onComplete:c}=e,m=await F(this,nt)[nt]({signature:{url:i,headers:a,method:n},body:l,size:u.size,onProgress:d,onComplete:c,signal:r}).abortOn(r),h=o==null?void 0:o.key;return F(this,xe)[xe](t,{key:h}),{...m,location:(s=m.location)!=null?s:gp(i),bucket:o==null?void 0:o.bucket,key:h}}function E(t,e){if(!{}.hasOwnProperty.call(t,e))throw new TypeError("attempted to use private field on non-instance");return t}var bp=0;function ne(t){return"__private_"+bp+++"_"+t}const wp={version:"4.2.3"};function ht(t){if(t!=null&&t.error){const e=new Error(t.message);throw Object.assign(e,t.error),e}return t}function So(t){const e=t.Expiration;if(e){const r=Math.floor((new Date(e)-Date.now())/1e3);if(r>9)return r}}function oi(t){let{meta:e,allowedMetaFields:r,querify:s=!1}=t;const n=r??Object.keys(e);return e?Object.fromEntries(n.filter(i=>e[i]!=null).map(i=>{const o=s?`metadata[${i}]`:i,a=String(e[i]);return[o,a]})):{}}const Sp={allowedMetaFields:!0,limit:6,getTemporarySecurityCredentials:!1,shouldUseMultipart:t=>(t.size||0)>100*1024*1024,retryDelays:[0,1e3,3e3,5e3]};var it=ne("companionCommunicationQueue"),N=ne("client"),Gt=ne("setClient"),Y=ne("assertHost"),z=ne("cachedTemporaryCredentials"),gs=ne("getTemporarySecurityCredentials"),ys=ne("setS3MultipartState"),ut=ne("getFile"),_s=ne("uploadLocalFile"),vs=ne("getCompanionClientArgs"),Vt=ne("upload"),ot=ne("setCompanionHeaders"),Re=ne("setResumableUploadsCapability"),Jt=ne("resetResumableCapability");class Wr extends no{constructor(e,r){var s;super(e,{...Sp,uploadPartBytes:Wr.uploadPartBytes,createMultipartUpload:null,listParts:null,abortMultipartUpload:null,completeMultipartUpload:null,signPart:null,getUploadParameters:null,...r}),Object.defineProperty(this,vs,{value:Fp}),Object.defineProperty(this,_s,{value:Op}),Object.defineProperty(this,gs,{value:Tp}),Object.defineProperty(this,Y,{value:Ep}),Object.defineProperty(this,Gt,{value:Pp}),Object.defineProperty(this,it,{writable:!0,value:void 0}),Object.defineProperty(this,N,{writable:!0,value:void 0}),Object.defineProperty(this,z,{writable:!0,value:void 0}),Object.defineProperty(this,ys,{writable:!0,value:(i,o)=>{let{key:a,uploadId:l}=o;const u=this.uppy.getFile(i.id);u!=null&&this.uppy.setFileState(i.id,{s3Multipart:{...u.s3Multipart,key:a,uploadId:l}})}}),Object.defineProperty(this,ut,{writable:!0,value:i=>this.uppy.getFile(i.id)||i}),Object.defineProperty(this,Vt,{writable:!0,value:async i=>{if(i.length===0)return;const o=this.uppy.getFilesByIds(i),a=tp(o),l=rp(a);this.uppy.emit("upload-start",l);const u=a.map(c=>{if(c.isRemote){const m=()=>this.requests;E(this,Re)[Re](!1);const h=new AbortController,f=g=>{g.id===c.id&&h.abort()};this.uppy.on("file-removed",f);const y=this.uppy.getRequestClientForFile(c).uploadRemoteFile(c,E(this,vs)[vs](c),{signal:h.signal,getQueue:m});return this.requests.wrapSyncFunction(()=>{this.uppy.off("file-removed",f)},{priority:-1})(),y}return E(this,_s)[_s](c)}),d=await Promise.allSettled(u);return E(this,Re)[Re](!0),d}}),Object.defineProperty(this,ot,{writable:!0,value:()=>{var i;(i=E(this,N)[N])==null||i.setCompanionHeaders(this.opts.headers)}}),Object.defineProperty(this,Re,{writable:!0,value:i=>{const{capabilities:o}=this.uppy.getState();this.uppy.setState({capabilities:{...o,resumableUploads:i}})}}),Object.defineProperty(this,Jt,{writable:!0,value:()=>{E(this,Re)[Re](!0)}}),this.type="uploader",this.id=this.opts.id||"AwsS3Multipart",E(this,Gt)[Gt](r);const n={createMultipartUpload:this.createMultipartUpload,listParts:this.listParts,abortMultipartUpload:this.abortMultipartUpload,completeMultipartUpload:this.completeMultipartUpload,signPart:r!=null&&r.getTemporarySecurityCredentials?this.createSignedURL:this.signPart,getUploadParameters:r!=null&&r.getTemporarySecurityCredentials?this.createSignedURL:this.getUploadParameters};for(const i of Object.keys(n))this.opts[i]==null&&(this.opts[i]=n[i].bind(this));this.requests=(s=this.opts.rateLimitedQueue)!=null?s:new Kd(this.opts.limit),E(this,it)[it]=new yp(this.requests,this.opts,E(this,ys)[ys],E(this,ut)[ut]),this.uploaders=Object.create(null),this.uploaderEvents=Object.create(null)}[Symbol.for("uppy test: getClient")](){return E(this,N)[N]}setOptions(e){E(this,it)[it].setOptions(e),super.setOptions(e),E(this,Gt)[Gt](e)}resetUploaderReferences(e,r){this.uploaders[e]&&(this.uploaders[e].abort({really:(r==null?void 0:r.abort)||!1}),this.uploaders[e]=null),this.uploaderEvents[e]&&(this.uploaderEvents[e].remove(),this.uploaderEvents[e]=null)}createMultipartUpload(e,r){E(this,Y)[Y]("createMultipartUpload"),J(r);const s=si(this.opts.allowedMetaFields,e.meta),n=oi({meta:e.meta,allowedMetaFields:s});return E(this,N)[N].post("s3/multipart",{filename:e.name,type:e.type,metadata:n},{signal:r}).then(ht)}listParts(e,r,s){var n;let{key:i,uploadId:o,signal:a}=r;(n=a)!=null||(a=s),E(this,Y)[Y]("listParts"),J(a);const l=encodeURIComponent(i);return E(this,N)[N].get(`s3/multipart/${encodeURIComponent(o)}?key=${l}`,{signal:a}).then(ht)}completeMultipartUpload(e,r,s){var n;let{key:i,uploadId:o,parts:a,signal:l}=r;(n=l)!=null||(l=s),E(this,Y)[Y]("completeMultipartUpload"),J(l);const u=encodeURIComponent(i),d=encodeURIComponent(o);return E(this,N)[N].post(`s3/multipart/${d}/complete?key=${u}`,{parts:a.map(c=>{let{ETag:m,PartNumber:h}=c;return{ETag:m,PartNumber:h}})},{signal:l}).then(ht)}async createSignedURL(e,r){const s=await E(this,gs)[gs](r),n=So(s.credentials)||604800,{uploadId:i,key:o,partNumber:a}=r;return{method:"PUT",expires:n,fields:{},url:`${await fp({accountKey:s.credentials.AccessKeyId,accountSecret:s.credentials.SecretAccessKey,sessionToken:s.credentials.SessionToken,expires:n,bucketName:s.bucket,Region:s.region,Key:o??`${crypto.randomUUID()}-${e.name}`,uploadId:i,partNumber:a})}`,headers:{"Content-Type":e.type}}}signPart(e,r){let{uploadId:s,key:n,partNumber:i,signal:o}=r;if(E(this,Y)[Y]("signPart"),J(o),s==null||n==null||i==null)throw new Error("Cannot sign without a key, an uploadId, and a partNumber");const a=encodeURIComponent(n);return E(this,N)[N].get(`s3/multipart/${encodeURIComponent(s)}/${i}?key=${a}`,{signal:o}).then(ht)}abortMultipartUpload(e,r){let{key:s,uploadId:n,signal:i}=r;E(this,Y)[Y]("abortMultipartUpload");const o=encodeURIComponent(s),a=encodeURIComponent(n);return E(this,N)[N].delete(`s3/multipart/${a}?key=${o}`,void 0,{signal:i}).then(ht)}getUploadParameters(e,r){E(this,Y)[Y]("getUploadParameters");const{meta:s}=e,{type:n,name:i}=s,o=si(this.opts.allowedMetaFields,e.meta),a=oi({meta:s,allowedMetaFields:o,querify:!0}),l=new URLSearchParams({filename:i,type:n,...a});return E(this,N)[N].get(`s3/params?${l}`,r)}static async uploadPartBytes(e){let{signature:{url:r,expires:s,headers:n,method:i="PUT"},body:o,size:a=o.size,onProgress:l,onComplete:u,signal:d}=e;if(J(d),r==null)throw new Error("Cannot upload to an undefined URL");return new Promise((c,m)=>{const h=new XMLHttpRequest;h.open(i,r,!0),n&&Object.keys(n).forEach(g=>{h.setRequestHeader(g,n[g])}),h.responseType="text",typeof s=="number"&&(h.timeout=s*1e3);function f(){h.abort()}function y(){d==null||d.removeEventListener("abort",f)}d==null||d.addEventListener("abort",f),h.upload.addEventListener("progress",g=>{l(g)}),h.addEventListener("abort",()=>{y(),m(wo())}),h.addEventListener("timeout",()=>{y();const g=new Error("Request has expired");g.source={status:403},m(g)}),h.addEventListener("load",()=>{if(y(),h.status===403&&h.responseText.includes("<Message>Request has expired</Message>")){const U=new Error("Request has expired");U.source=h,m(U);return}if(h.status<200||h.status>=300){const U=new Error("Non 2xx");U.source=h,m(U);return}l==null||l({loaded:a,lengthComputable:!0});const g=h.getAllResponseHeaders().trim().split(/[\r\n]+/),_={__proto__:null};for(const U of g){const x=U.split(": "),P=x.shift(),O=x.join(": ");_[P]=O}const{etag:S,location:A}=_;if(i.toUpperCase()==="POST"&&A==null&&console.error("@uppy/aws-s3: Could not read the Location header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3/#setting-up-your-s3-bucket"),S==null){console.error("@uppy/aws-s3: Could not read the ETag header. This likely means CORS is not configured correctly on the S3 Bucket. See https://uppy.io/docs/aws-s3/#setting-up-your-s3-bucket");return}u==null||u(S),c({..._,ETag:S})}),h.addEventListener("error",g=>{y();const _=new Error("Unknown error");_.source=g.target,m(_)}),h.send(o)})}install(){E(this,Re)[Re](!0),this.uppy.addPreProcessor(E(this,ot)[ot]),this.uppy.addUploader(E(this,Vt)[Vt]),this.uppy.on("cancel-all",E(this,Jt)[Jt])}uninstall(){this.uppy.removePreProcessor(E(this,ot)[ot]),this.uppy.removeUploader(E(this,Vt)[Vt]),this.uppy.off("cancel-all",E(this,Jt)[Jt])}}function Pp(t){t==null||!("endpoint"in t||"companionUrl"in t||"headers"in t||"companionHeaders"in t||"cookiesRule"in t||"companionCookiesRule"in t)||("companionUrl"in t&&!("endpoint"in t)&&this.uppy.log("`companionUrl` option has been removed in @uppy/aws-s3, use `endpoint` instead.","warning"),"companionHeaders"in t&&!("headers"in t)&&this.uppy.log("`companionHeaders` option has been removed in @uppy/aws-s3, use `headers` instead.","warning"),"companionCookiesRule"in t&&!("cookiesRule"in t)&&this.uppy.log("`companionCookiesRule` option has been removed in @uppy/aws-s3, use `cookiesRule` instead.","warning"),"endpoint"in t?E(this,N)[N]=new vo(this.uppy,{pluginId:this.id,provider:"AWS",companionUrl:this.opts.endpoint,companionHeaders:this.opts.headers,companionCookiesRule:this.opts.cookiesRule}):("headers"in t&&E(this,ot)[ot](),"cookiesRule"in t&&(E(this,N)[N].opts.companionCookiesRule=t.cookiesRule)))}function Ep(t){if(!E(this,N)[N])throw new Error(`Expected a \`endpoint\` option containing a URL, or if you are not using Companion, a custom \`${t}\` implementation.`)}async function Tp(t){if(J(t==null?void 0:t.signal),E(this,z)[z]==null){const{getTemporarySecurityCredentials:e}=this.opts;e===!0?(E(this,Y)[Y]("getTemporarySecurityCredentials"),E(this,z)[z]=E(this,N)[N].get("s3/sts",t).then(ht)):E(this,z)[z]=e(t),E(this,z)[z]=await E(this,z)[z],setTimeout(()=>{E(this,z)[z]=null},(So(E(this,z)[z].credentials)||0)*500)}return E(this,z)[z]}function Op(t){var e=this;return new Promise((r,s)=>{const n=(u,d)=>{var c;const m=this.uppy.getFile(t.id);this.uppy.emit("upload-progress",m,{uploadStarted:(c=m.progress.uploadStarted)!=null?c:0,bytesUploaded:u,bytesTotal:d})},i=u=>{this.uppy.log(u),this.uppy.emit("upload-error",t,u),this.resetUploaderReferences(t.id),s(u)},o=u=>{const d={body:{...u},status:200,uploadURL:u.location};this.resetUploaderReferences(t.id),this.uppy.emit("upload-success",E(this,ut)[ut](t),d),u.location&&this.uppy.log(`Download ${t.name} from ${u.location}`),r()},a=new op(t.data,{companionComm:E(this,it)[it],log:function(){return e.uppy.log(...arguments)},getChunkSize:this.opts.getChunkSize?this.opts.getChunkSize.bind(this):void 0,onProgress:n,onError:i,onSuccess:o,onPartComplete:u=>{this.uppy.emit("s3-multipart:part-uploaded",E(this,ut)[ut](t),u)},file:t,shouldUseMultipart:this.opts.shouldUseMultipart,...t.s3Multipart});this.uploaders[t.id]=a;const l=new Gd(this.uppy);this.uploaderEvents[t.id]=l,l.onFileRemove(t.id,u=>{a.abort(),this.resetUploaderReferences(t.id,{abort:!0}),r(`upload ${u} was removed`)}),l.onCancelAll(t.id,()=>{a.abort(),this.resetUploaderReferences(t.id,{abort:!0}),r(`upload ${t.id} was canceled`)}),l.onFilePause(t.id,u=>{u?a.pause():a.start()}),l.onPauseAll(t.id,()=>{a.pause()}),l.onResumeAll(t.id,()=>{a.start()}),a.start()})}function Fp(t){var e;return{...(e=t.remote)==null?void 0:e.body,protocol:"s3-multipart",size:t.data.size,metadata:t.meta}}Wr.VERSION=wp.version;window.Uppy=Di;window.UppyDragDrop=zr;window.UppyStatusBar=po;window.UppyProgressBar=ho;window.UppyFileInput=fo;window.UppyAwsS3=Wr;window.createUppy=function(t={}){const e={debug:!1,autoProceed:!1,allowMultipleUploads:!1,restrictions:{maxFileSize:209715200,allowedFileTypes:["audio/*","application/pdf","image/*","application/zip"]}};return new Di({...e,...t})};window.getCSRFToken=function(){var t;return((t=document.querySelector('meta[name="csrf-token"]'))==null?void 0:t.getAttribute("content"))||""};console.log("Uppy configuration loaded");try{Ro(()=>import("./stripe-handler-9538a51a.js"),[])}catch(t){console.error("Could not load Stripe handler:",t)}
