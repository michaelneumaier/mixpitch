document.addEventListener("DOMContentLoaded",function(){typeof Stripe<"u"&&document.querySelector("#card-element")&&initializeStripe()});window.initializeStripe=function(){const a=document.querySelector('meta[name="stripe-key"]').getAttribute("content"),d=Stripe(a),c=document.querySelector("#payment-form").dataset.secret,i=d.elements(),m={base:{color:"#32325d",fontFamily:'"Helvetica Neue", Helvetica, sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"#aab7c4"}},invalid:{color:"#fa755a",iconColor:"#fa755a"}},t=i.create("card",{style:m});t.mount("#card-element"),t.addEventListener("change",function(n){const e=document.getElementById("card-errors");n.error?(e.textContent=n.error.message,e.classList.remove("hidden")):(e.textContent="",e.classList.add("hidden"))});const r=document.getElementById("payment-form");r.addEventListener("submit",function(n){n.preventDefault(),document.getElementById("card-button").disabled=!0,document.getElementById("card-button").classList.add("opacity-50","cursor-not-allowed"),document.getElementById("card-button").textContent="Processing...",d.confirmCardSetup(c,{payment_method:{card:t,billing_details:{name:document.getElementById("card-holder-name").value}}}).then(function(e){if(e.error){const o=document.getElementById("card-errors");o.textContent=e.error.message,o.classList.remove("hidden"),document.getElementById("card-button").disabled=!1,document.getElementById("card-button").classList.remove("opacity-50","cursor-not-allowed"),document.getElementById("card-button").textContent="Update Payment Method"}else{const o=e.setupIntent.payment_method;Livewire.find(document.getElementById("payment-form").closest("[wire\\:id]").getAttribute("wire:id")).updatePaymentMethod(o),r.reset(),t.clear(),document.getElementById("card-button").disabled=!1,document.getElementById("card-button").classList.remove("opacity-50","cursor-not-allowed"),document.getElementById("card-button").textContent="Update Payment Method"}})})};
